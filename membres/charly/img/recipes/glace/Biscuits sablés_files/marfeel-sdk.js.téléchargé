!function(){"use strict";((e,i)=>{var n,c;null!==(n=(c=window.marfeel.config).experiences)&&void 0!==n||(c.experiences={}),window.marfeel.config=Object.assign(Object.assign({},e),window.marfeel.config),Object.assign(window.marfeel.config.experiences,{preflight:i})})({"version":"pr/1042"},{"active":true,"recommender":{"enabled":true,"personalizedContent":false,"curatedContent":true},"preflight":{"experiments":[{"name":"AB","group":2,"groups":2}],"compass":{},"targeting":{},"inline":{}}})}();
/*! For license information please see marfeel-sdk.js.LICENSE.txt */
var e,t,r,n,i={254:(e,t,r)=>{var n,i,o,a,s=r(189),c="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{},u=(n=function(e){var t,r,n,i,o,a,s,u,l,d,p,f,h,m,v,g,y,b,w,O,E,P,k;!function(S){var C,j,A="object"==typeof c?c:"object"==typeof self?self:"object"==typeof this?this:{};function T(e,t){return e!==A&&("function"==typeof Object.create?Object.defineProperty(e,"__esModule",{value:!0}):e.__esModule=!0),function(r,n){return e[r]=t?t(r,n):n}}C=T(A,T(e.exports)),j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},t=function(e,t){function r(){this.constructor=e}j(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r},i=function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},o=function(e,t){return function(r,n){t(r,n,e)}},a=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):i(e.value).then(a,s)}c((n=n.apply(e,t||[])).next())}))},u=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return c([e,t])}}function c(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},k=function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]},l=function(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||(t[r]=e[r])},d=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},p=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},f=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e},h=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n},m=function(e){return this instanceof m?(this.v=e,this):new m(e)},v=function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),o=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(e){i[e]&&(n[e]=function(t){return new Promise((function(r,n){o.push([e,t,r,n])>1||s(e,t)}))})}function s(e,t){try{!function(e){e.value instanceof m?Promise.resolve(e.value.v).then(c,u):l(o[0][2],e)}(i[e](t))}catch(e){l(o[0][3],e)}}function c(e){s("next",e)}function u(e){s("throw",e)}function l(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}},g=function(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:m(e[n](t)),done:"return"===n}:i?i(t):t}:i}},y=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=d(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,i){!function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}(n,i,(t=e[r](t)).done,t.value)}))}}},b=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},w=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t},O=function(e){return e&&e.__esModule?e:{default:e}},E=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},P=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r},C("__extends",t),C("__assign",r),C("__rest",n),C("__decorate",i),C("__param",o),C("__metadata",a),C("__awaiter",s),C("__generator",u),C("__exportStar",l),C("__createBinding",k),C("__values",d),C("__read",p),C("__spread",f),C("__spreadArrays",h),C("__await",m),C("__asyncGenerator",v),C("__asyncDelegator",g),C("__asyncValues",y),C("__makeTemplateObject",b),C("__importStar",w),C("__importDefault",O),C("__classPrivateFieldGet",E),C("__classPrivateFieldSet",P)}()},n(i={exports:{}}),i.exports),l="undefined"!=typeof window&&/^((?!chrome|android).)*safari/i.test(window.navigator.userAgent)&&function(e){void 0===e&&(e=window.navigator.userAgent);var t=function(e,t){var r=(e||window.navigator.userAgent).match(/version\/(\d+(\.\d+)?)/i);return r&&r.length>1&&r[1]||""}(e),r=parseInt(t.split(".")[0],10);return!isNaN(r)&&r}()<13,d=function(){try{return"keepalive"in new Request("https://www.google.com/")}catch(e){return!1}}(),p="undefined"!=typeof window&&void 0!==window.navigator.sendBeacon,f="undefined"!=typeof window&&"fetch"in window;function h(e,t,r){var n=void 0===r?{}:r,i=n.contentType,a=n.sync,s=void 0!==a&&a,c=n.onSuccessCallback,u=n.onErrorCallback;switch(function(e,t){return l||!f&&!p||t?o.XHR:f&&(d||e)?o.FETCH:p&&!e?o.BEACON:o.XHR}(!!c||!!u,s)){case o.FETCH:return void function(e,t,r){var n=void 0===r?{}:r,i=n.contentType,o=n.keepalive,a=void 0!==o&&o,s=t;return i&&(s=new Blob([t],{type:i})),fetch(e,{method:"POST",body:s,keepalive:a})}(e,t,{contentType:i,keepalive:!0}).then((function(e){return e.ok||null==u||u(e.status),e.text()})).then((function(e){return null==c?void 0:c(e)})).catch((function(){return null==u?void 0:u(0)}));case o.BEACON:return void function(e,t,r){var n=(void 0===r?{}:r).contentType,i=t;n&&(i=new Blob([t],{type:n})),window.navigator.sendBeacon(e,i)}(e,t,{contentType:i});default:return function(e,t,r){var n=void 0===r?{}:r,i=n.onSuccessCallback,o=n.onErrorCallback,a=n.contentType,s=n.sync,c=void 0!==s&&s,u=!c,l=new XMLHttpRequest;return l.open("POST",e,u),a&&l.setRequestHeader("Content-Type",a),l.withCredentials=!0,c||(l.onreadystatechange=function(){4===l.readyState&&(200===l.status?null==i||i(l.responseText):null==o||o(l.status))}),l.send(t),c?l.responseText:void 0}(e,t,{onSuccessCallback:c,contentType:i,onErrorCallback:u,sync:s})}}!function(e){e[e.XHR=0]="XHR",e[e.FETCH=1]="FETCH",e[e.BEACON=2]="BEACON"}(o||(o={})),function(e){e[e.ORIGIN=0]="ORIGIN",e[e.FALLBACK=1]="FALLBACK"}(a||(a={}));var m,v=function(e){return null==e?void 0:e.replace(/\/$/,"")},g=function(){function e(e,t){var r=void 0===t?{}:t,n=r.fallback,i=r.fallbackWindow,o=void 0===i?5e3:i;this.mode=a.ORIGIN,this.endpoint=v(e),this.fallback=v(n),this.fallbackWindow=o}return e.prototype.switchMode=function(e){this.mode=e},e.prototype.getUri=function(e){var t=e.startsWith("/")?e:"/"+e;return""+(this.mode===a.ORIGIN?this.endpoint:this.fallback)+t},e.prototype.post=function(e,t,r){var n=this;void 0===r&&(r={});var i=r.onErrorCallback,o=r.onSuccessCallback,s=r.skipResponse,c=void 0!==s&&s,l=u.__rest(r,["onErrorCallback","onSuccessCallback","skipResponse"]),d=this.mode,p=c?void 0:this.fallback&&function(o){n.fallback&&d===a.ORIGIN?(n.switchMode(a.FALLBACK),n.post(e,t,r),window.setTimeout((function(){return n.switchMode(a.ORIGIN)}),n.fallbackWindow)):null==i||i(o)}||i,f=c?void 0:o;h(this.getUri(e),t,u.__assign(u.__assign({},l),{onSuccessCallback:f,onErrorCallback:p}))},e}(),y={childList:!0,subtree:!0},b=[],w=[],O=function(e){w.forEach((function(t){t(e)}))};function E(e){return new MutationObserver((function(t){t.forEach((function(t){"childList"===t.type&&e(t.target)}))}))}var P={};RegExp("^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])");t.V0=g,t.C1=function(e){void 0!==document.addEventListener&&void 0!==document.hidden&&document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&e()})),window.addEventListener("pagehide",(function(){e()}),{capture:!0}),l&&addEventListener("beforeunload",e,!0)},t.VN=function(e){return void 0===e&&(e=new Date),Math.floor(e.getTime()/1e3)},t.Fs=function(){try{return s.v4()}catch(e){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}},t.N7=function(e,t){void 0===t&&(t=document.body);var r,n,i,o=t===document.body;if(e){var a=(n=e,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];clearTimeout(i),i=setTimeout((function(){n.apply(void 0,e)}),400)});if("undefined"!=typeof MutationObserver)if(o)r=function(){a(document.body)},w.push(r),m||(m=E(O)).observe(document.body,y);else{var s=E(a);b.push(s),s.observe(t,y)}}},t.BY=function(e){return function(e,t){var r=void 0===t?{}:t,n=r.cache,i=void 0===n||n,o=r.readonly,a=void 0===o||o;try{if(!a)return new URL(e,document.baseURI);if(!P[e]){var s=new URL(e,document.baseURI),c={host:s.host,hostname:s.hostname,pathname:s.pathname,port:s.port,protocol:s.protocol,search:s.search,hash:s.hash,href:s.href,origin:s.origin};if(!i)return c;P[e]=c}return u.__assign({},P[e])}catch(e){return{}}}(e).href}},181:function(e,t){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){if("object"==typeof e&&null!==e){if("function"==typeof Object.getPrototypeOf){var t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}return"[object Object]"===Object.prototype.toString.call(e)}return!1},a=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduce((function(e,t){return Object.keys(t).forEach((function(r){Array.isArray(e[r])&&Array.isArray(t[r])?e[r]=a.options.mergeArrays?Array.from(new Set(e[r].concat(t[r]))):t[r]:o(e[r])&&o(t[r])?e[r]=a(e[r],t[r]):e[r]=t[r]})),e}),{})},s={mergeArrays:!0};a.options=s,a.withOptions=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];a.options=r({mergeArrays:!0},e);var c=a.apply(void 0,i([],n(t),!1));return a.options=s,c},t.default=a},189:(e,t,r)=>{r.r(t),r.d(t,{NIL:()=>S,parse:()=>d,stringify:()=>a.Z,v1:()=>u,v3:()=>w,v4:()=>O.Z,v5:()=>k,validate:()=>l.Z,version:()=>C});var n,i,o=r(302),a=r(708),s=0,c=0;const u=function(e,t,r){var u=t&&r||0,l=t||new Array(16),d=(e=e||{}).node||n,p=void 0!==e.clockseq?e.clockseq:i;if(null==d||null==p){var f=e.random||(e.rng||o.Z)();null==d&&(d=n=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==p&&(p=i=16383&(f[6]<<8|f[7]))}var h=void 0!==e.msecs?e.msecs:Date.now(),m=void 0!==e.nsecs?e.nsecs:c+1,v=h-s+(m-c)/1e4;if(v<0&&void 0===e.clockseq&&(p=p+1&16383),(v<0||h>s)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=h,c=m,i=p;var g=(1e4*(268435455&(h+=122192928e5))+m)%4294967296;l[u++]=g>>>24&255,l[u++]=g>>>16&255,l[u++]=g>>>8&255,l[u++]=255&g;var y=h/4294967296*1e4&268435455;l[u++]=y>>>8&255,l[u++]=255&y,l[u++]=y>>>24&15|16,l[u++]=y>>>16&255,l[u++]=p>>>8|128,l[u++]=255&p;for(var b=0;b<6;++b)l[u+b]=d[b];return t||(0,a.Z)(l)};var l=r(495);const d=function(e){if(!(0,l.Z)(e))throw TypeError("Invalid UUID");var t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};function p(e,t,r){function n(e,n,i,o){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=d(n)),16!==n.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var s=new Uint8Array(16+e.length);if(s.set(n),s.set(e,n.length),(s=r(s))[6]=15&s[6]|t,s[8]=63&s[8]|128,i){o=o||0;for(var c=0;c<16;++c)i[o+c]=s[c];return i}return(0,a.Z)(s)}try{n.name=e}catch(e){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}function f(e){return 14+(e+64>>>9<<4)+1}function h(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function m(e,t,r,n,i,o){return h((a=h(h(t,e),h(n,o)))<<(s=i)|a>>>32-s,r);var a,s}function v(e,t,r,n,i,o,a){return m(t&r|~t&n,e,t,i,o,a)}function g(e,t,r,n,i,o,a){return m(t&n|r&~n,e,t,i,o,a)}function y(e,t,r,n,i,o,a){return m(t^r^n,e,t,i,o,a)}function b(e,t,r,n,i,o,a){return m(r^(t|~n),e,t,i,o,a)}const w=p("v3",48,(function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return function(e){for(var t=[],r=32*e.length,n="0123456789abcdef",i=0;i<r;i+=8){var o=e[i>>5]>>>i%32&255,a=parseInt(n.charAt(o>>>4&15)+n.charAt(15&o),16);t.push(a)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[f(t)-1]=t;for(var r=1732584193,n=-271733879,i=-1732584194,o=271733878,a=0;a<e.length;a+=16){var s=r,c=n,u=i,l=o;r=v(r,n,i,o,e[a],7,-680876936),o=v(o,r,n,i,e[a+1],12,-389564586),i=v(i,o,r,n,e[a+2],17,606105819),n=v(n,i,o,r,e[a+3],22,-1044525330),r=v(r,n,i,o,e[a+4],7,-176418897),o=v(o,r,n,i,e[a+5],12,1200080426),i=v(i,o,r,n,e[a+6],17,-1473231341),n=v(n,i,o,r,e[a+7],22,-45705983),r=v(r,n,i,o,e[a+8],7,1770035416),o=v(o,r,n,i,e[a+9],12,-1958414417),i=v(i,o,r,n,e[a+10],17,-42063),n=v(n,i,o,r,e[a+11],22,-1990404162),r=v(r,n,i,o,e[a+12],7,1804603682),o=v(o,r,n,i,e[a+13],12,-40341101),i=v(i,o,r,n,e[a+14],17,-1502002290),r=g(r,n=v(n,i,o,r,e[a+15],22,1236535329),i,o,e[a+1],5,-165796510),o=g(o,r,n,i,e[a+6],9,-1069501632),i=g(i,o,r,n,e[a+11],14,643717713),n=g(n,i,o,r,e[a],20,-373897302),r=g(r,n,i,o,e[a+5],5,-701558691),o=g(o,r,n,i,e[a+10],9,38016083),i=g(i,o,r,n,e[a+15],14,-660478335),n=g(n,i,o,r,e[a+4],20,-405537848),r=g(r,n,i,o,e[a+9],5,568446438),o=g(o,r,n,i,e[a+14],9,-1019803690),i=g(i,o,r,n,e[a+3],14,-187363961),n=g(n,i,o,r,e[a+8],20,1163531501),r=g(r,n,i,o,e[a+13],5,-1444681467),o=g(o,r,n,i,e[a+2],9,-51403784),i=g(i,o,r,n,e[a+7],14,1735328473),r=y(r,n=g(n,i,o,r,e[a+12],20,-1926607734),i,o,e[a+5],4,-378558),o=y(o,r,n,i,e[a+8],11,-2022574463),i=y(i,o,r,n,e[a+11],16,1839030562),n=y(n,i,o,r,e[a+14],23,-35309556),r=y(r,n,i,o,e[a+1],4,-1530992060),o=y(o,r,n,i,e[a+4],11,1272893353),i=y(i,o,r,n,e[a+7],16,-155497632),n=y(n,i,o,r,e[a+10],23,-1094730640),r=y(r,n,i,o,e[a+13],4,681279174),o=y(o,r,n,i,e[a],11,-358537222),i=y(i,o,r,n,e[a+3],16,-722521979),n=y(n,i,o,r,e[a+6],23,76029189),r=y(r,n,i,o,e[a+9],4,-640364487),o=y(o,r,n,i,e[a+12],11,-421815835),i=y(i,o,r,n,e[a+15],16,530742520),r=b(r,n=y(n,i,o,r,e[a+2],23,-995338651),i,o,e[a],6,-198630844),o=b(o,r,n,i,e[a+7],10,1126891415),i=b(i,o,r,n,e[a+14],15,-1416354905),n=b(n,i,o,r,e[a+5],21,-57434055),r=b(r,n,i,o,e[a+12],6,1700485571),o=b(o,r,n,i,e[a+3],10,-1894986606),i=b(i,o,r,n,e[a+10],15,-1051523),n=b(n,i,o,r,e[a+1],21,-2054922799),r=b(r,n,i,o,e[a+8],6,1873313359),o=b(o,r,n,i,e[a+15],10,-30611744),i=b(i,o,r,n,e[a+6],15,-1560198380),n=b(n,i,o,r,e[a+13],21,1309151649),r=b(r,n,i,o,e[a+4],6,-145523070),o=b(o,r,n,i,e[a+11],10,-1120210379),i=b(i,o,r,n,e[a+2],15,718787259),n=b(n,i,o,r,e[a+9],21,-343485551),r=h(r,s),n=h(n,c),i=h(i,u),o=h(o,l)}return[r,n,i,o]}(function(e){if(0===e.length)return[];for(var t=8*e.length,r=new Uint32Array(f(t)),n=0;n<t;n+=8)r[n>>5]|=(255&e[n/8])<<n%32;return r}(e),8*e.length))}));var O=r(767);function E(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:case 3:return t^r^n;case 2:return t&r^t&n^r&n}}function P(e,t){return e<<t|e>>>32-t}const k=p("v5",80,(function(e){var t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var n=unescape(encodeURIComponent(e));e=[];for(var i=0;i<n.length;++i)e.push(n.charCodeAt(i))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var o=e.length/4+2,a=Math.ceil(o/16),s=new Array(a),c=0;c<a;++c){for(var u=new Uint32Array(16),l=0;l<16;++l)u[l]=e[64*c+4*l]<<24|e[64*c+4*l+1]<<16|e[64*c+4*l+2]<<8|e[64*c+4*l+3];s[c]=u}s[a-1][14]=8*(e.length-1)/Math.pow(2,32),s[a-1][14]=Math.floor(s[a-1][14]),s[a-1][15]=8*(e.length-1)&4294967295;for(var d=0;d<a;++d){for(var p=new Uint32Array(80),f=0;f<16;++f)p[f]=s[d][f];for(var h=16;h<80;++h)p[h]=P(p[h-3]^p[h-8]^p[h-14]^p[h-16],1);for(var m=r[0],v=r[1],g=r[2],y=r[3],b=r[4],w=0;w<80;++w){var O=Math.floor(w/20),k=P(m,5)+E(O,v,g,y)+b+t[O]+p[w]>>>0;b=y,y=g,g=P(v,30)>>>0,v=m,m=k}r[0]=r[0]+m>>>0,r[1]=r[1]+v>>>0,r[2]=r[2]+g>>>0,r[3]=r[3]+y>>>0,r[4]=r[4]+b>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]})),S="00000000-0000-0000-0000-000000000000",C=function(e){if(!(0,l.Z)(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},302:(e,t,r)=>{var n;r.d(t,{Z:()=>o});var i=new Uint8Array(16);function o(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(i)}},708:(e,t,r)=>{r.d(t,{Z:()=>a});for(var n=r(495),i=[],o=0;o<256;++o)i.push((o+256).toString(16).substr(1));const a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]).toLowerCase();if(!(0,n.Z)(r))throw TypeError("Stringified UUID is invalid");return r}},767:(e,t,r)=>{r.d(t,{Z:()=>o});var n=r(302),i=r(708);const o=function(e,t,r){var o=(e=e||{}).random||(e.rng||n.Z)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){r=r||0;for(var a=0;a<16;++a)t[r+a]=o[a];return t}return(0,i.Z)(o)}},495:(e,t,r)=>{r.d(t,{Z:()=>i});const n=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,i=function(e){return"string"==typeof e&&n.test(e)}}},o={};function a(e){var t=o[e];if(void 0!==t)return t.exports;var r=o[e]={id:e,loaded:!1,exports:{}};return i[e].call(r.exports,r,r.exports,a),r.loaded=!0,r.exports}a.m=i,a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(r,n){if(1&n&&(r=this(r)),8&n)return r;if("object"==typeof r&&r){if(4&n&&r.__esModule)return r;if(16&n&&"function"==typeof r.then)return r}var i=Object.create(null);a.r(i);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&n&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,a.d(i,o),i},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((t,r)=>(a.f[r](e,t),t)),[])),a.u=e=>({360:"d31ef6f2918eede5697b",374:"b47e7fe97ff8829d3592",376:"74d2269d24ec52e4971b",512:"544b6d39dadb4f09c7b3",513:"c323b43dcc4c859636d5"}[e]+".js"),a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r={},n="@marfeel/marfeel-sdk:",a.l=(e,t,i,o)=>{if(r[e])r[e].push(t);else{var s,c;if(void 0!==i)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var d=u[l];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==n+i){s=d;break}}s||(c=!0,(s=document.createElement("script")).type="module",s.charset="utf-8",s.timeout=120,a.nc&&s.setAttribute("nonce",a.nc),s.setAttribute("data-webpack",n+i),s.src=e),r[e]=[t];var p=(t,n)=>{s.onerror=s.onload=null,clearTimeout(f);var i=r[e];if(delete r[e],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((e=>e(n))),t)return t(n)},f=setTimeout(p.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=p.bind(null,s.onerror),s.onload=p.bind(null,s.onload),c&&document.head.appendChild(s)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p="https://sdk.mrf.io/statics/pr/1042/",(()=>{a.b=document.baseURI||self.location.href;var e={179:0};a.f.j=(t,r)=>{var n=a.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var i=new Promise(((r,i)=>n=e[t]=[r,i]));r.push(n[2]=i);var o=a.p+a.u(t),s=new Error;a.l(o,(r=>{if(a.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var i=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",s.name="ChunkLoadError",s.type=i,s.request=o,n[1](s)}}),"chunk-"+t,t)}};var t=(t,r)=>{var n,i,[o,s,c]=r,u=0;if(o.some((t=>0!==e[t]))){for(n in s)a.o(s,n)&&(a.m[n]=s[n]);c&&c(a)}for(t&&t(r);u<o.length;u++)i=o[u],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunk_marfeel_marfeel_sdk=self.webpackChunk_marfeel_marfeel_sdk||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),a.nc=void 0,(()=>{var e=function(){try{var e;if(-1!==location.hash.indexOf("mrfdebug")||null!==(e=window.localStorage)&&void 0!==e&&e.getItem("mrfdebug")){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];console.log("[piano js-callbacks]",...r)}}catch(e){}};function t(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function r(e){return function(){var r=this,n=arguments;return new Promise((function(i,o){var a=e.apply(r,n);function s(e){t(a,i,o,s,c,"next",e)}function c(e){t(a,i,o,s,c,"throw",e)}s(void 0)}))}}window.tp=window.tp||[],e("start",window.tp),Array.isArray(window.tp)?(e("piano handlers pushed"),window.tp.push(["addHandler","showOffer",function(t){e('"showOffer" handler called'),window.marfeel=window.marfeel||{},window.marfeel.cmd=window.marfeel.cmd||[],window.marfeel.cmd.push(["synchronizer",function(r){e("resolve piano-offer"),r.resolve("piano-offer",t)}])}]),window.tp.push(["addHandler","checkoutComplete",function(t){e('"checkoutComplete" handler called'),window.marfeel=window.marfeel||{},window.marfeel.cmd=window.marfeel.cmd||[],window.marfeel.cmd.push(["synchronizer",function(r){e("resolve piano-subscription"),r.resolve("piano-subscription",t)}])}])):e("piano handlers cant be pushed");function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===n(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const o=class{constructor(e){i(this,"dependency",void 0),i(this,"buffer",[]),this.dependency=e}get(e){this.dependency?e(this.dependency):this.buffer.push(e)}resolve(e){this.dependency=e,this.buffer.splice(0).forEach((t=>{try{t(e)}catch(e){console.error(e)}}))}},s=class{constructor(){i(this,"dependencies",{})}get(e,t){var r="string"==typeof e?[e]:e,n=new Array(e.length),i=e.length;i?r.forEach(((e,r)=>{this.dependencies[e]||(this.dependencies[e]=new o),this.dependencies[e].get((e=>{n[r]=e,0==--i&&t(...n)}))})):t(...n)}register(e,t){this.dependencies[e]?this.dependencies[e].resolve(t):this.dependencies[e]=new o(t)}};var c=[];function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d=function(e){return e.LOADING_EXPERIENCES="loadingExperiences",e.END_LOADING_EXPERIENCES="endLoadingExperiences",e.INIT_HANDLE_INLINE_EXPERIENCE="initHandleInlineExperience",e.END_HANDLE_INLINE_EXPERIENCE="endHandleInlineExperience",e.INIT_HANDLE_EXPERIMENTATION="initHandleExperimentation",e.END_HANDLE_EXPERIMENTATION="endHandleExperimentation",e.INIT_HANDLE_ACTION="initHandleAction",e.END_HANDLE_ACTION="endHandleAction",e}({}),p=-1!==location.hash.indexOf("mrfdebug")||-1!==location.hash.indexOf("mrfexp"),f=e=>{p&&performance.mark(e)},h=(e,t,r)=>{p&&(f(t),((e,t,r)=>{if(p){var n=performance.measure("".concat(e," to ").concat(t),e,t);!function(){try{if(p){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];console.debug("%c[marfeel-sdk-timing] %c","color:#ff9423","color: inherit",...t)}}catch(e){}}("Timing from ".concat(e," to ").concat(t),n.duration,r)}})(e,t,r))},m=window.location.href.includes("mrfExperiencesPreviewEnabled")?new class{constructor(){}registerSDK(){return r((function*(){}))()}addConfig(){return r((function*(){}))()}getSDKs(){}}:new class{constructor(e){var t=this;i(this,"dependenciesContainer",new s),i(this,"config",void 0),this.config=e.config;var r=e=>e.forEach((e=>this.getSDKs(...e)));r(e.cmd.splice(0)),e.cmd.push=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r(t),0},e.registerSDK=function(){return t.registerSDK(...arguments)},function(e){window.addEventListener("message",(t=>{if((!(a=t.origin)||"null"===a||a===window.location.origin||c.includes(a))&&(o=t.data)&&"__MRF_SDK__"===o.app){var{sdkName:r,methodName:n,args:i}=t.data;e.cmd.push([r,e=>{e[n].apply(e,i)}])}var o,a}))}(e)}registerSDK(e,t,n){var i=this;return r((function*(){i.dependenciesContainer.get(t,(function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];n(i.config,r).then((t=>{i.dependenciesContainer.register(e,new t(i.config,...r))})).catch((()=>{}))}))}))()}addConfig(e){var t=this;return r((function*(){t.config=l(l({},t.config),e)}))()}getSDKs(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.slice(0,t.length-1),i=t[t.length-1];this.dependenciesContainer.get(n,i)}}(window.marfeel),v=function(){return m.registerSDK(...arguments)};function g(e){return"analytics_storage"===e?"cookies":e}var y=function(e){return e.READY="ready",e.ANSWERED="answered",e}(y||{});class b{constructor(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];i(this,"onChangeCallbacks",void 0),i(this,"onReadyCallbacks",void 0),i(this,"consent",void 0),i(this,"features",void 0),i(this,"state",void 0),i(this,"isEnabled",void 0),this.consent=e,this.features={},this.onReadyCallbacks=[],this.onChangeCallbacks=[],this.isEnabled=!0,e&&(this.state=y.ANSWERED)}isInitiated(){return arguments.length>0&&void 0!==arguments[0]&&!arguments[0]?!this.isEnabled||this.state===y.READY||this.state===y.ANSWERED:!this.isEnabled||this.state===y.ANSWERED}setCMPLoaded(){this.state||(this.state=y.READY);var e=this.onReadyCallbacks.slice();this.onReadyCallbacks=[],e.forEach((e=>e()))}setCMPNotApplies(){this.isEnabled=!1,this.consent=!0,this.setCMPLoaded()}isActive(){return this.isEnabled}onReady(e){this.isInitiated(!1)?e():this.onReadyCallbacks.push(e)}onChange(e){var t;null===(t=this.onChangeCallbacks)||void 0===t||t.push(e)}callOnChange(){this.onChangeCallbacks.forEach((e=>e()))}getConsent(e){return e&&this.features&&void 0!==this.features[e]?this.features[e]:this.consent}setConsentFeatures(e){e.forEach((e=>{var{feature:t,consent:r}=e;this.features[g(t)]=r})),this.state||this.setCMPLoaded(),this.callOnChange(),this.state=y.ANSWERED}setConsent(e,t){this.features[g(e)]=t,this.callOnChange()}hasToPromptForConsent(e){e(!1)}hasConsentForVendor(e){return this.getConsent()}hasConsentForPurpose(e){return this.getConsent()}}var w=["tcloaded","useractioncomplete"],O={cookies:{vendors:[943],purposes:[1,7,8,9,10]},personalization:{vendors:[943],purposes:[1,5,6,7,8,9,10]}};class E{constructor(){i(this,"tcData",void 0),i(this,"isReady",!1),this.onReady((()=>{this.isReady=!0}).bind(this)),this.onChange((e=>{this.tcData=e}).bind(this))}isInitiated(){return arguments.length>0&&void 0!==arguments[0]&&!arguments[0]?this.isReady:!!this.tcData}isActive(){var e;return!(null==this||null===(e=this.tcData)||void 0===e||!e.gdprApplies)}hasToPromptForConsent(e){this.addEventListener((t=>{var r,n,{cmpStatus:i}=t;"loaded"===i&&(null===(r=(n=window).__tcfapi)||void 0===r||r.call(n,"ping",2,(t=>{var{displayStatus:r}=t;return e("disabled"!==r)})))}))}hasConsentForVendor(e){var t,r;return!0===(null===(t=this.tcData)||void 0===t||null===(r=t.vendor)||void 0===r?void 0:r.consents[e])}hasConsentForPurpose(e){var t,r;return!0===(null===(t=this.tcData)||void 0===t||null===(r=t.purpose)||void 0===r?void 0:r.consents[e])}matchRequirements(e){return!!e&&!!this.tcData&&e.vendors.every(this.hasConsentForVendor.bind(this))&&e.purposes.every(this.hasConsentForPurpose.bind(this))}onChange(e){this.addEventListener(((t,r)=>{!r||!w.includes(t.eventStatus)&&t.gdprApplies||e(t)}))}onReady(e){this.isInitiated(!1)?e():this.addEventListener((t=>{var r,n,{cmpStatus:i,listenerId:o}=t;"loaded"===i&&(e(),null===(r=(n=window).__tcfapi)||void 0===r||r.call(n,"removeEventListener",2,(()=>{}),o))}))}getConsent(e){return!(!this.tcData||this.tcData.gdprApplies)||this.matchRequirements(O[e])}addEventListener(e){var t,r;window.__tcfapi?null===(t=(r=window).__tcfapi)||void 0===t||t.call(r,"addEventListener",2,e):setTimeout((()=>this.addEventListener(e)),100)}}var P=a(767),k="flagConsentReady";function S(e,t,r,n){return C.apply(this,arguments)}function C(){return(C=r((function*(e,t,r,n){var i="".concat(k,"_").concat((0,P.Z)());return t.onReady((()=>{!function(e,t,r){if(e){var n=()=>!!t.getConsent("cookies")&&(r(),!0);n()||t.onChange(n)}else r()}(e.blockOnNoConsent,t,(()=>r.resolve(i)))})),!e.blockOnNoConsent&&void 0===e.manualConsent&&n&&setTimeout((()=>r.resolve(i)),n),r.wait(i)}))).apply(this,arguments)}class j{constructor(e){i(this,"handler",void 0),this.handler=function(e){return void 0!==e.gdpr&&!e.gdpr||!window.__tcfapi&&!window.gdprAppliesGlobally?new b(!e.manualConsent):new E}(e)}isInitiated(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.handler.isInitiated(e)}isActive(){return this.handler.isActive()}setCMPLoaded(){this.handler.setCMPLoaded()}setCMPNotApplies(){this.handler.setCMPNotApplies()}onChange(e){this.handler.onChange(e)}onReady(e){this.handler.onReady(e)}getConsent(e){return this.handler.getConsent(e)}setConsentFeatures(e,t){this.handler instanceof b||(this.handler=new b),this.handler.setConsentFeatures(e,t)}setConsent(e,t){this.handler instanceof b||(this.handler=new b),this.handler.setConsent(e,t)}hasToPromptForConsent(e){this.handler.hasToPromptForConsent(e)}hasConsentForVendor(e){return this.handler.hasConsentForVendor(e)}hasConsentForPurpose(e){return this.handler.hasConsentForPurpose(e)}}v("consent",[],(()=>Promise.resolve(j)));function A(){return A=r((function*(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=r.map((e=>e())),o=(yield Promise.all(i)).some((e=>e)),s=window.top===window.self;o&&s&&(e=>{a.e(374).then(a.bind(a,374)).then((t=>{var{default:r,saveActiveOverlay:n}=t;new r(e),n()}))})(e)})),A.apply(this,arguments)}function T(e){return r((function*(){return!!new URL(window.location.href).searchParams.get(e)}))}const I="undefined"!=typeof window&&/^((?!chrome|android).)*safari/i.test(window.navigator.userAgent)&&((e=window.navigator.userAgent)=>{const t=function(e,t){const r=(e||window.navigator.userAgent).match(/version\/(\d+(\.\d+)?)/i);return r&&r.length>1&&r[1]||""}(e),r=parseInt(t.split(".")[0],10);return!isNaN(r)&&r})()<13,_=(()=>{try{return"keepalive"in new Request("https://www.google.com/")}catch(e){return!1}})(),D="undefined"!=typeof window&&void 0!==window.navigator.sendBeacon,N="undefined"!=typeof window&&"fetch"in window;var R,x,L;function U(e,t,{contentType:r,sync:n=!1,onSuccessCallback:i,onErrorCallback:o}={}){switch(((e,t)=>I||!N&&!D||t?R.XHR:N&&(_||e)?R.FETCH:D&&!e?R.BEACON:R.XHR)(!!i||!!o,n)){case R.FETCH:return void((e,t,{contentType:r,keepalive:n=!1}={})=>{let i=t;return r&&(i=new Blob([t],{type:r})),fetch(e,{method:"POST",body:i,keepalive:n})})(e,t,{contentType:r,keepalive:!0}).then((e=>(e.ok||null==o||o(e.status),e.text()))).then((e=>null==i?void 0:i(e))).catch((()=>null==o?void 0:o(0)));case R.BEACON:return void((e,t,{contentType:r}={})=>{let n=t;r&&(n=new Blob([t],{type:r})),window.navigator.sendBeacon(e,n)})(e,t,{contentType:r});default:return function(e,t,{onSuccessCallback:r,onErrorCallback:n,contentType:i,sync:o=!1}={}){const a=!o,s=new XMLHttpRequest;return s.open("POST",e,a),i&&s.setRequestHeader("Content-Type",i),s.withCredentials=!0,o||(s.onreadystatechange=()=>{4===s.readyState&&(200===s.status?null==r||r(s.responseText):null==n||n(s.status))}),s.send(t),o?s.responseText:void 0}(e,t,{onSuccessCallback:i,contentType:r,onErrorCallback:o,sync:n})}}(L=R||(R={}))[L.XHR=0]="XHR",L[L.FETCH=1]="FETCH",L[L.BEACON=2]="BEACON",function(e){e[e.ORIGIN=0]="ORIGIN",e[e.FALLBACK=1]="FALLBACK"}(x||(x={}));const M=e=>null==e?void 0:e.replace(/\/$/,"");class V{constructor(e,{fallback:t,fallbackWindow:r=5e3,onModeChange:n=(()=>{})}={}){this.mode=x.ORIGIN,this.endpoint=M(e),this.fallback=M(t),this.fallbackWindow=r,this.onModeChange=n}switchMode(e,t){this.mode=e,window.setTimeout((()=>this.onModeChange(e,t)),0)}getUri(e){const t=e.startsWith("/")?e:`/${e}`;return`${this.mode===x.ORIGIN?this.endpoint:this.fallback}${t}`}post(e,t,r={}){const{onErrorCallback:n,onSuccessCallback:i,skipResponse:o=!1}=r,a=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}(r,["onErrorCallback","onSuccessCallback","skipResponse"]),s=this.mode,c=o?void 0:this.fallback&&(i=>{this.fallback&&s===x.ORIGIN?(this.switchMode(x.FALLBACK,i),this.post(e,t,r),window.setTimeout((()=>this.switchMode(x.ORIGIN)),this.fallbackWindow)):null==n||n(i)})||n,u=o?void 0:i;U(this.getUri(e),t,Object.assign(Object.assign({},a),{onSuccessCallback:u,onErrorCallback:c}))}}const F=e=>{void 0!==document.addEventListener&&void 0!==document.hidden&&document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState&&e()})),window.addEventListener("pagehide",(()=>{e()}),{capture:!0}),I&&addEventListener("beforeunload",e,!0)},q=e=>{void 0!==document.addEventListener&&void 0!==document.hidden&&document.addEventListener("visibilitychange",(()=>{"hidden"!==document.visibilityState&&e()})),window.addEventListener("pageshow",(()=>{e()}),{capture:!0})},z={childList:!0,subtree:!0};let B;const H=[],G=e=>{H.forEach((t=>{t(e)}))};function K(e){return new MutationObserver((t=>{t.forEach((t=>{"childList"===t.type&&e(t.target)}))}))}const W=(e,t=document.body)=>{const r=t===document.body;if(e){const i=((e,t)=>{let r;return function(...t){clearTimeout(r),r=setTimeout((()=>{e(...t)}),400)}})(e);"undefined"!=typeof MutationObserver&&(r?(n=()=>{i(document.body)},H.push(n),B||(B=K(G),B.observe(document.body,z))):K(i).observe(t,z))}var n};let X={};const J=e=>{const t=document.createElement("a");return t.href=e,t.origin},Z=e=>"fbia"===e?window.ia_document.shareURL:window.location.href,Q=e=>{const t=(e=>"fbia"===e?window.ia_document.referrer:document.referrer)(e);if(t)try{if(new URL(t).pathname.endsWith(".js"))return null}catch(e){}return t},$=RegExp("^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])");function Y(e,{cache:t=!0,readonly:r=!0}={}){try{if(!r)return new URL(e,document.baseURI);if(!X[e]){const{host:r,hostname:n,pathname:i,port:o,protocol:a,search:s,hash:c,href:u,origin:l}=new URL(e,document.baseURI),d={host:r,hostname:n,pathname:i,port:o,protocol:a,search:s,hash:c,href:u,origin:l};if(!t)return d;X[e]=d}return Object.assign({},X[e])}catch(e){return{}}}const ee="data-mrf-link";function te(e,t,r=!0){const n=e;(r||!n.mrfLink)&&(n.mrfLink=t),(r||!e.hasAttribute(ee))&&e.setAttribute(ee,t)}const re=e=>Y(e).href,ne=e=>{try{const t=new URL(e);return t.host.includes("mrf.io")&&t.searchParams.get("url")||e}catch(t){return e}};var ie,oe=new Uint8Array(16);function ae(){if(!ie&&!(ie="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ie(oe)}var se=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function ce(e){return"string"==typeof e&&se.test(e)}for(var ue=[],le=0;le<256;++le)ue.push((le+256).toString(16).substr(1));function de(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(ue[e[t+0]]+ue[e[t+1]]+ue[e[t+2]]+ue[e[t+3]]+"-"+ue[e[t+4]]+ue[e[t+5]]+"-"+ue[e[t+6]]+ue[e[t+7]]+"-"+ue[e[t+8]]+ue[e[t+9]]+"-"+ue[e[t+10]]+ue[e[t+11]]+ue[e[t+12]]+ue[e[t+13]]+ue[e[t+14]]+ue[e[t+15]]).toLowerCase();if(!ce(r))throw TypeError("Stringified UUID is invalid");return r}function pe(e,t,r){var n=(e=e||{}).random||(e.rng||ae)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var i=0;i<16;++i)t[r+i]=n[i];return t}return de(n)}function fe(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:case 3:return t^r^n;case 2:return t&r^t&n^r&n}}function he(e,t){return e<<t|e>>>32-t}var me=function(e,t,r){function n(e,t,r,n){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof t&&(t=function(e){if(!ce(e))throw TypeError("Invalid UUID");var t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r}(t)),16!==t.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var i=new Uint8Array(16+e.length);if(i.set(t),i.set(e,t.length),(i=function(e){var t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var n=unescape(encodeURIComponent(e));e=[];for(var i=0;i<n.length;++i)e.push(n.charCodeAt(i))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var o=e.length/4+2,a=Math.ceil(o/16),s=new Array(a),c=0;c<a;++c){for(var u=new Uint32Array(16),l=0;l<16;++l)u[l]=e[64*c+4*l]<<24|e[64*c+4*l+1]<<16|e[64*c+4*l+2]<<8|e[64*c+4*l+3];s[c]=u}s[a-1][14]=8*(e.length-1)/Math.pow(2,32),s[a-1][14]=Math.floor(s[a-1][14]),s[a-1][15]=8*(e.length-1)&4294967295;for(var d=0;d<a;++d){for(var p=new Uint32Array(80),f=0;f<16;++f)p[f]=s[d][f];for(var h=16;h<80;++h)p[h]=he(p[h-3]^p[h-8]^p[h-14]^p[h-16],1);for(var m=r[0],v=r[1],g=r[2],y=r[3],b=r[4],w=0;w<80;++w){var O=Math.floor(w/20),E=he(m,5)+fe(O,v,g,y)+b+t[O]+p[w]>>>0;b=y,y=g,g=he(v,30)>>>0,v=m,m=E}r[0]=r[0]+m>>>0,r[1]=r[1]+v>>>0,r[2]=r[2]+g>>>0,r[3]=r[3]+y>>>0,r[4]=r[4]+b>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]}(i))[6]=15&i[6]|80,i[8]=63&i[8]|128,r){n=n||0;for(var o=0;o<16;++o)r[n+o]=i[o];return r}return de(i)}try{n.name="v5"}catch(e){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}();const ve=e=>!!e&&ce(e),ge=()=>{try{return pe()}catch(e){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}},ye=e=>(()=>{const e=document.querySelector('meta[property="mrf:canonical"][content]'),t=null==e?void 0:e.getAttribute("content");return!!t&&re(t)||null})()||(()=>{const e=document.querySelector('link[rel="canonical"][href]'),t=null==e?void 0:e.getAttribute("href");return!!t&&re(t)||null})()||(e=>{if("fbia"===e){const e=document.createElement("a");return e.href=window.ia_document.shareURL,e.origin+e.pathname}return window.location.origin+window.location.pathname})(e),be={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"},we="scrollHeight",Oe=[{qs:".mrf-current .mrf-detailsBody",max:999},{qs:".mrf-current .mrf-sectionPart",max:999},{qs:".mrf-article-body",max:999},{qs:"article",max:1}];let Ee,Pe=0;const ke=(e,t=0,r=!0,n=!1)=>{let i;try{e&&(Ee=r||!Ee?Oe.reduce(((e,t)=>{if(e)return e;const r=document.querySelectorAll(t.qs);return r&&r.length<=t.max?(e=>{const t=[];return e.forEach((e=>(e=>{const t=e.getBoundingClientRect();if(!t.width&&!t.height)return!1;const r=window.innerHeight||document.documentElement.clientHeight,n=window.innerWidth||document.documentElement.clientWidth,i=t.top<=r&&t.top+t.height>=0,o=t.left<=n&&t.left+t.width>=0;return i&&o})(e)&&t.push(e))),t.length>0?t.sort(((e,t)=>t.offsetTop-e.offsetTop))[0]:null})(Array.from(r)):null}),null):Ee,Pe=0);const n=(e=>{const t=(()=>{const e=document.body;return document.documentElement.scrollTop||!!e&&e.scrollTop||0})();return e?t-e.offsetTop:t})(Ee),o=(e=>{const t=document.body;return e?e.offsetHeight:document.documentElement[we]||!!t&&t[we]||0})(Ee),a=document.documentElement.clientHeight;i=t?(n+t)/o*100:n/(o-a)*100,i>Pe?Pe=i:i=Pe}catch(e){i=50}return n?i:isNaN(i)?50:i>100?100:i<0?0:i},Se={},Ce=(()=>{try{const e="__test_session_storage__";return window.sessionStorage.setItem(e,e),window.sessionStorage.removeItem(e),!0}catch(e){return!1}})(),je=(e,t)=>{try{Ce?window.sessionStorage.setItem(e,t):Se[e]=t}catch(e){}},Ae=e=>{try{return Ce?window.sessionStorage.getItem(e):Se[e]}catch(e){return null}},Te=(e,t)=>{const r=JSON.stringify(t);je(e,r)};let Ie,_e=!0;const De={getConsent:()=>_e,isInitiated:()=>!0,setConsent:(e,t)=>{var r;_e=!0===(r=t)||"true"===r,je("__nrCookieConsent",_e),Ie&&Ie()},onChange:e=>{Ie=e}};function Ne(e){return e||!1===e}function Re(e){var t;return e.isInitiated()?null!=e&&null!==(t=e.isActive)&&void 0!==t&&t.call(e)?e.getConsent("cookies")?1:0:3:2}class xe{static wait(){return Promise.resolve(!0)}static resolve(){}}class Le{static emitRecirculation(){}}function Ue(e,t){return(void 0!==e[t]||null===e[t])&&e[t]}function Me(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return Math.floor(e.getTime()/1e3)}const Ve=e=>{const t=document.cookie.indexOf(e+"="),r=t+e.length+1;if(!t&&e!==document.cookie.substring(0,e.length))return null;if(-1===t)return null;let n=document.cookie.indexOf(";",r);return-1===n&&(n=document.cookie.length),unescape(document.cookie.substring(r,n))},Fe=(e,t,r,n,i)=>{const o=i?[i,".".concat(i)]:[""],a=new Date;a.setTime(a.getTime());const s="https:"===window.location.protocol;o.forEach((i=>{document.cookie=e+"="+escape(t)+(r?";expires="+r:"")+(n?";path="+n:"")+(i?";domain="+i:"")+(s?";secure":"")}))},qe={score:"-1"},ze="".concat("https://compassdynamicpaywall.mrf.io","/score/"),Be="".concat("https://compassdynamicpaywall.mrf.io","/predict/"),He=e=>{let{accountId:t,userId:r,siteUserId:n,totalPageviews:i,sessionDuration:o}=e;const a=new URLSearchParams(window.location.search),s=a.get("utm_medium"),c=a.get("utm_source"),u=["ac=".concat(t),"url=".concat(encodeURIComponent(window.location.href)),"u=".concat(r),"pp=".concat(document.referrer)];return n&&u.push("sui=".concat(n)),s&&u.push("utm_medium=".concat(s)),c&&u.push("utm_source=".concat(c)),i&&u.push("tp=".concat(i)),o&&u.push("sd=".concat(o)),u.join("&")};let Ge;const Ke="https://events.newsroom.bi/data/rfv.php",We={rfv:"-1"},Xe=(e,t)=>{const r={rfv:e,ts:new Date};return je("".concat("compass_rfv","_").concat(t),JSON.stringify(r)),e},Je=function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new FormData;return i.append("u",t),i.append("ac",e),i.append("sui",r||""),i.append("nu","".concat(+n)),i},Ze=e=>{const{ts:t,rfv:r}=(e=>{const t=Ae("".concat("compass_rfv","_").concat(e));let r={ts:null,rfv:null};if(t)try{r=JSON.parse(t)}catch(e){}return r})(e);return(e=>{if(!e)return!0;const t=new Date(e);return t.setMinutes(t.getMinutes()+30),t<new Date})(t)?null:r},Qe={},$e=(()=>{try{const e="__test_local_storage__";return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch(e){return!1}})(),Ye=(e,t)=>{try{$e?window.localStorage.setItem(e,t):Qe[e]=t}catch(e){}},et=["data-mrf-recirculation","data-dtm-region","dtm-region"],tt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=e?" ".concat(e):e;return et.map((e=>"[".concat(e,"]").concat(t))).join(",")};function rt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const it=e=>e&&e.split("?")[0].split("#")[0],ot=()=>[...document.body.querySelectorAll(tt())].filter((e=>e.shadowRoot)),at=e=>null!==e.getAttribute("data-mrf-layout")&&null===e.getAttribute("data-mrf-layout-anchor")?e.querySelector("[".concat("data-mrf-layout-anchor","]")):e,st=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const r=at(e);if(!r)return null;if(r!==e)return st(r,t);const n=function(e,t){let r=null;if(r=t?e.getAttribute(t):"mrfLink"in e&&e.mrfLink||e.getAttribute(ee)||e.getAttribute("href")||e.getAttribute("data-mrf-uri"),null===r)return null;const n=Y(r||"");return"null"===n.origin?null:n.href}(e,t);return n?(e=>!!e&&Y(e).host===window.location.host)(n)?n&&it(n):n:null};function ct(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}const ut=()=>(e=>{const t=(e=>{try{return $e?window.localStorage.getItem(e):Qe[e]}catch(e){return null}})("___m_rec");if(t)try{return JSON.parse(t)}catch(e){}return null})(),lt=(e,t)=>{if($e){const r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ct(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ct(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},ut()||{});r[t]=e,Ye("___m_rec",JSON.stringify(r))}},dt=e=>e.hasAttribute("cmp-ltrk"),pt=e=>e.hasAttribute("data-mrf-recirculation-skip"),ft=e=>e.getAttribute("cmp-ltrk-idx"),ht=(e,t,r)=>{e.setAttribute("cmp-ltrk",t),e.setAttribute("cmp-ltrk-idx","".concat(r))},mt=e=>"[".concat("cmp-ltrk",'="').concat(e,'"]'),vt=(e,t,r)=>{const n=e.map((e=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";const r=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];const i=[...r],o=i.pop();if(i.some((e=>!Boolean(e))))return;const a="missing"===t?":not([".concat(o,"])"):"",s=i.join(" ");return tt("".concat(s).concat(a))};return{element:r(e.element,"data-mrf-layout"),anchor:e.anchor?r(e.element,e.anchor,"data-mrf-layout-anchor"):r(e.element,"data-mrf-layout-anchor"),img:r(e.element,e.img,"data-mrf-layout-img"),title:r(e.element,e.title,"data-mrf-layout-title")}}(e,"missing")[t])).filter(Boolean).join(",");n&&Array.from(document.querySelectorAll(n)).forEach((e=>e.setAttribute(r,"")))},gt=e=>{e.length&&(vt(e,"element","data-mrf-layout"),vt(e,"anchor","data-mrf-layout-anchor"),vt(e,"img","data-mrf-layout-img"),vt(e,"title","data-mrf-layout-title"))},yt=e=>{const t={};return e.reduce(((e,r)=>{const{el:n}=r,i=(e=>{try{const t=ft(e);if(t)return parseInt(t,10)}catch(e){}})(n);return void 0!==i&&t[i]||(e.push(r),t[i]=!0),e}),[])},bt=(e,t)=>{let{el:r}=e;const n={url:st(r,t)},i=ft(r);return i&&(n.p=i),r.getAttribute("data-mrf-experiment")&&(n.tv=r.getAttribute("data-mrf-experiment")),n},wt=(e,t)=>e.map(((e,r)=>{const n=bt(e,t);return parseInt(n.p,10)===r&&delete n.p,n.tv||n.p?n:n.url}));let Ot;const Et={};class Pt{constructor(){this.timer=null}callOnTimer(e,t){this.timer=setTimeout((()=>{e()}),t)}cleanAndCallTimer(e,t){this.cleanTimer(),this.timer=setTimeout((()=>{e()}),t)}cleanTimer(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)}}class kt{constructor(){this.store={}}push(e,t){this.store[e]?this.store[e].push(t):this.store[e]=[t]}clear(e){delete this.store[e]}contains(e,t){var r;return null===(r=this.store[e])||void 0===r?void 0:r.includes(t)}forEach(e){return Object.entries(this.store).forEach(e)}}const St=new Pt,Ct=new kt,jt=new kt,At=e=>{const t=[];Ct.forEach((e=>{let[r,n]=e;t.push({module:r,links:n}),Ct.clear(r)})),Object.keys(t).length>0&&e("impression",t)},Tt=(e,t)=>{e.forEach((e=>{let{links:r,urlAttr:n,name:i}=e;i&&r.forEach((e=>{const r=bt(e,n);!function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n="IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype&&"isIntersecting"in window.IntersectionObserverEntry.prototype?Promise.resolve():a.e(360).then(a.t.bind(a,360,23));e.setAttribute("mrfObservableId",ge()),Et[e.getAttribute("mrfObservableId")]=t,n.then((()=>{Ot=Ot||new IntersectionObserver((e=>{e.filter((e=>e.isIntersecting)).forEach((e=>{let{target:t}=e;const n=t.getAttribute("mrfObservableId");var i;n?(null===(i=Et[n])||void 0===i||i.call(Et,t),r||(Ot.unobserve(t),delete Et[n])):Ot.unobserve(t)}))})),Ot.observe(e)}))}(e.el,(()=>{((e,t)=>{jt.contains(e,t.p)||(Ct.push(e,t),jt.push(e,t.p))})(i,r),St.cleanAndCallTimer((()=>At(t)),1e3)}))}))})),At(t)};function It(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _t(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?It(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):It(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Dt=(e,t)=>{const r=e.map((e=>{let{name:t,links:r,urlAttr:n}=e;return{module:t,links:wt(r,n)}}));r.length&&t("elegible",r)},Nt=(e,t)=>{e.forEach((e=>{let{name:r,links:n,urlAttr:i}=e;n.forEach((e=>{e.el.addEventListener("click",(n=>{const o=e.el,a=st(o,i);var s,c;s=e.el,!n.__mrfTracked&&!0!==(null===(c=at(s))||void 0===c?void 0:c.__mrfTracked)&&a&&(((e,t)=>{const r=at(e);t.__mrfTracked=!0,r&&(r.__mrfTracked=!0)})(e.el,n),lt(r||"",a),t("click",[{module:r,links:wt([e],i)}]))}))}))}))},Rt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>!0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body,r=arguments.length>2?arguments[2]:void 0;const n=r?"a":et.map((e=>"[".concat(e,"] a[href], a[href][").concat(e,"], [").concat(e,"] article[data-mrf-uri], [").concat(e,"] [").concat("data-mrf-layout","]"))).join(","),i=Array.from(t.querySelectorAll(n)).reduce(((t,n)=>{const i=(e=>e&&e.closest(tt()))(n)||r,o=(e=>{var t;return null===(t=et.reduce(((t,r)=>t||(null==e?void 0:e.getAttribute(r))),void 0))||void 0===t?void 0:t.replace(/"/g,'\\"')})(i),a=(null==i?void 0:i.getAttribute("data-mrf-recirculation-url-attribute"))||"",s=n,c=st(s,a);if(c&&te(s,c,!1),!o||!c||!e(o,s))return t;const u=t[o]||{links:[]};return _t(_t({},t),{},{[o]:_t(_t({},u),{},{links:[...u.links,{el:s,root:i}],urlAttr:a})})}),{});return(e=>{const t=ot();Object.entries(e).forEach((e=>{let[r,{links:n,urlAttr:i}]=e;const o=(e=>Number(e.map((e=>e.getAttribute("cmp-ltrk-idx"))).filter(Boolean).map(parseInt).reduce(((e,t)=>isNaN(e)||e<t?t:e),NaN)))(((e,t)=>{const r=t.filter((t=>{return r=e,n=t,et.some((e=>{var t;return(null===(t=n.getAttribute(e))||void 0===t?void 0:t.toLowerCase())===r.toLowerCase()}));var r,n})).reduce(((t,r)=>{var n;return[...t,...(null===(n=r.shadowRoot)||void 0===n?void 0:n.querySelectorAll(mt(e)))||[]]}),[]);return[...document.querySelectorAll(mt(e)),...r]})(r,t));let a=isNaN(o)?0:o+1;n.forEach((e=>{const{el:t,root:o}=e,s=st(t,i);if(pt(t)||dt(t)||!s)return;ht(t,r,a);const c=n.filter((e=>{let{el:r,root:n}=e;return r!==t&&n===o&&!pt(r)&&!dt(r)&&st(r,i)===s}));c.length&&(c.forEach((e=>{let{el:t}=e;return ht(t,r,a)})),(e=>{["data-mrf-experiment"].forEach((t=>{const r=e.find((e=>{let{el:t}=e;return t.hasAttribute("data-mrf-experiment")}));if(r){const n=r.el.getAttribute("data-mrf-experiment");e.forEach((e=>{let{el:r}=e;r.getAttribute("data-mrf-experiment")!==n&&r.setAttribute(t,n||"")}))}}))})([...c,e])),a++}))}))})(i),Object.entries(i).map((e=>{let[t,r]=e;return{name:t,links:r.links,urlAttr:r.urlAttr}}))},xt=e=>e.map((e=>{let{links:t,name:r,urlAttr:n}=e;return{name:r,urlAttr:n,links:yt(t)}}));function Lt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{parentNode:n,layouts:i=[]}=r;gt(i);const o=Rt(((e,t)=>!dt(t)&&!pt(t)),t,n),a=xt(o);return Dt(a,e),Tt(o,e),Nt(o,e),o.length}function Ut(e,t,r,n){Lt(e,t,r)&&n(),W((t=>{Lt(e,t,r)&&n()}),t)}const Mt=async()=>{document&&"loading"===document.readyState&&await new Promise((e=>{document.addEventListener("DOMContentLoaded",e)}))},Vt=(e,t)=>{e&&t&&lt("fc:".concat(e),t)},Ft=e=>{let{modules:t,blacklist:r,redirectionLinks:n}=e,i=!1;return r.forEach((e=>{let{selector:t}=e;const r=document.querySelectorAll(t);Array.from(r).forEach((e=>{e instanceof HTMLElement&&!e.hasAttribute("data-mrf-recirculation-skip")&&e.setAttribute("data-mrf-recirculation-skip","")}))})),null==n||n.forEach((e=>{let{selector:t,queryParam:r}=e;const n=document.querySelectorAll(t);Array.from(n).forEach((e=>{if(!e.hasAttribute("data-mrf-recirculation-skip"))try{const n=(t=new URL(decodeURIComponent(decodeURIComponent(e.href))).search).length?t.slice(1).split("&").map((e=>e.split("="))).reduce(((e,t)=>{let[r,n]=t;return nt(nt({},e),{},{[r]:n})}),{}):{};n[r]&&te(e,decodeURIComponent(n[r]))}catch(e){}var t}))})),t.forEach((e=>{const t="selector"in e?e.selector:"[".concat(e.attr,"]"),r="name"in e?()=>e.name:t=>t.getAttribute(e.attr),n=document.querySelectorAll(t),o=e.urlAttribute;Array.from(n).forEach((e=>{(e=>(e=>(null===window||void 0===window?void 0:window.HTMLElementOrig)?e instanceof window.HTMLElementOrig:e instanceof HTMLElement)(e)&&!e.hasAttribute("data-mrf-recirculation-skip")&&!e.hasAttribute("data-mrf-recirculation")&&!e.closest("[data-mrf-experience]"))(e)&&(e.setAttribute("data-mrf-recirculation",r(e)),o&&e.setAttribute("data-mrf-recirculation-url-attribute",o),i=!0)}))})),i};var qt,zt,Bt,Ht,Gt,Kt=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},Wt=function(e){if("loading"===document.readyState)return"loading";var t=Kt();if(t){if(e<t.domInteractive)return"loading";if(0===t.domContentLoadedEventStart||e<t.domContentLoadedEventStart)return"dom-interactive";if(0===t.domComplete||e<t.domComplete)return"dom-content-loaded"}return"complete"},Xt=function(e){var t=e.nodeName;return 1===e.nodeType?t.toLowerCase():t.toUpperCase().replace(/^#/,"")},Jt=function(e,t){var r="";try{for(;e&&9!==e.nodeType;){var n=e,i=n.id?"#"+n.id:Xt(n)+(n.className&&n.className.trim().length?"."+n.className.trim().replace(/\s+/g,"."):"");if(r.length+i.length>(t||100)-1)return r||i;if(r=r?i+">"+r:i,n.id)break;e=n.parentNode}}catch(e){}return r},Zt=-1,Qt=function(){return Zt},$t=function(e){addEventListener("pageshow",(function(t){t.persisted&&(Zt=t.timeStamp,e(t))}),!0)},Yt=function(){var e=Kt();return e&&e.activationStart||0},er=function(e,t){var r=Kt(),n="navigate";return Qt()>=0?n="back-forward-cache":r&&(document.prerendering||Yt()>0?n="prerender":document.wasDiscarded?n="restore":r.type&&(n=r.type.replace(/_/g,"-"))),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:n}},tr=function(e,t,r){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var n=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return n.observe(Object.assign({type:e,buffered:!0},r||{})),n}}catch(e){}},rr=function(e,t,r,n){var i,o;return function(a){t.value>=0&&(a||n)&&((o=t.value-(i||0))||void 0===i)&&(i=t.value,t.delta=o,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,r),e(t))}},nr=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},ir=function(e){var t=function(t){"pagehide"!==t.type&&"hidden"!==document.visibilityState||e(t)};addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0)},or=function(e){var t=!1;return function(r){t||(e(r),t=!0)}},ar=-1,sr=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},cr=function(e){"hidden"===document.visibilityState&&ar>-1&&(ar="visibilitychange"===e.type?e.timeStamp:0,lr())},ur=function(){addEventListener("visibilitychange",cr,!0),addEventListener("prerenderingchange",cr,!0)},lr=function(){removeEventListener("visibilitychange",cr,!0),removeEventListener("prerenderingchange",cr,!0)},dr=function(){return ar<0&&(ar=sr(),ur(),$t((function(){setTimeout((function(){ar=sr(),ur()}),0)}))),{get firstHiddenTime(){return ar}}},pr=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},fr=[1800,3e3],hr=function(e,t){t=t||{},pr((function(){var r,n=dr(),i=er("FCP"),o=tr("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(o.disconnect(),e.startTime<n.firstHiddenTime&&(i.value=Math.max(e.startTime-Yt(),0),i.entries.push(e),r(!0)))}))}));o&&(r=rr(e,i,fr,t.reportAllChanges),$t((function(n){i=er("FCP"),r=rr(e,i,fr,t.reportAllChanges),nr((function(){i.value=performance.now()-n.timeStamp,r(!0)}))})))}))},mr=[.1,.25],vr={passive:!0,capture:!0},gr=new Date,yr=function(e,t){qt||(qt=t,zt=e,Bt=new Date,Or(removeEventListener),br())},br=function(){if(zt>=0&&zt<Bt-gr){var e={entryType:"first-input",name:qt.type,target:qt.target,cancelable:qt.cancelable,startTime:qt.timeStamp,processingStart:qt.timeStamp+zt};Ht.forEach((function(t){t(e)})),Ht=[]}},wr=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var r=function(){yr(e,t),i()},n=function(){i()},i=function(){removeEventListener("pointerup",r,vr),removeEventListener("pointercancel",n,vr)};addEventListener("pointerup",r,vr),addEventListener("pointercancel",n,vr)}(t,e):yr(t,e)}},Or=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,wr,vr)}))},Er=[100,300],Pr=0,kr=1/0,Sr=0,Cr=function(e){e.forEach((function(e){e.interactionId&&(kr=Math.min(kr,e.interactionId),Sr=Math.max(Sr,e.interactionId),Pr=Sr?(Sr-kr)/7+1:0)}))},jr=function(){return Gt?Pr:performance.interactionCount||0},Ar=[200,500],Tr=0,Ir=function(){return jr()-Tr},_r=[],Dr={},Nr=function(e){var t=_r[_r.length-1],r=Dr[e.interactionId];if(r||_r.length<10||e.duration>t.latency){if(r)r.entries.push(e),r.latency=Math.max(r.latency,e.duration);else{var n={id:e.interactionId,latency:e.duration,entries:[e]};Dr[n.id]=n,_r.push(n)}_r.sort((function(e,t){return t.latency-e.latency})),_r.splice(10).forEach((function(e){delete Dr[e.id]}))}},Rr=[2500,4e3],xr={};class Lr{constructor(){this.cls=0,this.lcp=0,this.fid=0,this.fcp=0,this.wv=0,this.tbt=0,this.inp=0,this.lcpOffender=null,this.clsOffender=null,this.inpOffender=null,this.setTbt(),this.setINP(),this.setLCP(),this.setFCP(),this.setFID(),this.setCLS()}hasWebVitals(){return this.lcp||this.fcp||this.cls||this.fid||this.inp?1:0}setLCP(){!function(e,t){!function(e,t){t=t||{},pr((function(){var r,n=dr(),i=er("LCP"),o=function(e){var t=e[e.length-1];t&&t.startTime<n.firstHiddenTime&&(i.value=Math.max(t.startTime-Yt(),0),i.entries=[t],r())},a=tr("largest-contentful-paint",o);if(a){r=rr(e,i,Rr,t.reportAllChanges);var s=or((function(){xr[i.id]||(o(a.takeRecords()),a.disconnect(),xr[i.id]=!0,r(!0))}));["keydown","click"].forEach((function(e){addEventListener(e,s,!0)})),ir(s),$t((function(n){i=er("LCP"),r=rr(e,i,Rr,t.reportAllChanges),nr((function(){i.value=performance.now()-n.timeStamp,xr[i.id]=!0,r(!0)}))}))}}))}((function(t){!function(e){if(e.entries.length){var t=Kt();if(t){var r=t.activationStart||0,n=e.entries[e.entries.length-1],i=n.url&&performance.getEntriesByType("resource").filter((function(e){return e.name===n.url}))[0],o=Math.max(0,t.responseStart-r),a=Math.max(o,i?(i.requestStart||i.startTime)-r:0),s=Math.max(a,i?i.responseEnd-r:0),c=Math.max(s,n?n.startTime-r:0),u={element:Jt(n.element),timeToFirstByte:o,resourceLoadDelay:a-o,resourceLoadTime:s-a,elementRenderDelay:c-s,navigationEntry:t,lcpEntry:n};return n.url&&(u.url=n.url),i&&(u.lcpResourceEntry=i),void(e.attribution=u)}}e.attribution={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadTime:0,elementRenderDelay:e.value}}(t),e(t)}),void 0)}((e=>{var t;this.lcp=e.value,this.lcp>2500&&null!==(t=e.attribution)&&void 0!==t&&t.element&&(this.lcpOffender=e.attribution.element)}))}setFCP(){!function(e,t){hr((function(t){!function(e){if(e.entries.length){var t=Kt(),r=e.entries[e.entries.length-1];if(t){var n=t.activationStart||0,i=Math.max(0,t.responseStart-n);return void(e.attribution={timeToFirstByte:i,firstByteToFCP:e.value-i,loadState:Wt(e.entries[0].startTime),navigationEntry:t,fcpEntry:r})}}e.attribution={timeToFirstByte:0,firstByteToFCP:e.value,loadState:Wt(Qt())}}(t),e(t)}),void 0)}((e=>this.fcp=e.value))}setFID(){!function(e,t){!function(e,t){t=t||{},pr((function(){var r,n=dr(),i=er("FID"),o=function(e){e.startTime<n.firstHiddenTime&&(i.value=e.processingStart-e.startTime,i.entries.push(e),r(!0))},a=function(e){e.forEach(o)},s=tr("first-input",a);r=rr(e,i,Er,t.reportAllChanges),s&&ir(or((function(){a(s.takeRecords()),s.disconnect()}))),s&&$t((function(){var n;i=er("FID"),r=rr(e,i,Er,t.reportAllChanges),Ht=[],zt=-1,qt=null,Or(addEventListener),n=o,Ht.push(n),br()}))}))}((function(t){!function(e){var t=e.entries[0];e.attribution={eventTarget:Jt(t.target),eventType:t.name,eventTime:t.startTime,eventEntry:t,loadState:Wt(t.startTime)}}(t),e(t)}),void 0)}((e=>this.fid=e.value))}setINP(){!function(e,t){!function(e,t){t=t||{},pr((function(){"interactionCount"in performance||Gt||(Gt=tr("event",Cr,{type:"event",buffered:!0,durationThreshold:0}));var r,n=er("INP"),i=function(e){e.forEach((function(e){e.interactionId&&Nr(e),"first-input"===e.entryType&&!_r.some((function(t){return t.entries.some((function(t){return e.duration===t.duration&&e.startTime===t.startTime}))}))&&Nr(e)}));var t,i=(t=Math.min(_r.length-1,Math.floor(Ir()/50)),_r[t]);i&&i.latency!==n.value&&(n.value=i.latency,n.entries=i.entries,r())},o=tr("event",i,{durationThreshold:t.durationThreshold||40});r=rr(e,n,Ar,t.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),ir((function(){i(o.takeRecords()),n.value<0&&Ir()>0&&(n.value=0,n.entries=[]),r(!0)})),$t((function(){_r=[],Tr=jr(),n=er("INP"),r=rr(e,n,Ar,t.reportAllChanges)})))}))}((function(t){!function(e){if(e.entries.length){var t=e.entries.sort((function(e,t){return t.duration-e.duration||t.processingEnd-t.processingStart-(e.processingEnd-e.processingStart)}))[0];e.attribution={eventTarget:Jt(t.target),eventType:t.name,eventTime:t.startTime,eventEntry:t,loadState:Wt(t.startTime)}}else e.attribution={}}(t),e(t)}),void 0)}((e=>{var t,r;this.inp=e.value,this.inp>200&&null!==(t=e.attribution)&&void 0!==t&&t.eventTarget&&(this.inpOffender="".concat(null===(r=e.attribution)||void 0===r?void 0:r.eventType,"::").concat(e.attribution.eventTarget),this.inpOffenderStatus=e.attribution.loadState)}))}setTbt(){return!!((e,t)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver((e=>{e.getEntries().map((e=>t(e)))}));return r.observe({type:e,buffered:!0}),r}}catch(e){}})("longtask",(e=>{this.tbt+=e.duration-50}))}setCLS(){!function(e,t){!function(e,t){t=t||{},hr(or((function(){var r,n=er("CLS",0),i=0,o=[],a=function(e){e.forEach((function(e){if(!e.hadRecentInput){var t=o[0],r=o[o.length-1];i&&e.startTime-r.startTime<1e3&&e.startTime-t.startTime<5e3?(i+=e.value,o.push(e)):(i=e.value,o=[e])}})),i>n.value&&(n.value=i,n.entries=o,r())},s=tr("layout-shift",a);s&&(r=rr(e,n,mr,t.reportAllChanges),ir((function(){a(s.takeRecords()),r(!0)})),$t((function(){i=0,n=er("CLS",0),r=rr(e,n,mr,t.reportAllChanges),nr((function(){return r()}))})),setTimeout(r,0))})))}((function(t){!function(e){if(e.entries.length){var t=e.entries.reduce((function(e,t){return e&&e.value>t.value?e:t}));if(t&&t.sources&&t.sources.length){var r=(n=t.sources).find((function(e){return e.node&&1===e.node.nodeType}))||n[0];if(r)return void(e.attribution={largestShiftTarget:Jt(r.node),largestShiftTime:t.startTime,largestShiftValue:t.value,largestShiftSource:r,largestShiftEntry:t,loadState:Wt(t.startTime)})}}var n;e.attribution={}}(t),e(t)}),void 0)}((e=>{var t;this.cls=e.value,this.cls>.1&&null!==(t=e.attribution)&&void 0!==t&&t.largestShiftTarget&&(this.clsOffender=e.attribution.largestShiftTarget,this.clsOffenderStatus=e.attribution.loadState)}))}}const Ur=new Pt;let Mr={150:6e4};const Vr=()=>{Ur.cleanTimer()},Fr=(e,t)=>{Ur.callOnTimer(t,e)},{userIdPromise:qr,resolveFinalUserId:zr}=(()=>{let e=()=>{};return{userIdPromise:new Promise((t=>{e=t})),resolveFinalUserId:e}})();class Br{constructor(e){this.compassTracker=e}getUserId(){return{userIdPromise:qr,actualUserId:this.compassTracker.permanentCookie.userId}}processIngestResponse(e){e&&(ve(e.uid)&&(this.compassTracker.permanentCookie.userId=e.uid,this.compassTracker.markAsModified("permanent")),ve(e.sid)&&(this.compassTracker.temporalCookie.sessionId=e.sid,this.compassTracker.markAsModified("temporal")),this.compassTracker.saveCookies()),ve(this.compassTracker.permanentCookie.userId)&&zr(this.compassTracker.permanentCookie.userId)}}const Hr={web:0,fbia:2,iosapp:3,androidapp:4,flowcards:5,pressreader:6,app:7,applenews:8,pressreaderandroid:11,pressreaderios:12},Gr=e=>{if(isNaN(e)){const t=e.toLowerCase().replace(/ /g,"");return void 0!==Hr[t]?Hr[t]:null}return e};function Kr(e,t,r){if(null==r||""===r){let r=0;for(;r<e.length;)e[r][0]===t?e.splice(r,1):r++}else{const n=[t,r];let i=!1;for(let r=0;r<e.length;r++)e[r][0]===t&&(e[r]=n,i=!0);i||e.push(n)}}let Wr=[];const Xr=(e,t)=>{Kr(Wr,e,t)};let Jr=null;const Zr=()=>Jr=null,Qr=e=>{const t=e.parentElement;t&&(t.addEventListener("mouseenter",(()=>(e=>{Jr=e})(e))),t.addEventListener("mouseleave",Zr))},$r=(e,t,r)=>{const n=Array.from(e).filter((e=>!e.hasAttribute("cmp-cnvtrk")));for(const e of n)e.addEventListener(t,(()=>{const t=e.dataset.mrfConversion;t&&r(t)})),e.setAttribute("cmp-cnvtrk","true")},Yr=e=>{const t=document.querySelectorAll("iframe[data-mrf-conversion]"),r=document.querySelectorAll("form[data-mrf-conversion]"),n=document.querySelectorAll("button[data-mrf-conversion], a[data-mrf-conversion]");$r(r,"submit",e),$r(n,"click",e),(e=>{const t=Array.from(e).filter((e=>!e.hasAttribute("cmp-cnvtrk")));for(const e of t)Qr(e),e.setAttribute("cmp-cnvtrk","true")})(t)},en=e=>{W((()=>{Yr(e)})),Yr(e)};var tn;function rn(e){return e.update=Date.now(),function(e,t){try{return window.localStorage.setItem("marfeel-sdk-store",t),!0}catch(e){return!1}}(0,btoa(JSON.stringify(e)))}function nn(){return void 0===tn&&(tn=function(){var e=function(e){try{return window.localStorage.getItem("marfeel-sdk-store")}catch(e){return null}}();if(e)return JSON.parse(atob(e));var t={creation:Date.now(),update:Date.now(),entries:{}};return rn(t),t}()),tn}const on="compass-conversions-counter-entry",an=e=>{let t=(null!=e?e:"").toString();return!t.startsWith("/")&&t.includes("/")&&(t="/".concat(t)),t.split("/").map((e=>e.split(",").shift())).join("/")};class sn{constructor(){this.newAds=[],this.newAdUnitPaths=[],this.visibilityChangedSlots=[]}setInterstitialSlot(e){this.interstitialSlot=e}trackAdEvent(e,t){const r=this.mustBeTracked(e,t);if(r){const r=t.getAdUnitPath(),n=t.getResponseInformation()&&t.getResponseInformation().lineItemId;this.trackAdRenderedInternal(n||r,r),"slotVisibilityChanged"===e&&this.visibilityChangedSlots.push(t)}return r}trackAdEventLegacy(e,t,r){return"slotRenderEnded"===e&&(this.trackAdRenderedInternal(t||r,r),!0)}trackAdRenderedInternal(e,t){this.newAds.push(an(e)),t&&this.newAdUnitPaths.push(an(t))}getAds(){return this.newAds.splice(0)}getAdUnits(){return this.newAdUnitPaths.splice(0)}mustBeTracked(e,t){let r=!1;return"slotRenderEnded"===e&&(r=t!==this.interstitialSlot),"slotVisibilityChanged"===e&&(r=t===this.interstitialSlot&&!this.visibilityChangedSlots.includes(t)),r}}function cn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function un(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?cn(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const ln=(e,t)=>{((e,t)=>{const r={requests:{ads:e},triggers:{renderEnd:{on:"ad-render-end",request:"ads",selector:"body",extraUrlParams:un(un({},t),{},{l:"${totalEngagedTime}",sc:ke(!1),a:"-1",ps:"${navTiming(navigationStart)}",n:"${timestamp}",ads:"$IF(${adSlot}, ${adSlot}, -1)amp",ampFirst:"true"})}},transport:{beacon:!0,xhrpost:!0,image:!1}},n=()=>{document.body.appendChild((e=>{const t=document.createElement("amp-analytics"),r=document.createElement("script");return r.type="application/json",r.innerText=JSON.stringify(e),t.appendChild(r),t})(r))};"loading"===document.readyState?window.addEventListener("load",(()=>n())):n()})(e,t)};class dn{constructor(){this.events={}}on(e,t){void 0===this.events[e]&&(this.events[e]={listeners:[]}),this.events[e].listeners.push(t)}remove(e,t){this.events[e].listeners=this.events[e].listeners.filter((e=>e.toString()!==t.toString()))}dispatch(e,t){this.events[e]&&this.events[e].listeners.forEach((e=>{e(t)}))}}function pn(e,t){try{const r=[...t],n=r.shift();let i;if(Array.isArray(e)){const r=e.map((e=>pn(e,t))).filter(Boolean);i=r.length&&r[0]}else i=e[n];return 0===r.length?i?null==i?void 0:i.toString():null:pn(i,r)}catch(e){return null}}const fn=(e,t)=>"@id"in e&&e["@id"]===t,hn=["Article","NewsArticle","Recipe","BlogPosting","LiveBlogPosting","ReportageNewsArticle","OpinionNewsArticle","AdvertiserContentArticle","Report","SatiricalArticle","ScholarlyArticle","SocialMediaPosting","TechArticle","AnalysisNewsArticle","AskPublicNewsArticle","BackgroundNewsArticle","ReviewNewsArticle"];var mn=Object.freeze({__proto__:null,ARTICLE_ENTITY_TYPES_PRIORITIES:hn,extract:function({attributePath:e,entitiesConstraint:t},r){try{const n=document.querySelectorAll('script[type="application/ld+json"]');return n&&e?function(e,t){for(const r of e){const e=pn(r,t);if(e)return e}return null}(function(e,t,r){const n=(e=>Array.from(e).map((e=>{var t;try{const r=e.textContent?((null===(t=e.textContent)||void 0===t?void 0:t.trim())||"").replace(/\n|\t/g,""):"{}";return JSON.parse(`${r}`)}catch(e){return null}})).filter(Boolean).map((e=>e instanceof Array?e:[e])).map((e=>e.map((e=>(e=>{if("@graph"in e){const t=e["@graph"];if(t instanceof Array)return[e,...t];if(t)return[e,t]}return[e]})(e))).flat())).flat())(e);return((e,t,r)=>{const n=e[0]instanceof Array?e:[e];return(void 0===r?n:n.map((e=>{const n=e.filter((e=>"mainEntityOfPage"in e&&!!e.mainEntityOfPage));return n.length?1===n.length?n:n.filter((e=>{const n=e.mainEntityOfPage;if("string"==typeof n)return n===r;if(fn(n,r))return!0;if("@id"in n&&"string"==typeof n["@id"]){const e=(i=t,o=n["@id"],i.find((e=>fn(e,o))));return!!e&&"url"in e&&e.url===r}var i,o;return!1})):e}))).flat()})(function(e,t,r=!1){const n=e.filter((e=>{const r=pn(e,["@type"]);return!t||!!r&&t.includes(r)})).sort(((e,r)=>t?t.indexOf(pn(e,["@type"]))-t.indexOf(pn(r,["@type"])):0));return r?n.reduce(((e,t)=>{let r=e.at(-1);return r||(r=[],e.push(r)),r.at(-1)&&pn(r.at(-1),["@type"])!==pn(t,["@type"])?e.push([t]):r.push(t),e}),[]):n}(n,t,!0),n,r)}(n,t,r),e):null}catch(e){return null}}});const vn=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(\.\d+)?(Z|[+-]\d{2}:\d{2})$/;function gn(e){let t;return t=vn.test(e)?new Date(e):new Date(e+"Z"),t.getTime()}const yn={jsonLD:mn,querySelector:Object.freeze({__proto__:null,extract:function({queries:e}){if(!e)return null;const t=e.reduce(((e,{query:t,attribute:r})=>(document.querySelectorAll(t).forEach((t=>{r?e.push(t.getAttribute(r)||null):t.textContent&&e.push(t.textContent)})),e)),[]).filter((e=>null!==e));return 1===t.length||t.length>1&&t.every((e=>e===t[0]||gn(e)===gn(t[0])))?t[0]:null}})},bn=(e,t)=>{for(const r of e){const e=yn[r.type].extract(r,t);if(e)return e}return null},wn=[{type:"jsonLD",attributePath:["dateModified"],entitiesConstraint:hn},{type:"querySelector",queries:[{query:'meta[property="article:modified_time"]',attribute:"content"}]},{type:"querySelector",queries:[{query:'meta[itemprop="dateModified"]',attribute:"content"}]},{type:"querySelector",queries:[{query:'time[itemprop="dateModified"]',attribute:"datetime"}]},{type:"querySelector",queries:[{query:'time[itemprop="dateModified"]',attribute:"content"}]},{type:"querySelector",queries:[{query:'[itemprop="dateModified"]'}]}];var On=Object.freeze({__proto__:null,extract:e=>bn(wn,e)});const En=[{type:"jsonLD",attributePath:["datePublished"],entitiesConstraint:hn},{type:"querySelector",queries:[{query:'[itemtype="http://schema.org/NewsArticle"] time[itemprop="datePublished"]',attribute:"datetime"}]},{type:"querySelector",queries:[{query:'meta[property="article:published_time"]',attribute:"content"},{query:':not([itemprop="image"]) > meta[itemprop="datePublished"]',attribute:"content"},{query:'time[itemprop="datePublished"]',attribute:"datetime"},{query:'time[itemprop="datePublished"]',attribute:"content"},{query:'meta[name="cXenseParse:recs:publishtime"]',attribute:"content"}]},{type:"querySelector",queries:[{query:'[itemprop="datePublished"]'}]}];var Pn=Object.freeze({__proto__:null,extract:e=>bn(En,e)});const kn=[{type:"jsonLD",attributePath:["offers","lowPrice"],entitiesConstraint:["Product"]},{type:"jsonLD",attributePath:["offers","price"],entitiesConstraint:["Product"]},{type:"querySelector",queries:[{query:'[itemprop="offers"] [itemprop="price"]',attribute:"content"}]},{type:"querySelector",queries:[{query:'meta[property="product:price:amount"]',attribute:"content"}]}];var Sn=Object.freeze({__proto__:null,extract:e=>bn(kn,e)});const Cn=[{type:"jsonLD",attributePath:["offers","availability"],entitiesConstraint:["Product"]},{type:"querySelector",queries:[{query:'[itemprop="offers"] link[itemprop="availability"]',attribute:"href"},{query:'[itemprop="offers"] [itemprop="availability"]',attribute:"content"}]},{type:"querySelector",queries:[{query:'meta[property="product:availability"]',attribute:"content"}]}],jn={updateTime:On,publishTime:Pn,availability:Object.freeze({__proto__:null,extract:e=>bn(Cn,e)}),price:Sn},An=(e,t)=>jn[e].extract(t),Tn=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{if(t){const t=Ve(e);return JSON.parse(t)||{}}return(e=>{const t=Ae(e);if(t)try{return JSON.parse(t)}catch(e){}return null})(e)||{}}catch(e){return{}}},In=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=t?Tn("".concat(e,"_").concat(t),r):null;return n&&0!==Object.keys(n).length?n:Tn(e,r)};function _n(e,t){let r=0;return e.active&&(r=5),Math.min(t-e.time,r)}class Dn{constructor(){this.totalEngagedTime=0,this.prevEvent=void 0}pushEvent(e){this.prevEvent&&this.prevEvent.time<e.time&&(this.totalEngagedTime+=_n(this.prevEvent,e.time)),this.prevEvent=e}getTotalEngagedTime(e){let t=0;return void 0!==this.prevEvent&&(t=this.totalEngagedTime+_n(this.prevEvent,e)),t}}const Nn=["mousedown","mouseup","mousemove","keydown","keyup","scroll","MRF_MULTIMEDIA_ENGAGED"],Rn=["mouseleave"];class xn{constructor(){this.startTime=Date.now(),this.listeningActive=!1,this.listeningInactive=!1,this.acitvityHistory=new Dn,this.listenToEvents(),"visible"===document.visibilityState&&this.eventTriggered(!0)}listenToEvents(){Nn.forEach((e=>{document.addEventListener(e,(()=>this.eventTriggered(!0)))})),Rn.forEach((e=>{document.addEventListener(e,(()=>this.eventTriggered(!1)))})),F((()=>this.eventTriggered(!1))),q((()=>this.eventTriggered(!0)))}getTimeSinceStart(){const e=Date.now()-this.startTime;return e>0?e:0}eventTriggered(e){e&&this.listeningActive||!e&&this.listeningInactive||(this.listeningActive=e,this.listeningInactive=!e,this.handleEvent(e))}handleEvent(e){const t=Math.floor(this.getTimeSinceStart()/1e3);setTimeout((()=>{this.listeningActive=!1,this.listeningInactive=!1}),1e3),this.acitvityHistory.pushEvent({active:e,time:t})}getTotalEngagedTime(){const e=Math.floor(this.getTimeSinceStart()/1e3);return this.acitvityHistory.getTotalEngagedTime(e)}}function Ln(){let e=arguments.length>1?arguments[1]:void 0,t=!1;(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((e=>{let{selector:r,name:n}=e;document.querySelectorAll(r).forEach((e=>{e.getAttribute("data-mrf-conversion")||(t=!0,e.setAttribute("data-mrf-conversion",n))}))})),t&&Yr(e)}function Un(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}const Mn=function(e){const t=e=>e&&"object"==typeof e;for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return n.reduce(((e,r)=>(Object.keys(r).forEach((n=>{const i=e[n],o=r[n];Array.isArray(i)&&Array.isArray(o)?e[n]=[...i].concat(...o):t(i)&&t(o)?e[n]=Mn(i,o):e[n]=o})),e)),e)},Vn=e=>[...new Set(e)],Fn="".concat("https://experiences.mrf.io","/passexperience/dw-check.html?v=6");let qn=!1;function zn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Bn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zn(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Hn=()=>{const e=new Date;return e.setMonth(e.getMonth()+6),e.toGMTString()},Gn=()=>{};class Kn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:De,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:xe,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Le;var i;this.trackerName=window.__mrfCompass?"__mrfCompass":"__newsroom_js",window[this.trackerName].data=window[this.trackerName].data||[],this.handleImmediateCallsToDataArray(),this.userIdManager=new Br(this),this.tracker=window[this.trackerName],this.accountId=this.tracker.accountId,this.cookieDomain=this.tracker.cookieDomain||(e=>{const t=e.split(".").filter((e=>"www"!==e));if(t.length<2||$.test(e))return null;if(2===t.length)return t.join(".");const r=t.slice(-2),n=t.length-1;return(e=>{const t=e.length-1;return 2===e[t].length&&!!["avz","co","com","df","gob","gov","org","rt"].includes(e[t-1])})(r)&&r.unshift(t[n-2]),r.join(".")})(window.location.hostname),this.initFlags(),this.adsTracker=new sn,this.adsDelay=500,this.consentManager=t,this.setupConsent(this.tracker),this.synchronizer=r,this.events=n,this.dispatcher=new dn,this.endpointDomain=(e=>{let{endpoint:t}=e;return t&&J(t)||"https://events.newsroom.bi"})(this.tracker),this.api=new V(this.endpointDomain,{fallback:"https://icu.newsroom.bi",fallbackWindow:6e4,onModeChange:(e,t)=>{e===x.FALLBACK&&this.setPageVar("mrfNE",t)}}),this.initializeCookies(),this.tracker.lazy||this.initialize(),this.synchronizer.wait("pageInitialized").then((()=>{F((()=>{(e=>{this.synchronizer.resolve("experimentationDisabled",!1)})(),this.isLastEvent=!0,this.collectAndTrackPage()})),q((()=>{Vr(),this.trackPage()}))})),i=()=>this.trackNewPage({rs:"back forward cache"}),window.addEventListener("pageshow",(e=>{e.persisted&&i()}),{capture:!0}),function(e,t,r){r?ln(e,t):window.customElements.whenDefined("amp-ad").then((()=>ln(e,t)))}("".concat(this.endpointDomain).concat("/ingest.php"),this.getBasicConfig(),this.tracker.isAmpFirst),this.tracker.setFCSource=Vt,this.contextVariables={},this.initializeRFV(),this.listenForScrollDepth()}initializeRFV(){this.consentManager.getConsent("personalization")||this.consentManager.onChange((()=>{this.getRFV(Gn)}))}initFlags(){this.tracker.lazy=this.tracker.lazy||!1,this.tracker.isAmpFirst=this.tracker.isAmpFirst||!1,this.tracker.isCookieSandboxed=this.tracker.isCookieSandboxed||[1464,3838].includes(this.accountId);const e=Bn({lazy:!1,layouts:[],modules:[]},this.tracker.rm||{});this.tracker.rm=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r={},n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Un(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Un(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e),o=Object.assign(new Promise(((e,t)=>Object.assign(r,{set:t=>{const r=t instanceof Function?t(n):t;e(Mn(n,r))}}))),r);return t&&o.set({}),o}(e,!e.lazy),this.tracker.usePerformanceEndpoint=this.tracker.usePerformanceEndpoint||!1,this.tracker.adsTrackingFromClient&&(this.nrGoogleTrackingActive=!0)}setInterstitialSlot(e){this.adsTracker.setInterstitialSlot(e)}initializeCookies(){const e=this.consentManager.getConsent("cookies");this.temporalCookie=function(e){const t=Ue(e,"currentVisitStarted"),r=new Date;return r.setDate(r.getDate()-1),t&&t<Me(r)?{}:e}(In("___nrbic",this.tracker.isCookieSandboxed?this.accountId:null,e)),this.permanentCookie=In("___nrbi",this.tracker.isCookieSandboxed?this.accountId:null,e)}async initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.engagementCalculator=new xn,this.performanceStartTime=performance.now();const{url:t,rs:r,initialPageVars:n}=((e,t)=>e?"string"==typeof e?{url:e}:e:{})(e),i=t?re(t):t;Vr(),Wr=[],n&&await Promise.all(Object.entries(n).map((async e=>{let[t,r]=e;return await this.setPageVar(t,r,!1)}))),window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],void 0===this.nrGoogleTrackingActive&&(this.nrGoogleTrackingActive=!0,googletag.cmd.push((()=>{googletag.pubads().addEventListener("slotRenderEnded",(e=>{e.isEmpty||this.trackAdEvent("slotRenderEnded",e.slot)})),googletag.pubads().addEventListener("slotVisibilityChanged",(e=>{this.trackAdEvent("slotVisibilityChanged",e.slot)}))})));const o=!this.tick&&(e=>{var t,r;return"back forward cache"!==e&&"back_forward"===(null===(t=performance)||void 0===t||null===(r=t.getEntriesByType)||void 0===r||null===(r=r.call(t,"navigation"))||void 0===r||null===(r=r[0])||void 0===r?void 0:r.type)})(r)?"back forward":r;this.temporalCookieModified=!1,this.permanentCookieModified=!1,this.adsTracked=!1,this.pageId=null,this.isFirstPage=!0,this.recirculationSource=null,this.updateTime=null,this.publishTime=null,this.newAds=[],this.newAdUnitPaths=[],this.conversion=null,this.tick=0,this.isLastEvent=!1,this.endpoint=this.tracker.endpoint||"https://events.newsroom.bi/ingest.php",this.endpointDomain=J(this.endpoint),this.currentPage=i||Z(this.tracker.pageType),this.startPageTime=Me(),this.pageId=ge(),this.url=i||Z(this.tracker.pageType),this.canonical=i||ye(this.tracker.pageType),this.setFirstVisit(),this.setPreviousVisit(),this.setCurrentVisitStarted(),this.setTimesVisited(),this.setPagesViewed(),this.setLandingPage(i),this.setRecirculationSource(o),this.saveCookies(),this.getRFV(Gn),this.webVitals=new Lr,this.updateTime=An("updateTime",this.canonical),this.publishTime=An("publishTime",this.canonical);const a=this.trackPage();return this.setRecirculationTracking(),(e=>{const t=e.trackConversion.bind(e);(e=>{window.addEventListener("blur",(()=>(e=>{Jr&&e(Jr)})(e)))})((e=>{var r;return e&&t(null==e||null===(r=e.dataset)||void 0===r?void 0:r.mrfConversion)})),document.readyState&&"complete"===document.readyState?en(t):document.addEventListener("DOMContentLoaded",(()=>{en(t)}))})(this),this.dispatcher.dispatch("pageInitialized",{url:this.canonical}),this.synchronizer.resolve("pageInitialized"),a}handleImmediateCallsToDataArray(){window[this.trackerName].data.oldPush=window[this.trackerName].data.push,window[this.trackerName].data.push=e=>{"getRFV"===e[0]?this.getRFV(e[1]):window[this.trackerName].data.oldPush(e)}}setIsNewUser(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.temporalCookie.isNewUser=e,this.markAsModified("temporal"),t&&this.saveCookies()}setFirstVisit(){let e=Ue(this.permanentCookie,"firstVisit");if(!1===e){e=Me(),this.permanentCookie.firstVisit=e;const t=Ve("compass_uid");t?this.permanentCookie.userId=ve(t)?t:((e,t)=>{const r=me(`${e}`,"c0a334de-7622-4bd6-8bff-0b2b750cf2c6");return me(`${t}`,r)})(this.accountId,t):(this.permanentCookie.userId=ge(),this.setIsNewUser(!0,!1)),this.permanentCookie.userVars=[],this.markAsModified("permanent")}else this.permanentCookie.userVars=this.permanentCookie.userVars||[]}setPreviousVisit(){const e=Ue(this.temporalCookie,"previousVisit"),t=Ue(this.permanentCookie,"futurePreviousVisit");if(!1===e&&!1!==t)this.temporalCookie.previousVisit=t,this.permanentCookie.futurePreviousVisit=Me(),this.markAsModified("temporal"),this.markAsModified("permanent");else if(!1===e&&!1===t){const e=Me();this.temporalCookie.previousVisit=e,this.permanentCookie.futurePreviousVisit=e,this.markAsModified("temporal"),this.markAsModified("permanent")}}setCurrentVisitStarted(){let e=Ue(this.temporalCookie,"currentVisitStarted");!1===e?(e=Me(),this.temporalCookie.currentVisitStarted=e,this.markAsModified("temporal"),this.temporalCookie.sessionId=ge(),this.temporalCookie.sessionVars=[]):this.isFirstPage=!1}setTimesVisited(){let e=Ue(this.permanentCookie,"timesVisited");!1!==Ue(this.temporalCookie,"visitedInThisSession")&&!1!==e||(e=!1===e||isNaN(parseInt(e,10))?1:e+1,this.permanentCookie.timesVisited=e,this.temporalCookie.visitedInThisSession=!0,this.markAsModified("permanent"),this.markAsModified("temporal"))}setPagesViewed(){let e=Ue(this.temporalCookie,"pagesViewed");e=!1===e||isNaN(parseInt(e,10))?1:e+1,this.temporalCookie.pagesViewed=e,this.markAsModified("temporal")}setLandingPage(e){!1===Ue(this.temporalCookie,"landingPage")&&(this.temporalCookie.landingPage=e||Z(this.tracker.pageType),this.temporalCookie.referrer=Q(this.tracker.pageType),this.markAsModified("temporal"))}getLandingPage(){var e;return null===(e=this.temporalCookie)||void 0===e?void 0:e.landingPage}setRecirculationSource(e){if(e)this.recirculationSource=e;else{const e=(e=>{const t=((e,t)=>Y(e).search.substring(1).split("&").map((e=>e.split("="))).filter((e=>{let[t]=e;return"utm_cmp_rs"===t})).map((e=>{let[t,r]=e;return decodeURIComponent(r)})).shift())(e);return t||(e=>{const t=it(e),r=ut(),n=ye();return r&&(r[t]||r[n])})(e)})(this.currentPage);e&&(this.recirculationSource=e,(e=>{const t=it(e),r=ut();r&&(delete r[t],Ye("___m_rec",JSON.stringify(r)))})(this.currentPage),(e=>"refresh"===e)(e)&&(this.previousPage=this.canonical))}}saveTemporalCookie(e){const t=this.tracker.isCookieSandboxed?"".concat("___nrbic","_").concat(this.accountId):"___nrbic";e&&Fe(t,JSON.stringify(this.temporalCookie),null,"/",this.cookieDomain),Te(t,this.temporalCookie)}savePermanentCookie(e){const t=this.tracker.isCookieSandboxed?"".concat("___nrbi","_").concat(this.accountId):"___nrbi";if(e){const e=Hn(),{actualUserId:r}=this.userIdManager.getUserId();Fe(t,JSON.stringify(this.permanentCookie),e,"/",this.cookieDomain),this.saveAmpPermanentCookie(r)}Te(t,this.permanentCookie)}saveAmpPermanentCookie(e){e&&Fe("compass_uid",e,arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?void 0:Hn(),"/",this.cookieDomain)}saveCookies(){let{force:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this.consentManager.getConsent("cookies");this.temporalCookie&&(this.temporalCookieModified||e)&&this.saveTemporalCookie(t),this.permanentCookie&&(this.permanentCookieModified||e)&&this.savePermanentCookie(t)}markAsModified(e){this[e+"CookieModified"]=!0}getReferrer(){return this.previousPage?this.previousPage:Q(this.tracker.pageType)}hasTrackedAds(){return!this.nrGoogleTrackingActive||this.adsTracked}getEngagedTime(){var e;const t=Me()-this.startPageTime;return"fbia"===(null===(e=this.tracker)||void 0===e?void 0:e.pageType)?t:this.engagementCalculator.getTotalEngagedTime()}async track(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new FormData;return new Promise((t=>{const r=0===this.tick;this.api.post("/ingest.php",function(e){const t=[];return e.forEach(((e,r)=>{t.push(r+"="+encodeURIComponent(e).replace(/[!'\(\)~]|%20|%00/g,(function(e){return be[e]})))})),t.join("&")}(e),{contentType:"application/x-www-form-urlencoded",onSuccessCallback:r?e=>{let r={};try{r=JSON.parse(e)}catch(e){}if(Ue(this.temporalCookie,"isNewUser")){const{actualUserId:e,userIdPromise:t}=this.getUserId();t.then((t=>this.setIsNewUser(t===e)))}this.userIdManager.processIngestResponse(r),t()}:void 0,skipResponse:this.isLastEvent}),r||t()}))}setUserType(e){this.synchronizer.wait("pageInitialized"),this.permanentCookie.userType=e,this.markAsModified("permanent"),this.saveCookies()}getUserId(){return this.userIdManager.getUserId()}getSiteUserId(){return this.permanentCookie.siteUserId}getSessionReferrer(){return this.temporalCookie.referrer}getSessionId(){return this.temporalCookie.sessionId}getPageId(){return this.pageId}getRecirculationSource(){return this.recirculationSource}getFirstVisit(){return this.permanentCookie.firstVisit}getLastVisit(){return this.temporalCookie.previousVisit!==this.permanentCookie.futurePreviousVisit?this.temporalCookie.previousVisit:null}getPageType(){const e=this.tracker.pageType;return e&&Gr(e)?Gr(e):0}getUserType(){return function(e){if("number"==typeof e)return e;let t=parseInt(e||"",10);if(isNaN(t))switch(e){case"anonymous":t=1;break;case"logged":t=2;break;case"paid":t=3;break;default:t=0}return t}(this.permanentCookie.userType)}getTotalPageviews(){return this.temporalCookie.pagesViewed}getSessionDuration(){return Me()-this.temporalCookie.currentVisitStarted}getEndpointDomain(){return this.endpointDomain}getFallbackEndpointDomain(){return"https://icu.newsroom.bi"}getUserVars(){return this.permanentCookie.userVars}getSessionVars(){return this.temporalCookie.sessionVars}getPageVars(){return Wr}getUrl(){return this.url}getPublishTime(){return this.publishTime}setEcommerceData(e){this.ecommerceData=e}getCanonical(){return this.canonical}setSiteUserId(e){this.permanentCookie.siteUserId=e,this.markAsModified("permanent"),this.saveCookies()}setCookies(e){this.consentManager.setConsent("cookies",e)}getUserConsent(){return arguments.length>0&&void 0!==arguments[0]&&!arguments[0]?this.consentManager.getConsent("cookies"):async function(e,t){return e.isInitiated()?e.getConsent(t):await Promise.race([new Promise((e=>setTimeout((()=>e(!0)),5e3))),new Promise((t=>e.onChange((()=>t(!0))))),new Promise((e=>F((()=>e(!0)))))]).then((async()=>e.getConsent(t)))}(this.consentManager,"cookies")}trackAdEvent(e,t){this.adsTracker.trackAdEvent(e,t)&&-1!==this.adsDelay&&(this.adsTracked=!0,Vr(),Fr(this.adsDelay,(()=>this.trackPage())))}trackAdRendered(e,t){this.adsTracker.trackAdEventLegacy("slotRenderEnded",e,t)&&-1!==this.adsDelay&&(this.adsTracked=!0,Vr(),Fr(this.adsDelay,(()=>this.trackPage())))}async setUserVar(e,t){await this.synchronizer.wait("pageInitialized"),Kr(this.permanentCookie.userVars,e,t),this.markAsModified("permanent"),this.saveCookies()}async setSessionVar(e,t){await this.synchronizer.wait("pageInitialized"),Kr(this.temporalCookie.sessionVars,e,t),this.markAsModified("temporal"),this.saveCookies()}async setPageVar(e,t){var r;(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&await this.synchronizer.wait("pageInitialized"),Xr(e,t),r=t,"closed"===e&&this.setUserVar("lastClosed",r)}async trackConversion(e,t){this.conversion={conv:e,conv_i:t},(async e=>{const t=await(r=on,Promise.resolve(nn().entries[r]))||{};var r;const n=t[e]||0;t[e]=n+1,await function(e,t){return nn().entries[e]=t,Promise.resolve(rn(nn()))}(on,t)})(e),Vr(),await this.trackPage()}listenForScrollDepth(){const e="requestAnimationFrame"in window?window.requestAnimationFrame:e=>e(),t=((e,t)=>{let r=null;return function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];window.clearTimeout(r),r=window.setTimeout((()=>{e(...n)}),1e3)}})((()=>e((()=>ke()))));window.addEventListener("scroll",t,{passive:!0})}async trackRecirculationEvent(e){var t,r;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const i=await this.getTrackingCommonData(),o={t:e,m:n.map((e=>{var t,r;return Bn(Bn({},e),{},{e:(null===(t=(r=e.e).map)||void 0===t?void 0:t.call(r,ne))||e.e})})),ac:i.ac,url:i.url,c:i.c,ut:i.ut,fv:i.fv,lv:i.lv,r:i.r,lp:i.lp,pageType:0,sui:i.sui,u:i.u,uc:i.uc,cc:i.cc,n:Me()};this.tracker.pageType&&"fbia"===this.tracker.pageType&&(o.pageType=2);const a=Ze(this.accountId);if(a){const{rfv:e,v:t,f:r,r:n}=a;o.rfv=e,o.rfv_r=n,o.rfv_f=r,o.rfv_v=t}return this.api.post("/recirculation/recirculation.php",JSON.stringify(o)),null===(t=this.events)||void 0===t||null===(r=t.emitRecirculation)||void 0===r||r.call(t,o),o}getBasicConfig(){const{actualUserId:e}=this.getUserId();return{ac:this.accountId,co:this.cookieDomain,t:this.temporalCookie.currentVisitStarted,r:this.getSessionReferrer(),url:this.url,c:this.canonical,pp:this.getReferrer(),lp:this.getLandingPage(),p:this.pageId,u:e,s:this.getSessionId(),v:.2}}async getTrackingCommonData(){const{userIdPromise:e}=this.getUserId();return Bn(Bn({},this.getBasicConfig()),{},{u:await e,ua:window.navigator.userAgent,rs:this.getRecirculationSource(),sui:this.getSiteUserId()||"",ut:this.getUserType(),fv:this.getFirstVisit(),lv:this.getLastVisit(),uvar:this.getUserVars(),svar:this.getSessionVars(),pvar:this.getPageVars(),uc:await this.getUserConsent(),useg:this.getUserSegments(),cc:Re(this.consentManager)})}async trackPageInternal(){this.tick>0&&(this.performanceStartTime=performance.now());const e=new FormData,{pageNav:t,jsTime:r}=(e=>{if(void 0!==window.performance&&"function"==typeof window.performance.getEntriesByType){const t=window.performance.getEntriesByType("navigation")[0];return Ge=Ge||window.performance.now()-e,Ge>0?{pageNav:t,jsTime:Ge}:{}}return{}})(this.performanceStartTime);null!=r&&(e.append("pt",r),void 0!==t&&void 0!==t.domainLookupEnd&&(e.append("pdns",t.domainLookupEnd-t.domainLookupStart),e.append("pcon",t.connectEnd-t.connectStart),e.append("pfet",t.responseEnd-t.fetchStart),e.append("pnet",t.responseEnd-t.requestStart),e.append("pttf",t.responseStart-t.requestStart),e.append("pint",t.domInteractive),e.append("pdcl",t.domContentLoadedEventEnd),e.append("pdclf",t.duration))),e.append("wv",this.webVitals.hasWebVitals()),e.append("lcp",this.webVitals.lcp),e.append("fid",this.webVitals.fid),e.append("cls",this.webVitals.cls),e.append("fcp",this.webVitals.fcp),e.append("tbt",this.webVitals.tbt),e.append("inp",this.webVitals.inp),this.webVitals.lcpOffender&&e.append("lcp_o",this.webVitals.lcpOffender),this.webVitals.clsOffender&&(e.append("cls_o",this.webVitals.clsOffender),e.append("cls_o_s",this.webVitals.clsOffenderStatus)),this.webVitals.inpOffender&&(e.append("inp_o",this.webVitals.inpOffender),e.append("inp_o_s",this.webVitals.inpOffenderStatus)),Object.entries(this.getBasicConfig()).forEach((t=>{let[r,n]=t;null!=n&&e.append(r,n)}));const n=this.getUserSegments();null!=n&&n.length&&e.append("useg",JSON.stringify(n)),e.append("a",this.tick),e.append("n",Me());const i=Me()-this.startPageTime;e.append("et",this.getEngagedTime()),e.append("l",i),e.append("ps",this.startPageTime),e.append("ut",this.getUserType()),e.append("sui",this.getSiteUserId()||""),e.append("sc",ke(0===this.tick)),e.append("fv",this.getFirstVisit()),e.append("lv",this.getLastVisit()),e.append("uvar",JSON.stringify(this.getUserVars())),e.append("svar",JSON.stringify(this.getSessionVars())),e.append("pvar",JSON.stringify(this.getPageVars())),e.append("nu","".concat(+Ue(this.temporalCookie,"isNewUser"))),this.isLastEvent&&e.append("le","1"),this.ecommerceData&&e.append("stock",this.ecommerceData.stock),(this.publishTime||this.updateTime)&&(e.append("uti",this.updateTime),e.append("pti",this.publishTime)),e.append("ads",this.adsTracker.getAds());const o=this.adsTracker.getAdUnits();o.length>0&&e.append("aups",o);const{conv:a,conv_i:s}=this.conversion||{};if(a&&(e.append("conv",a),s&&e.append("conv_i",s),this.conversion=null),this.recirculationSource&&e.append("rs",this.getRecirculationSource()),e.append("uc",this.isLastEvent?this.getUserConsent(!1):await this.getUserConsent()),e.append("cc",Re(this.consentManager)),this.consentManager.getConsent("personalization")){const t=Ze(this.accountId);if(t){const{rfv:r,v:n,r:i,f:o}=t;e.append("rfv",r),e.append("rfv_v",n),e.append("rfv_r",i),e.append("rfv_f",o)}}return this.tracker.pageType&&e.append("pageType",Gr(this.tracker.pageType)),await this.track(e),this.tick++,e}async collectAndTrackPage(){for(;window[this.trackerName].data.length>0;){const e=window[this.trackerName].data.shift();"userType"===e[0]?this.setUserType(e[1]):"userId"===e[0]?this.setSiteUserId(e[1]):"setCookies"===e[0]?this.setCookies(e[1]):"adRendered"===e[0]?this.adsTracker.trackAdEventLegacy("slotRenderEnded",e[1],e[2]):"userVar"===e[0]?this.setUserVar(e[1],e[2]):"sessionVar"===e[0]?this.setSessionVar(e[1],e[2]):"pageVar"===e[0]?this.setPageVar(e[1],e[2]):"trackConversion"===e[0]?this.trackConversion(e[1],e[2]):"getRFV"===e[0]&&this.getRFV(e[1])}return await this.trackPageInternal()}async trackPage(){this.isLastEvent=!1;let e=null;return 0!==this.tick&&"hidden"===document.visibilityState||(e=await this.collectAndTrackPage()),((e,t)=>{const r=Object.keys(Mr).map((e=>parseInt(e,10))).sort(((e,t)=>e-t)).reduce(((t,r)=>null===t&&r>e?r:t),null);r&&Ur.callOnTimer(t,Mr[r])})(this.tick,(()=>this.trackPage())),e}getRFV(e){if(!this.consentManager.getConsent("personalization"))return e?e(We):We;const{userIdPromise:t,actualUserId:r}=this.getUserId(),n=Ue(this.temporalCookie,"isNewUser");return e?t.then((t=>async function(e,t,r,n){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const o=Ze(e);return o?(r(o),o):function(e,t,r,n){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new Promise((o=>{const a=Je(e,t,n,i);U(Ke,a,{onSuccessCallback:t=>{const n=Xe(JSON.parse(t),e);r(n),o(n)}})}))}(e,t,r,n,i)}(this.accountId,t,e,this.getSiteUserId(),n))):(console.error("Deprecated: please pass a callback to the function getRFV"),function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Ze(e)||function(e,t,r){const n=Je(e,t,r,arguments.length>3&&void 0!==arguments[3]&&arguments[3]),i=U(Ke,n,{sync:!0});return Xe(JSON.parse(i),e)}(e,t,r,n)}(this.accountId,r,this.getSiteUserId(),n))}async trackNewPage(e){var t;if(null===(t=history.state)||void 0===t||!t.mrfSkip)return this.tick>0&&(this.isLastEvent=!0,await this.trackPageInternal(),this.previousPage=""+this.canonical),X={},await this.initialize(e)}on(e,t){this.dispatcher.on(e,t)}setupConsent(e){const t=()=>{this.saveAmpPermanentCookie(Ve("compass_uid"),this.consentManager.getConsent("cookies"))};this.consentManager.onChange((()=>{this.consentManager.getConsent("cookies")&&this.saveCookies({force:!0}),t()}).bind(this)),t();const r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{useCookies:t}=e;if(Ne(t))return t;const r=Ae("__nrCookieConsent");return Ne(r)?r:null}(e);null!==r&&this.consentManager.setConsent("cookies",r)}async getPaywallScore(){const{actualUserId:e}=this.userIdManager.getUserId();return this.consentManager.getConsent("personalization")?(async e=>{const t="".concat(ze,"?").concat(He(e)),r=await window.fetch(t);if(!r.ok)throw new Error(r.status);const{score:n}=await r.json();return n})({accountId:this.accountId,userId:e,siteUserId:this.getSiteUserId()}):qe}async predict(){const{actualUserId:e}=this.userIdManager.getUserId(),t=await(async e=>{const t="".concat(Be,"?").concat(He(e)),r=await fetch(t);if(!r.ok)throw new Error(r.status);return await r.json()})({accountId:this.accountId,userId:e,siteUserId:this.getSiteUserId(),totalPageviews:this.getTotalPageviews(),sessionDuration:this.getSessionDuration()});return t.probability&&Xr("predict:probability",t.probability),t}async setRecirculationTracking(){return this.setRecirculationTrackingInternal(!0)}async setRecirculationTrackingInternal(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=Promise.race([this.synchronizer.wait("experimentation").then((e=>e?this.synchronizer.wait("headline"):Promise.resolve())),this.synchronizer.wait("experimentationFailed"),this.synchronizer.wait("experimentationDisabled").then((()=>Promise.resolve())),new Promise((e=>setTimeout(e,3e3)))]),[{layouts:r}]=await Promise.all([this.tracker.rm,t]);await async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:()=>{};(()=>{if(window.performance){if(window.performance.navigation&&1===window.performance.navigation.type)return!0;if("function"==typeof window.performance.getEntriesByType)return window.performance.getEntriesByType("navigation").map((e=>e.type)).includes("reload")}return!1})()&&lt("refresh",e),await Mt(),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};const{observeDomChanges:n=!0,layouts:i=[]}=t,o=n?Ut:Lt;ot().forEach((t=>t.shadowRoot&&o(e,t.shadowRoot,{parentNode:t,layouts:i},r))),o(e,document.body,{layouts:i},r)}(t,r,n)}(Z(this.tracker.pageType),((e,t)=>{(e=>{"hidden"!==document.visibilityState?e():document.addEventListener("visibilitychange",(()=>{"hidden"!==document.visibilityState&&e()}),{once:!0})})((()=>this.trackRecirculationEvent(e,t.map((e=>{let{module:t,links:r,position:n}=e;return{n:t,e:r,p:n}})),"")))}),{observeDomChanges:e,layouts:r},(()=>this.dispatcher.dispatch("recirculationChanged"))),this.synchronizer.resolve("recirculationTracking")}setRecirculationConfig(){let{modules:e=[],layouts:t=[],blacklist:r=[],redirectionLinks:n=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.tracker.rm.set((i=>{let{modules:o=[],layouts:a=[],blacklist:s=[],redirectionLinks:c=[]}=i;const u={blacklist:Vn([...s,...r]),redirectionLinks:Vn([...c,...n]),modules:Vn([...o,...e]),layouts:Vn([...a,...t])};return this.dispatcher.dispatch("recirculationConfigChanged",Bn({},u)),u})),async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};e.modules.length&&(await Mt(),Ft(e),W((()=>{Ft(e)&&t()})),t())}({modules:e,blacklist:r,redirectionLinks:n},(()=>{this.setRecirculationTrackingInternal(!1),this.dispatcher.dispatch("recirculationChanged")}))}getRecirculationConfig(){return this.tracker.rm}setRecirculationModules(e){this.setRecirculationConfig({modules:e})}setConversionButtons(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e&&e.length&&function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;Ln(e,t),W((()=>{Ln(e,t)}))}(e,this.trackConversion.bind(this))}addUserSegment(e){const t=Ue(this.permanentCookie,"userSegments")||[];this.permanentCookie.userSegments=[...t,e],this.markAsModified("permanent"),this.saveCookies()}setUserSegments(e){this.permanentCookie.userSegments="string"==typeof e?e.split(","):e,this.markAsModified("permanent"),this.saveCookies()}removeUserSegment(e){this.permanentCookie.userSegments=this.permanentCookie.userSegments?this.permanentCookie.userSegments.filter((t=>t!==e)):[],this.markAsModified("permanent"),this.saveCookies()}clearUserSegments(){this.permanentCookie.userSegments=[],this.markAsModified("permanent"),this.saveCookies()}getUserSegments(){var e;return(null===(e=this.permanentCookie)||void 0===e?void 0:e.userSegments)||[]}getContext(e){var t;return e?null===(t=this.contextVariables)||void 0===t?void 0:t[e]:this.contextVariables}setContext(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.contextVariables=e}trackPaymentMethod(){(e=>{try{const r=e.getSessionVars();if("hub.marfeel.com"===document.location.host)return;if(window.addEventListener("message",(t=>{if("https://experiences.mrf.io"===t.origin){var r,n,i;if(null!==(r=t.data)&&void 0!==r&&r.activePayment)e.setSessionVar("activePaymentMethod",t.data.activePayment);else if(null!==(n=t.data)&&void 0!==n&&n.retryData&&window.PaymentRequest){var o;const{paymentMethod:r,paymentDetails:n}=null===(o=t.data)||void 0===o?void 0:o.retryData;new PaymentRequest([r],n,{}).canMakePayment().then((t=>{t&&e.setSessionVar("activePaymentMethod","applePay")})).catch((()=>{}))}qn=!1;const a=null===(i=document.body)||void 0===i?void 0:i.querySelector("iframe#".concat("dw-mrf"));a&&document.body.removeChild(a)}})),!qn||!r.activePaymentMethod){var t;const e=document.createElement("iframe");e.id="dw-mrf",e.setAttribute("allow","payment"),e.setAttribute("style","display:none;"),e.src=Fn,null===(t=document.body)||void 0===t||t.appendChild(e),qn=!0}}catch(e){}})(this)}}function Wn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wn(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}class Jn extends Kn{constructor(e,t,r,n){window.__mrfCompass=Xn(Xn({data:[]},window.__mrfCompass||{}),e),super(e,t,r,n)}initialize(){}getEndpointDomain(){return"https://events.newsroom.bi"}getRFV(e){var t,n;null===(t=window)||void 0===t||null===(n=t.top)||void 0===n||n.marfeel.cmd.push(["compass",function(){var t=r((function*(t){t.getRFV(e)}));return function(e){return t.apply(this,arguments)}}()])}getTrackingCommonData(){return r((function*(){return new Promise((e=>{var t,n;null===(t=window)||void 0===t||null===(n=t.top)||void 0===n||n.marfeel.cmd.push(["compass",function(){var t=r((function*(t){return e(yield t.getTrackingCommonData())}));return function(e){return t.apply(this,arguments)}}()])}))}))()}}function Zn(){return(Zn=r((function*(){return new Promise((e=>{try{document.prerendering?document.addEventListener("prerenderingchange",(()=>{window.marfeel.cmd.push(["compass",function(e){e.setPageVar("mrfprerendered_tracked","true")}]),e()})):e()}catch(t){e()}}))}))).apply(this,arguments)}function Qn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qn(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Yn="mrfhud";class ei extends Kn{constructor(e,t,n,i){var o,a,s;window.__mrfCompass=$n($n({data:[],rm:{lazy:!0}},window.__mrfCompass||{}),e),super(e,t,n,i),function(e){A.apply(this,arguments)}(this,(s=Yn,r((function*(){return!!new URL(window.location.href).hash.includes(s)}))),T(Yn),T("activate-overlay"),(o="".concat("mrfHudStorage","-").concat(e.accountId),a="".concat("compass-overlay","_").concat(e.accountId),r((function*(){try{var e=window.localStorage.getItem(o);if(e)return JSON.parse(e).entries[a].active}catch(e){}return!1}))))}}v("compass",["consent","synchronizer","events"],function(){var e=r((function*(e,t){var[r,n]=t;yield function(){return Zn.apply(this,arguments)}(),yield S(e,r,n,1e3);try{var i;if(window.top!==window.self&&(null===(i=window.top)||void 0===i?void 0:i.marfeel.config.accountId)===e.accountId)return Promise.resolve(Jn)}catch(e){}return Promise.resolve(ei)}));return function(t,r){return e.apply(this,arguments)}}());var ti=a(181),ri=a.n(ti),ni=function(e){return e.INLINE="inline",e.FLOWCARDS="flowcards",e.COMPASS="compass",e.RECIRCULATION="recirculation",e.CONVERSIONS="conversions",e.CONTENT="content",e.AD_MANAGER="adManager",e.EXPERIMENTS="experiments",e.EXPERIMENTATION="experimentation",e.GOOGLE_OPTIMIZE="googleOptimize",e.PIANO="piano",e.GOAL_TRACKING="goalTracking",e.LOADER="loader",e.ECOMMERCE="ecommerce",e.MULTIMEDIA="multimedia",e.GENERIC_GOAL_TRACKING="genericGoalTracking",e.SITE_CONTEXT_SYNCHRONIZER="siteContextSynchronizer",e.SOCIAL_ACQUISITION="socialAcquisition",e.CONTEXT_EXPOSITION="contextExposition",e.APP_BANNER="appBanner",e.MARFEEL_OPTIMIZER="marfeelOptimizer",e.AFFILIATION_ENHANCER="affiliationEnhancer",e}({}),ii=function(){var e=r((function*(e){var t,r=e.canonical||(null===(t=e.location)||void 0===t?void 0:t.href)||"";if(!r)return"";var n=encodeURIComponent(r);return"url=".concat(n)}));return function(t){return e.apply(this,arguments)}}(),oi=function(){var e=r((function*(e){var t=e.userId;return t&&""!==t?"clid=".concat(t):""}));return function(t){return e.apply(this,arguments)}}();function ai(){var e,t;return window.marfeel=null!==(e=window.marfeel)&&void 0!==e?e:{},window.marfeel.cmd=null!==(t=window.marfeel.cmd)&&void 0!==t?t:[],window.marfeel.cmd}var si="marfeel-sdk-store";function ci(e){return e.update=Date.now(),t=si,r=btoa(JSON.stringify(e)),new Promise((e=>{ai().push(["consent",n=>{try{if(n.getConsent("cookies"))return window.localStorage.setItem(t,r),e(!0)}catch(e){}return e(!1)}])}));var t,r}function ui(){return li.apply(this,arguments)}function li(){return(li=r((function*(){var e,t,r=yield(e=si,new Promise((t=>{ai().push(["consent",r=>{try{if(r.getConsent("cookies"))return t(window.localStorage.getItem(e))}catch(e){}return t(null)}])})));return r?JSON.parse(atob(r)):(ci(t={creation:Date.now(),update:Date.now(),entries:{}}),t)}))).apply(this,arguments)}function di(e){return pi.apply(this,arguments)}function pi(){return(pi=r((function*(e){return(yield ui()).entries[e]}))).apply(this,arguments)}function fi(e,t){return hi.apply(this,arguments)}function hi(){return(hi=r((function*(e,t){var r=yield ui();return r.entries[e]=t,ci(r)}))).apply(this,arguments)}var mi=function(e){return e["2G"]="2g",e["3G"]="3g",e["4G"]="4g",e}(mi||{}),vi={[mi["2G"]]:70,[mi["3G"]]:750,[mi["4G"]]:Number.MAX_VALUE},gi="mrf-connection-speed",yi=[1059,1659,2223,2224,2225,2335,2336,2337,2338,2339,2340],bi=function(){var e=r((function*(e){if(!window.performance||!yi.includes(Number(e.siteId)||0))return"";var t=[...window.performance.getEntriesByType("navigation"),...window.performance.getEntriesByType("resource")].filter((e=>e.transferSize>1e4));if(!t.length){var{connection_kbps:r,connection_type:n}=yield di(gi);return r&&n?"kbps=".concat(r,"&ctyp=").concat(n):""}var i=t.reduce(((e,t)=>t.encodedBodySize>e.encodedBodySize?t:e)),o=i.encodedBodySize/1e3,a=i.responseEnd-i.responseStart,s=Math.round(8*o/(a/1e3)),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e<vi[mi["2G"]]?mi["2G"]:e<vi[mi["3G"]]?mi["3G"]:mi["4G"]}(s);return fi(gi,{connection_kbps:s,connection_type:c}),"kbps=".concat(s,"&ctyp=").concat(c)}));return function(t){return e.apply(this,arguments)}}(),wi=function(){var e=r((function*(){var e=yield di("compass-conversions-counter-entry");if(!e)return"";var t=Object.keys(e).map((t=>"".concat(encodeURIComponent(t),",").concat(e[t])));return"".concat("cnv","=").concat(t.join(","))}));return function(){return e.apply(this,arguments)}}(),Oi=function(){var e,t=arguments.length>1?arguments[1]:void 0;return null===(e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(t,"").replace("true","").split("&").find((e=>e.startsWith("mrfexperiences=")||e.startsWith("mrfexp=")||e.startsWith("mrfdebug="))))||void 0===e?void 0:e.split("=")[1]},Ei=e=>{if(e){var t=Oi(e.hash,"#")||Oi(e.search,"?");if(t)return t}return null},Pi=function(){var e=r((function*(e){var t=e.experienceId;return t&&""!==t?"id=".concat(t):""}));return function(t){return e.apply(this,arguments)}}();function ki(e,t){if("provider"!==e)return t}var Si=function(){var e=r((function*(e){var t,r;if(null===(t=e.externalExperiences)||void 0===t||null===(r=t[ni.FLOWCARDS])||void 0===r||!r.length)return"";var n=e.externalExperiences[ni.FLOWCARDS].map((e=>{var t=e;return"object"==typeof e.renderProps&&(t.renderProps=JSON.stringify(e.renderProps)),t})),i=encodeURIComponent(JSON.stringify(n,ki));return"dflwc=".concat(i)}));return function(t){return e.apply(this,arguments)}}(),Ci=function(){var e=r((function*(e){return isNaN(e.firstVisit)?"":"fvst=".concat(e.firstVisit)}));return function(t){return e.apply(this,arguments)}}(),ji="mrfgeo=",Ai=function(){var e=r((function*(e){return"geo=".concat((e=>{if(e){var t=e.search.replace("?","").split("&").find((e=>e.startsWith(ji)));if(t)return t.replace(ji,"")}return null})(e.location)||"__INJECT_GEO__")}));return function(t){return e.apply(this,arguments)}}(),Ti=function(){var e=r((function*(e){var t=/hubspotutk=(.+?)(?:;|$)/.exec(e.cookies||"");return t?"hutk=".concat(t[1]):""}));return function(t){return e.apply(this,arguments)}}(),Ii=function(){var e=r((function*(e){var t=e.pageTechnology?e.pageTechnology:0;return"ptch=".concat(t)}));return function(t){return e.apply(this,arguments)}}(),_i=function(){var e=r((function*(e){return isNaN(e.totalPageViews)?"":"pgv=".concat(e.totalPageViews)}));return function(t){return e.apply(this,arguments)}}(),Di=function(){var e=r((function*(e){if(!e.referrer)return"";var t=encodeURIComponent(e.referrer);return"ppg=".concat(t)}));return function(t){return e.apply(this,arguments)}}();function Ni(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ri(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ni(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ni(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var xi="croupier-user-activity-entry",Li=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if(void 0===t)return e;var r=[...e.filter((e=>e!==t)),t];return r.length>100?r.slice(1):r};function Ui(){return Mi.apply(this,arguments)}function Mi(){return(Mi=r((function*(){return(yield di(xi))||{sites:{}}}))).apply(this,arguments)}function Vi(){return(Vi=r((function*(e,t){var r,n=yield Ui(),i=Ri(Ri({},n),{},{sites:Ri(Ri({},n.sites),{},{[e]:Ri(Ri({},n.sites[e]),{},{readEditorialIds:Li(null===(r=n.sites[e])||void 0===r?void 0:r.readEditorialIds,t.editorialId)})})});return fi(xi,i)}))).apply(this,arguments)}var Fi=function(){var e=r((function*(e){var{siteId:t,personalizedContent:r}=e;if(void 0!==t&&r){var n,i,o=(e=>e.sort(((e,t)=>e-t)).map(((e,t,r)=>{var n=e;return t>0&&(n-=r[t-1]),n})))(null!==(n=null===(i=(yield Ui()).sites[t])||void 0===i?void 0:i.readEditorialIds)&&void 0!==n?n:[]);if(o.length>0)return"red=".concat(encodeURIComponent(o.join(",")))}return""}));return function(t){return e.apply(this,arguments)}}(),qi=function(){var e=r((function*(e){if(!e.recirculationSource)return"";var t=encodeURIComponent(e.recirculationSource);return"rsrc=".concat(t)}));return function(t){return e.apply(this,arguments)}}(),zi=function(){var e=r((function*(e){if(!e.sessionReferrer)return"";var t=new URL(e.sessionReferrer);t.hash="",t.search="";var r=encodeURIComponent(t.toString());return"ref=".concat(r)}));return function(t){return e.apply(this,arguments)}}(),Bi=function(){var e=r((function*(e){return isNaN(e.sessionDuration)?"":"sdu=".concat(e.sessionDuration)}));return function(t){return e.apply(this,arguments)}}(),Hi=function(){var e=r((function*(e){return isNaN(e.siteId)?"":"sid=".concat(e.siteId)}));return function(t){return e.apply(this,arguments)}}();function Gi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ki(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gi(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Wi=function(e){return e.POST_MESSAGE="postmessage",e.HTTP="http",e}({});function Xi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ji(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xi(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Zi=e=>e.reduce(((e,t)=>Ji(Ji({},e),{},{[t.origin]:t.goal})),{}),Qi=function(){var e=r((function*(e,t){var r={handlerName:"content",handled:!1};return t.config.accountId&&e.content&&(r.handled=yield function(e,t){return Vi.apply(this,arguments)}(t.config.accountId,e.content)),Promise.resolve(r)}));return function(t,r){return e.apply(this,arguments)}}(),$i="mrfExperiment_",Yi=e=>e.startsWith($i);var eo=a(254);function to(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ro(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?to(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):to(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var no=(e,t)=>{var r;if("object"==typeof e){r=e;for(var n=t.split("."),i=0;i<n.length;i++){var o;if(n[i].startsWith("[")&&n[i].endsWith("]"))try{var a=parseInt(n[i].replace("[","").replace("]",""),10);r=Array.from(r)[a]}catch(e){r=void 0}else if(i===n.length-1&&"function"==typeof(null===(o=r)||void 0===o?void 0:o[n[i]])){var s,c,u;r=null===(s=r)||void 0===s||null===(c=(u=s)[n[i]])||void 0===c?void 0:c.call(u)}else{var l;r=null===(l=r)||void 0===l?void 0:l[n[i]]}}}return r},io=(e,t)=>{if(void 0===t)return!0;if(void 0!==e&&"*"===t)return!0;if(e===t)return!0;if(Array.isArray(t)){var r=Array.from(e);if(r.length>=t.length)return t.map(((e,t)=>io(r[t],e))).every(Boolean)}return"object"==typeof e&&"object"==typeof t&&Object.entries(t).map((t=>{var[r,n]=t;return io(e[r],n)})).every(Boolean)},oo=(e,t)=>{switch(t.type){case"composite":return Array.isArray(t.value)?t.value.map((t=>oo(e,t))):Object.entries(t.value).reduce(((t,r)=>{var[n,i]=r;return ro(ro({},t),{},{[n]:oo(e,i)})}),{});case"lookup":return t.value?no(e,t.value):e;default:return t.value}},ao=e=>{var t,r,n=e.hasTrackedAds();return e.getEngagedTime()>=5&&(n||null===(t=window.googletag)||void 0===t||null===(r=t.cmd)||void 0===r||r.push((()=>{e.setPageVar("mrf::optimized","true"),window.googletag.pubads().refresh()})),!0)};function so(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function co(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?so(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):so(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var uo=function(){var e=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(((t,r)=>{var[n,i]=r;return co(co({},t),{},{["".concat(e,"::").concat(n)]:i})}),{})},lo=function(){var e=r((function*(e){var t,r,n,i=Object.assign({},e.targeting,(r=null==(t=e.compassVars)?void 0:t.user.filter((e=>{var[t]=e;return!Yi(t)})),n=null==t?void 0:t.user.filter((e=>{var[t]=e;return Yi(t)})).map((e=>{var[t,r]=e;return[t.replace($i,""),r]})),co(co(co(co({},uo(null==t?void 0:t.page,"pageVar")),uo(null==t?void 0:t.session,"sessionVar")),uo(r,"userVar")),uo(n,"experiment"))));return 0===Object.keys(i).length?"":Object.keys(i).filter((e=>void 0!==i[e])).map((e=>[e,encodeURIComponent(i[e])].join("="))).join("&")}));return function(t){return e.apply(this,arguments)}}(),po=0,fo=1,ho=7,mo=4,vo=7,go=864e5;function yo(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()+mo-(t.getUTCDay()||vo))),n=new Date(Date.UTC(r.getFullYear(),po,fo));return{week:Math.ceil(((r.getTime()-n.getTime())/go+1)/ho),year:r.getUTCFullYear()}}var bo=function(e){return e.impression="impression",e.close="close",e}({});function wo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Oo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wo(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Eo,Po,ko,So="croupier-experiences-count-entry",Co=(e,t)=>{var r=Oo({total:{impression:0,close:0}},e||{}),n="w".concat(ko.week);return r[n]=r[n]||{impression:0,close:0},r[n][t]++,r},jo=(e,t)=>{var r=Oo({total:{impression:0,close:0}},e||{});return r.total[t]++,r[Po.getMonth()]=((e,t)=>{var r=Oo({total:{impression:0,close:0}},e||{}),n=Po.getDate();return r[n]=r[n]||{impression:0,close:0},r[n][t]++,r.total[t]++,r})(r[Po.getMonth()],t),r};function Ao(){return void 0===Eo&&(Po=new Date(Date.now()),ko=yo(Po),Eo=di(So).then((e=>e||{}))),Eo}var To=function(e){return e.lifetime="l",e.month="m",e.week="w",e.day="d",e}(To||{}),Io=function(e){return e.last="ls",e}(Io||{}),_o=e=>{if(!e)return 0;var t=Date.now()-e;return Math.floor(t/1e3)},Do=(e,t,r,n)=>{var{impression:i,close:o}=n;i>0&&e.has(r)&&t.push(r,String(i)),o>0&&e.has("".concat("c").concat(r))&&t.push("".concat("c").concat(r),String(o))},No=function(){var e=r((function*(e){var t,r=new Map(Object.entries(null!==(t=e.userExperiences)&&void 0!==t?t:{}).map((e=>{var[t,r]=e;return[t,new Set(r)]})));return Ao().then((e=>{var t=Object.entries(e).reduce(((e,t)=>{var[n,i]=t,o=[],a=r.get(n);if(!i||0===i.total.impression||!a)return e;!function(e,t,r){Do(e,t,To.lifetime,r.total)}(a,o,i);var s=new Date(Date.now()),c=yo(s),u=i[s.getFullYear()],l=i[c.year],d=null==u?void 0:u[s.getMonth()],p=null==d?void 0:d[s.getDate()];!function(e,t,r){r&&Do(e,t,To.month,r.total)}(a,o,d),function(e,t,r,n){if(r){var i=r["w".concat(n.week)];i&&Do(e,t,To.week,i)}}(a,o,l,c),function(e,t,r){r&&Do(e,t,To.day,r)}(a,o,p),((e,t,r)=>{r.last&&Do(e,t,Io.last,{impression:_o(r.last.impression),close:_o(r.last.close)})})(a,o,i);var f=o.join("|");return f.length>0?e.concat(n,f):e}),[]);return t.length>0?"uexp=".concat(t.join(",")):""}))}));return function(t){return e.apply(this,arguments)}}(),Ro=function(){var e=r((function*(e){return Array.isArray(e.userSegments)?"useg=".concat(e.userSegments.join(",")):""}));return function(t){return e.apply(this,arguments)}}(),xo=function(){var e=r((function*(e){return isNaN(e.userType)?"":"utyp=".concat(e.userType)}));return function(t){return e.apply(this,arguments)}}(),Lo=e=>{try{return decodeURIComponent(e),!0}catch(e){return!1}},Uo=function(e){return e.USQP="usqp",e.CAMPAIGN="utm_campaign",e.CONTENT="utm_content",e.MEDIUM="utm_medium",e.SOURCE="utm_source",e}(Uo||{}),Mo={[Uo.CAMPAIGN]:"u_cpg",[Uo.CONTENT]:"u_cnt",[Uo.MEDIUM]:"u_mdm",[Uo.SOURCE]:"u_src"},Vo={canonical_url:"url",client_id:"clid",connection_speed:"cspd",conversions:"cnv",dynamic_flowcards:"dflwc",experience_id:"id",first_visit:"fvst",hubspot_utk:"hutk",page_technology:"ptch",pageviews:"pgv",previous_page:"ppg",recirculation_source:"rsrc",referrer:"ref",session_duration:"sdu",site_id:"sid",targeting:"trg",user_experiences:"uexp",user_type:"utyp",visitor_frequency:"vfrq"},Fo={url:ii,clid:oi,cspd:bi,cnv:wi,debug_experiences:e=>{var t=Ei(e.location);return Promise.resolve(t?"debug_experiences=".concat(t):"")},dflwc:Si,fvst:Ci,geo:Ai,hutk:Ti,id:Pi,ptch:Ii,pgv:_i,ppg:Di,pti:e=>{var t=e.publishTime;return Promise.resolve(t?"pti=".concat(t):"")},qpa:e=>{var t=e.location,r=[];if(t)for(var n of Array.from(t.searchParams.keys()).reverse())-1===r.indexOf(n)&&r.push(n);return Promise.resolve(r.length>0?"qpa=".concat(r.reverse().join(",")):"")},rsrc:qi,red:Fi,ref:zi,sdu:Bi,sid:Hi,trg:lo,uexp:No,useg:Ro,utyp:xo,utms:function(){var e=r((function*(e){var t=e.location;if(!t)return"";var r=Object.values(Uo);return Array.from(t.searchParams.entries()).filter((e=>{var[t]=e;return r.includes(t)})).map((e=>{var t,[r,n]=e;return"".concat(null!==(t=Mo[r])&&void 0!==t?t:r,"=").concat(n)})).filter(Lo).join("&")}));return function(t){return e.apply(this,arguments)}}(),vfrq:function(){var e=r((function*(e){return e.hasConsent?"":"".concat("vfrq","=").concat("6")}));return function(t){return e.apply(this,arguments)}}()},qo=function(){var e=r((function*(e,t,r){var n=yield Promise.all((e=>{var t=Object.entries(Fo);if(!e)return t;var r=new Set(Array.from(e.values()).map((e=>{var t;return null!==(t=Vo[e])&&void 0!==t?t:e})));return r.add("sid"),r.add("ptch"),t.filter((e=>{var[t]=e;return r.has(t)}))})(r).map((t=>{var[r,n]=t;return n(e)})));return"".concat(t,"?").concat(n.filter((e=>!!e)).join("&"))}));return function(t,r,n){return e.apply(this,arguments)}}();function zo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Bo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zo(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ho(e){var t=e[ni.FLOWCARDS];return t&&!t.actions?Bo(Bo({},e),{},{[ni.FLOWCARDS]:Bo(Bo({},t),{},{actions:t.cards})}):e}var Go;function Ko(){return(Ko=r((function*(e){var t=yield qo(e,"https://experiences.mrf.io/recommenderexperience/render.json",new Set(["canonical_url","client_id","experience_id","red"])),r=yield fetch(t),n=yield r.json();return null==n?void 0:n.recommendation}))).apply(this,arguments)}!function(e){e.AMP_DOCUMENT="AMPDocument",e.WIDGET_PROVIDER="WidgetProvider",e.AD_SERVER_PROVIDER="AdServerProvider",e.TEXT_HTML="TextHTML",e.CONTAINER="Container",e.JSON="Json"}(Go||(Go={}));var Wo=e=>e.type===Go.AMP_DOCUMENT,Xo=e=>e.type===Go.TEXT_HTML;function Jo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Zo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Jo(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Qo="mrf-sdk-hero-element-src",$o="mrf-sdk-hero-element-height",Yo=(e,t)=>{if(e.has(Qo)){var r={src:e.get(Qo)};return e.has($o)&&(r.height=parseInt(e.get($o),10)),Zo(Zo({},t),{},{heroElement:r})}return t};function ea(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ta(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ea(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ea(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ra="mrf-sdk-canonical-url",na=(e,t)=>{if(e.has(ra)){var r={url:e.get(ra)};return ta(ta({},t),{},{canonical:r})}return t},ia=e=>e.includes("marfeelrecommenderexperienceengine.mrf.io");function oa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function aa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oa(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oa(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function sa(){return sa=r((function*(e){try{var{headers:t}=yield fetch(e.url);return function(e){var t=[Yo];return ia(e.url)||t.push(na),t}(e).reduce(((e,r)=>r(t,e)),{})}catch(t){throw new Error("".concat(t,"::").concat(e.url))}})),sa.apply(this,arguments)}function ca(e){return ua.apply(this,arguments)}function ua(){return ua=r((function*(e){return Object.entries(e).map(function(){var e=r((function*(e){var t,r,[n,i]=e;return r=i.content,(Wo(r)||Xo(r))&&(t=yield function(e){return sa.apply(this,arguments)}(i.content)),[n,i,t]}));return function(t){return e.apply(this,arguments)}}()).reduce(function(){var e=r((function*(e,t){var r,n=yield e,[i,o,a]=yield t;return a&&(r=function(e,t){return aa(aa({},e),{},{features:aa(aa({},e.features),t)})}(o,a)),n[i]=r||o,n}));return function(t,r){return e.apply(this,arguments)}}(),Promise.resolve({}))})),ua.apply(this,arguments)}function la(e,t){return r=>{var n=r.detail;(null==n?void 0:n.owner)===t&&e({uri:n.uri})}}var da=()=>window.location.hash.includes("mrfdebug"),pa=function(){var e=r((function*(e,t,r){var n,i,o,a,s,c,u,l=da(),{userIdPromise:d,actualUserId:p}=t.getUserId(),f=l?p:yield d,h=!!l||(yield t.getUserConsent());return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=e.canonical?{headers:{"mrf-lb-hash":e.canonical}}:void 0;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return qo(e,"https://flowcards.mrf.io/json/experiences",t.length>0?new Set(t):void 0).then((e=>"".concat(e,"&v=2")))}(e,t).then((e=>fetch(e,r))).then((e=>e.json())).then(Ho)}({pageTechnology:t.getPageType(),canonical:(u=null===(s=document.querySelector('meta[property="mrf:canonical"]'))||void 0===s?void 0:s.getAttribute("content"),u||(null===(c=document.querySelector('link[rel="canonical"]'))||void 0===c?void 0:c.getAttribute("href"))||void 0),location:new URL(window.location.toString()),publishTime:t.getPublishTime(),siteId:e.accountId,externalExperiences:e.experiences,targeting:e.targeting,userId:f,userSegments:t.getUserSegments(),userType:t.getUserType(),userExperiences:null===(n=e.preflight)||void 0===n||null===(i=n.preflight)||void 0===i||null===(o=i.targeting)||void 0===o?void 0:o.frequencyCap,firstVisit:t.getFirstVisit(),recirculationSource:t.getRecirculationSource(),referrer:t.getReferrer(),sessionDuration:t.getSessionDuration(),sessionReferrer:t.getSessionReferrer(),totalPageViews:t.getTotalPageviews(),cookies:document.cookie,compassVars:{user:t.getUserVars(),session:t.getSessionVars(),page:t.getPageVars()},hasConsent:h,personalizedContent:!(null===(a=e.recommenderConfig)||void 0===a||!a.personalizedContent)},r)}));return function(t,r,n){return e.apply(this,arguments)}}();function fa(e,t){var r=document.createElement("script");return r.setAttribute("type","application/javascript"),r.setAttribute("src",e),t&&(r.id=t),r}function ha(e){return(t,r)=>{var n=fa(t,r);n.setAttribute("type","module"),e.appendChild(n)}}function ma(e){return(t,r)=>{var n=fa(t,r);n.noModule=!0,n.async=!0,n.defer=!0,e.appendChild(n)}}function va(e){return(t,r)=>{var n=fa(t,r);e.appendChild(n)}}function ga(e){return"marfeel-".concat(e)}function ya(e){return function(e){return document.querySelector(ga(e))}(e)||function(e){return document.body.appendChild(document.createElement(ga(e)))}(e)}var ba=function(){var e=r((function*(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{onInteraction:r=!0,strategy:n="async"}=t;return(e=>{var t="string"!=typeof e?e.module:e;return!!document.querySelector('script[src="'.concat(t,'"]'))})(e)?Promise.resolve():(r?function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e4,r=["touchstart","click","scroll"];return new Promise((n=>{var i=()=>{r.forEach((e=>((e,t)=>{document.removeEventListener(e,t)})(e,i))),window.clearTimeout(e),n()};r.forEach((e=>((e,t)=>{document.addEventListener(e,t,{passive:!0})})(e,i))),e=window.setTimeout(i,t)}))}():Promise.resolve()).then((()=>{"sync"===n?"string"!=typeof e?(function(){ha(document.head)(...arguments)}(e.module),function(){ma(document.head)(...arguments)}(e.nomodule)):function(){va(document.head)(...arguments)}(e):"string"!=typeof e?(function(){ha(document.body)(...arguments)}(e.module),function(){ma(document.body)(...arguments)}(e.nomodule)):function(){va(document.body)(...arguments)}(e)}))}));return function(t){return e.apply(this,arguments)}}(),wa=[],Oa=[];function Ea(e,t){var r=e instanceof Array?e:[e],n=function(e){switch(e){case bo.impression:return wa;case bo.close:return Oa;default:return[]}}(t);r.forEach((e=>{var r,i;(function(e,t){return t.indexOf(e)>-1})(e,n)||(n.push(e),r=e,i=t,Ao().then((e=>{e[r]=function(e,t){var r=Oo({total:{impression:0,close:0},last:{impression:0,close:0}},e||{});return r.total[t]++,r[Po.getFullYear()]=jo(r[Po.getFullYear()],t),r[ko.year]=Co(r[ko.year],t),r.last[t]=Number(Date.now()),r}(e[r],i),fi(So,e)})))}))}function Pa(e){Ea(e,bo.impression)}function ka(e){Ea(e,bo.close)}var Sa=(e,t,n)=>function(){var i=r((function*(r,i,o){var a,s=(null==n?void 0:n(r))||(null===(a=r[e])||void 0===a?void 0:a.actions),c={handlerName:e,handled:!1};if(s){var u=Object.values(s);if(u.length){var l=yield t(u,i,o);c.handled=null==l||l,Pa(u.map((e=>{var{id:t}=e;return t})))}}return c}));return function(e,t,r){return i.apply(this,arguments)}}(),Ca=Sa(ni.EXPERIMENTATION,function(){var e=r((function*(e){f(d.INIT_HANDLE_EXPERIMENTATION),yield Promise.all(e.map((e=>{var{url:t}=e,r=new URL(t),n=r.searchParams.get("experimentType");if(null!==n&&document.querySelector('[src*="experimentType='.concat(n,'"]')))return Promise.resolve();var i=new URL(t);return r.searchParams.append("version","esnext"),i.searchParams.append("version","legacy"),ba({module:r.toString(),nomodule:i.toString()},{onInteraction:!1,strategy:"sync"})}))),h(d.INIT_HANDLE_EXPERIMENTATION,d.END_HANDLE_EXPERIMENTATION)}));return function(t){return e.apply(this,arguments)}}()),ja="complete",Aa="interactive",Ta="loading",Ia=()=>document.readyState===ja,_a=()=>document.readyState===Aa,Da=()=>{var e;return document.readyState===Ta&&!(null===(e=document.head)||void 0===e||!e.appendChild)},Na=function(){var e=r((function*(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ja;return new Promise((t=>{var r=(e=>{switch(e){case Ta:return[Da,_a,Ia];case Aa:return[_a,Ia];default:return[Ia]}})(e),n=()=>r.some((e=>e()));n()?t():document.addEventListener("readystatechange",(()=>{n()&&t()}))}))}));return function(){return e.apply(this,arguments)}}();function Ra(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ra(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ra(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var La=function(){var e=r((function*(e,t,r){var{documentState:n=ja,prepare:i=(()=>Promise.resolve()),enrich:o=!1}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};f(d.INIT_HANDLE_INLINE_EXPERIENCE);var a=t[e]||{actions:{}},s=a.actions||{},c={handlerName:e,handled:!1};if(Object.keys(s).length>0){yield i();var u=xa(xa({},a),{},{actions:o?yield ca(a.actions):a.actions});yield Na(n),function(e,t){var r=document.createElement("script");r.setAttribute("type","application/json"),r.innerHTML=JSON.stringify(t);var n=ya(e);n.appendChild(r),n.setAttribute("initialization","inline")}(e,u),yield r(u),c.handled=!0}return h(d.INIT_HANDLE_INLINE_EXPERIENCE,d.END_HANDLE_INLINE_EXPERIENCE,{type:e,jsonResponse:t}),c}));return function(t,r,n){return e.apply(this,arguments)}}();function Ua(e,t){return t.id||e}function Ma(e,t){Object.entries(t.actions).forEach((t=>{var[r,n]=t,i=function(e){var t;return(null===(t=e.features.canonical)||void 0===t?void 0:t.url)||(Wo(e.content)||Xo(e.content)?e.content.url:e.content.type===Go.WIDGET_PROVIDER||(e=>e.type===Go.AD_SERVER_PROVIDER)(e.content)?e.content.name:void 0)}(n);i&&e.trackRecirculationEvent("elegible",[{n:Ua(r,n),e:[i]}],"")}))}var Va="//flowcards.mrf.io/statics/experience-web",Fa="".concat(Va,"/index.es2015.standalone.js"),qa="".concat(Va,"/index.es5.standalone.js"),za=function(){var e=r((function*(e,t){if(matchMedia("only screen and (min-width:800px)").matches)return{handlerName:ni.FLOWCARDS,handled:!1};var{compassSDK:n}=t;return La(ni.FLOWCARDS,e,function(){var e=r((function*(e){Ma(n,e),yield ba({module:Fa,nomodule:qa}),ya(ni.FLOWCARDS).addEventListener("snappointchange",(e=>{var{snapPoint:t,initiator:r,cardId:n}=e.detail;(function(e,t){return"hidden"===e&&"user:button"===t})(t,r)&&ka(n),function(e){return"initial"===e||"active"===e}(t)&&Pa(n)}))}));return function(t){return e.apply(this,arguments)}}(),{enrich:!0})}));return function(t,r){return e.apply(this,arguments)}}(),Ba=Sa(ni.GOOGLE_OPTIMIZE,function(){var e=r((function*(e,t){var r=e.map((e=>{var{experiments:t}=e;return t})).reduce(((e,t)=>(t.forEach((t=>e.add(t))),e)),new Set);return new Promise((e=>{!function(){window.dataLayer=window.dataLayer||[],window.dataLayer.push(arguments)}("event","optimize.callback",{callback:(n,i)=>{r.has(i)&&(t.compassSDK.setUserVar("optimize-".concat(i),n),r.delete(i)),0===r.size&&e()}})}))}));return function(t,r){return e.apply(this,arguments)}}()),Ha="https://experiences.mrf.io/statics/inline-experiences",Ga="".concat(Ha,"/esnext/standalone.js"),Ka="".concat(Ha,"/legacy/standalone.js"),Wa=function(){var e=r((function*(e){return La(ni.INLINE,e,function(){var e=r((function*(e){var t,{actions:r={}}=e;null===(t=window.mrfInlineExperiences)||void 0===t||t.init(),(e=>{Object.entries(e).forEach((e=>{var[t,r]=e;Pa(r.id)})),document.addEventListener("mrfCloseInline",(e=>{var t;ka(null===(t=e.detail)||void 0===t?void 0:t.id)}))})(r)}));return function(t){return e.apply(this,arguments)}}(),{documentState:Aa,prepare:(t=r((function*(){yield Na(Ta),yield ba({module:Ga,nomodule:Ka},{onInteraction:!1,strategy:"sync"})})),function(){return t.apply(this,arguments)})});var t}));return function(t){return e.apply(this,arguments)}}();function Xa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ja(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xa(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xa(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Za=Sa(ni.LOADER,function(){var e=r((function*(e){e.forEach((e=>{var{moduleName:t,config:r}=e;window.marfeel.cmd.push(["loader",function(e){e.load(t,r)}])}))}));return function(t){return e.apply(this,arguments)}}(),(e=>{var{loader:t={actions:{}},multimedia:r={actions:{}},ecommerce:n={actions:{}}}=e;return Ja(Ja(Ja({},t.actions),r.actions),n.actions)})),Qa=Sa(ni.CONTEXT_EXPOSITION,function(){var e=r((function*(e,t){e.forEach((e=>{var{contextVariables:r}=e;try{r&&t.compassSDK.setContext(JSON.parse(r))}catch(e){console.error("not valid JSON for the contextExposition experience")}}))}));return function(t,r){return e.apply(this,arguments)}}()),$a="closed",Ya=function(){var e=r((function*(e,t){var r,n,i=yield t.wait("piano-offer");return!("purchase"!==i.offerType||("inline"===i.displayMode?(e.compassSDK.setPageVar($a,"hard-paywall"),0):"modal"!==i.displayMode||!i.activeMeters||"DefaultMeter"!==(r=i.activeMeters,n=JSON.parse(r),Array.isArray(n)?n[0]:n).meterName||(e.compassSDK.setPageVar($a,"dynamic-paywall"),0)))}));return function(t,r){return e.apply(this,arguments)}}(),es="piano subscribe",ts=function(){var e=r((function*(e,t,r){var n,i=yield r.wait("piano-subscription"),o=t.find((e=>e.rid===i.rid));return!!o&&(e.compassSDK.trackConversion(null!==(n=o.conversion)&&void 0!==n?n:es),!0)}));return function(t,r,n){return e.apply(this,arguments)}}(),rs=function(){var e=r((function*(e,t,n){var i,o,a=yield Promise.all(t.map(function(){var t=r((function*(t){if(yield((e,t)=>new Promise((r=>{e.api.callApi("/access/check",{rid:t},(function(e){var t=e.access.granted;return r(t)}))})))(e,t.rid))return t}));return function(e){return t.apply(this,arguments)}}()));n.compassSDK.setUserType(null!==(i=null===(o=a.find(Boolean))||void 0===o?void 0:o.userType)&&void 0!==i?i:"logged")}));return function(t,r,n){return e.apply(this,arguments)}}(),ns=function(){var e=r((function*(e,t){var r,n,i=null!==(r=null===(n=e.pianoId.getUser())||void 0===n?void 0:n.uid)&&void 0!==r?r:void 0;if(!i)try{var o,a;i=JSON.parse(atob(null===(o=e.pianoId.getToken())||void 0===o||null===(a=o.split("."))||void 0===a?void 0:a[1])).sub}catch(e){}i&&t.compassSDK.setSiteUserId(i)}));return function(t,r){return e.apply(this,arguments)}}(),is=function(){var e=r((function*(){if(window.tp&&!Array.isArray(window.tp)||(yield new Promise((e=>{!function(){window.tp=window.tp||[],Array.isArray(window.tp)&&window.tp.push(arguments)}("init",e)}))),window.tp&&!Array.isArray(window.tp))return window.tp}));return function(){return e.apply(this,arguments)}}(),os=e=>Array.isArray(e.resources)?e.resources:e.rid.split(";").map((e=>({rid:e,userType:3,conversion:es}))),as=function(){var e=r((function*(e,t,r,n){return!(!e.pianoId.isUserValid()&&!e.user.isUserValid()||(yield rs(e,r,n),t&&e.pianoId.isUserValid()&&(yield ns(e,n)),0))}));return function(t,r,n,i){return e.apply(this,arguments)}}(),ss=Sa(ni.PIANO,function(){var e=r((function*(e,t,n){var i=e.map(os).reduce(((e,t)=>[...e,...t]),[]),o=e.some((e=>null==e?void 0:e.deviceUnification));yield Promise.all([Ya(t,n),ts(t,i,n),is().then(function(){var e=r((function*(e){return new Promise((n=>{if(!e)return n();var a=0,s=setInterval(r((function*(){if((yield as(e,o,i,t))||a>=3)return clearInterval(s),n();a+=1})),5e3)}))}));return function(t){return e.apply(this,arguments)}}())])}));return function(t,r,n){return e.apply(this,arguments)}}()),cs=function(){var e=r((function*(){if(!document.querySelector(".js_smartbanner")){var[e]=yield Promise.all([a.e(512).then(a.bind(a,512)),a.e(376).then(a.bind(a,376))]);(new e.default).publish()}}));return function(){return e.apply(this,arguments)}}(),us=function(){var e=r((function*(e){[["smartbanner:title",e.title],["smartbanner:author",e.author],["smartbanner:price","GET"],["smartbanner:price-suffix-google"," - In Google Play"],["smartbanner:price-suffix-apple"," - On the App Store"],["smartbanner:icon-google",e.icon],["smartbanner:icon-apple",e.icon],["smartbanner:button-url-google","https://play.google.com/store/apps/details?id=".concat(e.androidId)],["smartbanner:button-url-apple","https://apps.apple.com/app/id".concat(e.iosId)],["smartbanner:enabled-platforms","android,ios"],["smartbanner:button","VIEW"],["smartbanner:custom-design-modifier","marfeel"],["smartbanner:api","true"]].forEach((e=>{var[t,r]=e;return((e,t)=>{var r=document.createElement("meta");r.name=e,r.content=t,document.head.appendChild(r)})(t,r)})),yield cs()}));return function(t){return e.apply(this,arguments)}}(),ls=Sa(ni.APP_BANNER,function(){var e=r((function*(e){var t=e[0];yield us(t),window.addEventListener("smartbanner.exit",(()=>{ka(t.id)}))}));return function(t){return e.apply(this,arguments)}}()),ds=Sa(ni.SOCIAL_ACQUISITION,function(){var e=r((function*(e){e.forEach((e=>{var{pixelId:t}=e;(e=>{var{pixelId:t}=e;!function(e,t,r,n,i,o,a){e.fbq||(i=e.fbq=function(){i.callMethod?i.callMethod.apply(i,arguments):i.queue.push(arguments)},e._fbq||(e._fbq=i),i.push=i,i.loaded=!0,i.version="2.0",i.queue=[],(o=t.createElement(r)).async=!0,o.src="https://connect.facebook.net/en_US/fbevents.js",(a=t.getElementsByTagName(r)[0]).parentNode.insertBefore(o,a))}(window,document,"script"),window.fbq("init",t),window.fbq("track","PageView")})({pixelId:t})}))}));return function(t){return e.apply(this,arguments)}}()),ps=["www.amazon","/dp/"],fs="asc_refurl",hs="asc_source",ms="asc_campaign";const vs=new class{isAffiliateUrl(e){return ps.every((t=>e.includes(t)))}getModifiedUrl(e,t){var r=new URL(e),n=r.searchParams.get(fs),i=r.searchParams.get(ms),o=r.searchParams.get(hs);return!n&&t.url&&r.searchParams.set(fs,t.url),!o&&t.source&&r.searchParams.set(hs,t.source),!i&&t.campaign&&r.searchParams.set(ms,t.campaign),{isCorrect:!!n&&!!o&&!!i,url:r.toString()}}};var gs=[vs],ys=(e,t)=>{[...document.querySelectorAll("a")].filter((e=>!!e.href)).forEach((r=>{try{var n,{url:i,isValid:o,build:a}=((e,t)=>{var r=new URL(e);if(t){var n=r.searchParams.get(t);return{isValid:!!n,build:e=>(r.searchParams.set(t,e),r.toString()),url:n?decodeURIComponent(decodeURIComponent(n)):""}}return{isValid:!0,build:e=>e,url:r.toString()}})(r.href,t);if(!o)return;var s=null===(n=gs.filter((e=>e.isAffiliateUrl(i))))||void 0===n?void 0:n[0];if(!s)return;var{isCorrect:c,url:u}=s.getModifiedUrl(i,e);c||(r.href=a(u))}catch(e){}}))},bs=Sa(ni.AFFILIATION_ENHANCER,function(){var e=r((function*(e){e.forEach((e=>{var{context:t,queryParam:r}=e;((e,t)=>{ys(e,t),(0,eo.N7)((()=>{ys(e,t)}))})(JSON.parse(t),r)}))}));return function(t){return e.apply(this,arguments)}}()),ws=[[(e,t)=>{var r,n,i,o={handlerName:"experiments",handled:!1};if(e.experiments){var a=(r=e.experiments,n=t.compassSDK,i=n.getUserVars()||[],r.filter((e=>{var{name:t}=e;return!i.some((e=>{var[r]=e;return r==="".concat($i).concat(t)}))})));o.handled=function(e,t){return 0!==e.length&&(e.forEach((e=>{var{name:r,group:n,groups:i}=e;t.setUserVar("".concat($i).concat(r),function(e,t){return t?(Math.floor(Math.random()*t)+1).toString():e.toString()}(n,i))})),!0)}(a,t.compassSDK)}return Promise.resolve(o)}]],Os=[[Wa],[(e,t)=>{var{compass:r={actions:{}},recirculation:n={actions:{}},conversions:i={actions:{}}}=e,o=Object.values(Ki(Ki(Ki({},null==r?void 0:r.actions),null==n?void 0:n.actions),null==i?void 0:i.actions)),a={handlerName:"compass",handled:!1};if(o.length){var s={layouts:[],modules:[],blacklist:[],redirectionLinks:[]};Object.values(o).forEach((e=>{var{recirculationModules:r=[],userType:n,userVars:i={},conversionButtons:o=[],layouts:a=[],blacklist:c=[],redirectionLinks:u=[]}=e;t.compassSDK.setConversionButtons(o),void 0!==n&&t.compassSDK.setUserType(n),Object.entries(i).forEach((e=>{var[r,n]=e;return t.compassSDK.setUserVar(r,n)})),s.modules.push(...r),s.layouts.push(...a),s.blacklist.push(...c),s.redirectionLinks.push(...u)})),t.compassSDK.setRecirculationConfig(s),a.handled=!0}return Promise.resolve(a)}],[e=>{var{adManager:t}=e,r={handlerName:"ad-manager",handled:!1};return null!=t&&t.actions&&(Object.values(t.actions).forEach((e=>{var t,{targeting:r}=e;(t=r)&&(window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],t.forEach((e=>{var{key:t,value:r}=e;window.googletag.cmd.push((()=>{window.googletag.pubads().setTargeting(t,r)}))})))})),r.handled=!0),Promise.resolve(r)},Qi,Ca,za,Ba,ss,ds,(e,t)=>{var{goalTracking:r}=e,n={handlerName:"goalTracking",handled:!1};return null!=r&&r.actions&&(Object.values(r.actions).forEach((e=>{var{goals:r}=e;null==r||r.forEach((e=>t.compassSDK.trackConversion(e)))})),n.handled=!0),Promise.resolve(n)},(e,t)=>{var{genericGoalTracking:r}=e,n={handlerName:"genericGoalTracking",handled:!1},i=!1;if(null!=r&&r.actions){var o,a,s=Object.values(r.actions).reduce(((e,t)=>((e[t.source]=e[t.source]||[]).push(t),e)),{});if((null===(o=s[Wi.POST_MESSAGE])||void 0===o?void 0:o.length)>0){var c=Zi(s[Wi.POST_MESSAGE]);window.addEventListener("message",(e=>{if(Object.keys(c).includes(e.origin)){var r,n;try{n=JSON.parse(e.data)}catch(e){return}"complete"!==n.event&&("close"!==n.event&&"purge"!==n.event||null===(r=n.params)||void 0===r||!r.completePayment)||i||(i=!0,t.compassSDK.trackConversion(c[e.origin]))}})),n.handled=!0}if((null===(a=s[Wi.HTTP])||void 0===a?void 0:a.length)>0){var u=Zi(s[Wi.HTTP]),l=window.fetch,d=window.XMLHttpRequest.prototype.open;window.fetch=(e,r)=>{var n=l(e,r);return Object.keys(u).includes(e)&&n.then((r=>{r.ok&&t.compassSDK.trackConversion(u[e])})),n},window.XMLHttpRequest.prototype.open=function(){d.apply(this,arguments);try{var e=new URL(arguments[1]);Object.keys(u).includes(e.origin)&&t.compassSDK.setPageVar(u[e.origin],"true")}catch(e){}},n.handled=!0}}return Promise.resolve(n)},Za,(e,t)=>{var{siteContextSynchronizer:r}=e,n={handlerName:"siteContextSynchronizer",handled:!1};return null!=r&&r.actions&&(Object.values(r.actions).forEach((e=>{e.definition.forEach((e=>{return r=e,n=t.compassSDK,i=0,o=(e,t)=>{var r=oo(e,t.params);switch(function(e){return void 0!==(null==e?void 0:e.name)}(t.action)?t.action.name:t.action){case"userType":"string"!=typeof r&&"number"!=typeof r||n.setUserType(r);break;case"conversion":"string"==typeof r&&n.trackConversion(r);break;case"marfeelCMD":var i=t.action;window.marfeel.cmd.push([i.config.module,e=>{var t;Array.isArray(r)&&(null==e||null===(t=e[i.config.method])||void 0===t||t.call(e,...r))}])}},a=e=>{for(var t of r.effects)if(io(e,t.condition))return void o(e,t)},(s=function e(){var t,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],o=r.path.startsWith("window.")?r.path.substring(7):r.path,s=no(window,o);if(s)if("array"===r.type){if(Array.isArray(s)){for(var c=i;c<s.length;c++)a(s[c]);i=s.length}}else a(s);var u=null!==(t=r.observe)&&void 0!==t?t:5e3;n&&u>0&&setTimeout((()=>e()),u)})(),void(0,eo.C1)((()=>{s(!1)}));var r,n,i,o,a,s}))})),n.handled=!0),Promise.resolve(n)},Qa,ls,(e,t)=>{var{marfeelOptimizer:r}=e,n={handlerName:"marfeelOptimizer",handled:!1};return null!=r&&r.actions&&Object.values(r.actions).length>0?new Promise((e=>{var r=ao(t.compassSDK),n=0;if(r)return e();var i=setInterval((()=>{if(ao(t.compassSDK)||n>=2)return clearInterval(i),e();n+=1}),5e3)})).then((()=>(n.handled=!0,Promise.resolve(n)))):Promise.resolve(n)},bs]],Es=function(){var e=r((function*(e,t,r,n){var i=[];for(var[o,a]of e.entries()){f(d.INIT_HANDLE_ACTION);var s=yield Promise.all(a.map((e=>e(t,r,n))));h(d.INIT_HANDLE_ACTION,d.END_HANDLE_ACTION,{index:o}),i.push(...s)}return i}));return function(t,r,n,i){return e.apply(this,arguments)}}(),Ps=(e,t,r)=>Es(Os,e,t,r);class ks{constructor(){i(this,"promise",void 0),i(this,"promiseResolve",void 0),this.promise=new Promise((e=>{this.promiseResolve=e}))}resolve(){var e;null===(e=this.promiseResolve)||void 0===e||e.call(this)}}var Ss=function(e){return e.NOT_EQUALS="NOT_EQUALS",e.EQUALS="EQUALS",e}({}),Cs=e=>e.replace(/\/+$/,""),js=(e,t)=>e.hostname===t.hostname&&Cs(e.pathname)===Cs(t.pathname),As=function(){var e=r((function*(e){var t=window.location;switch(e.operator){case Ss.NOT_EQUALS:return e.values.every((e=>!js(t,new URL(e))));case Ss.EQUALS:default:return e.values.some((e=>js(t,new URL(e))))}}));return function(t){return e.apply(this,arguments)}}(),Ts=function(){var e=r((function*(e,t){if(da()||e.operator!==Ss.EQUALS)return!0;var n=function(){var e=r((function*(){return new Promise((e=>{if(window.didomiConfig)return window.didomiOnReady=window.didomiOnReady||[],void window.didomiOnReady.push((t=>{e(t.shouldConsentBeCollected())}));t.consentSDK.hasToPromptForConsent(e)}))}));return function(){return e.apply(this,arguments)}}();return!!(yield n())||t.consentSDK.isActive()&&!function(e){var t=new RegExp("(^|;) ?".concat("mrfpass","=([^;]*)(;|$)")).exec(document.cookie);return t?t[2]:null}()&&e.values.some((e=>!t.consentSDK.hasConsentForPurpose(+e)))}));return function(t,r){return e.apply(this,arguments)}}(),Is="pendingConsent",_s=function(){var e=r((function*(e){var t=window.location.hostname;switch(e.operator){case Ss.NOT_EQUALS:return e.values.every((e=>e!==t));case Ss.EQUALS:default:return e.values.some((e=>e===t))}}));return function(t){return e.apply(this,arguments)}}(),Ds=function(){var e=r((function*(e){var t=document.documentElement.lang||"None";switch(e.operator){case Ss.NOT_EQUALS:return e.values.every((e=>e!==t));case Ss.EQUALS:default:return e.values.some((e=>e===t))}}));return function(t){return e.apply(this,arguments)}}(),Ns=function(){var e=r((function*(e){var[t,r="/"]=window.location.pathname.split("/"),n="/"!==r?"/".concat(r,"/"):r;switch(e.operator){case Ss.NOT_EQUALS:return e.values.every((e=>e!==n));case Ss.EQUALS:default:return e.values.some((e=>e===n))}}));return function(t){return e.apply(this,arguments)}}(),Rs=function(){var e=r((function*(e){var t,r=(null==(t=window.navigator.language||window.navigator.userLanguage)?void 0:t.split("-")[0].toLowerCase())||"en";switch(e.operator){case Ss.NOT_EQUALS:return e.values.every((e=>e!==r));case Ss.EQUALS:default:return e.values.some((e=>e===r))}}));return function(t){return e.apply(this,arguments)}}();function xs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ls(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xs(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xs(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Us=e=>function(){var t=r((function*(t){switch(t.operator){case Ss.NOT_EQUALS:return t.values.every((t=>t!==e));case Ss.EQUALS:default:return t.values.some((t=>t===e))}}));return function(e){return t.apply(this,arguments)}}();function Ms(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Vs(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ms(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ms(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Fs=["FC_","IL_","AC_"],qs={url:As,[Is]:Ts,domain:_s,htmlLang:Ds,browserLang:Rs,folder:Ns},zs=[e=>(e.compassSDK.getUserVars()||[]).map((e=>{var[t,r]=e,n=Us(r.toString());return Ls({[t]:n,["".concat("userVar::").concat(t)]:n},(e=>e.startsWith($i))(t)?{[t.replace($i,"")]:n}:{})})).reduce(((e,t)=>Ls(Ls({},e),t)),{})],Bs=function(){var e=r((function*(e,t){return Promise.all(e.map(t)).then((t=>e.filter(((e,r)=>t[r]))))}));return function(t,r){return e.apply(this,arguments)}}(),Hs=function(){var e=r((function*(e,t,r){return!Array.isArray(e.filters)||0===e.filters.length||(yield Promise.all(e.filters.map((e=>{var n=r[e.key];return!n||n(e,t)})))).every(Boolean)}));return function(t,r,n){return e.apply(this,arguments)}}(),Gs=function(){var e=r((function*(e,t){if(!e.actions)return e;var r=yield t(e.actions);return 0!==r.length?Vs(Vs({},e),{},{actions:r.reduce(((e,t)=>{var[r,n]=t;return Vs(Vs({},e),{},{[r]:n})}),{})}):void 0}));return function(t,r){return e.apply(this,arguments)}}(),Ks=function(){var e=r((function*(e,t){return Object.entries(e).reduce(function(){var e=r((function*(e,r){var[n,i]=r,o=yield((e,t)=>{var r=(e=>{var t=zs.map((t=>t(e))).reduce(((e,t)=>Vs(Vs({},e),t)),{});return Vs(Vs({},qs),t)})(t);return Gs(e,(e=>Bs(Object.entries(e),(e=>{var[n,i]=e;return Hs(i,t,r)}))))})(i,t);return o?Vs(Vs({},yield e),{},{[n]:o}):e}));return function(t,r){return e.apply(this,arguments)}}(),Promise.resolve({}))}));return function(t,r){return e.apply(this,arguments)}}(),Ws=function(){var e=r((function*(e,t){return Object.entries(e).reduce(function(){var e=r((function*(e,r){var[n,i]=r,o=yield((e,t)=>Gs(e,(e=>Bs(Object.entries(e),(e=>{var[r,n]=e;return((e,t)=>Promise.resolve(t.some((t=>e.id===t))))(n,t)})))))(i,t.split(","));return o?Vs(Vs({},yield e),{},{[n]:o}):e}));return function(t,r){return e.apply(this,arguments)}}(),Promise.resolve({}))}));return function(t,r){return e.apply(this,arguments)}}(),Xs=function(){var e=r((function*(e,t){var r,n=(r=Ei(new URL(window.location.href)))&&Fs.some((e=>r.startsWith(e)))?r:void 0;return n?Ws(e,n):Ks(e,t)}));return function(t,r){return e.apply(this,arguments)}}();function Js(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Zs(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Js(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Js(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Qs=e=>(e=>"content"in e)(e)&&Xo(e.content)&&e.content.url.includes("marfeelpassexperience");function $s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ys(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$s(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ec(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function tc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ec(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ec(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var rc={inline:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{actions:{}};if(!("actions"in e))return e;var{actions:r}=e,{actions:n={}}=t;if(Object.values(n).some(Qs))return{actions:Object.entries(r).reduce(((e,t)=>{var[r,n]=t;return Qs(n)?Zs({},e):Zs(Zs({},e),{},{[r]:n})}),{})};if(Object.values(r).filter(Qs).length>1){var i=Object.keys(r).filter((e=>Qs(r[e])))[0];return{actions:Zs({[i]:r[i]},Object.entries(r).filter((e=>{var[t,r]=e;return!Qs(r)})).reduce(((e,t)=>{var[r,n]=t;return Zs(Zs({},e),{},{[r]:n})}),{}))}}return e},flowcards:e=>window.location.hash.includes("disabletriggers=true")&&"actions"in e&&"cards"in e?([...Object.values(e.actions),...Object.values(e.cards)].forEach((e=>{e.triggers={timeout:{on:"timeout",action:"setSnapPoint:initial",spec:{time:200}}},e.features=Ys(Ys({},e.features),{},{transition:"automaitc"})})),e):e};function nc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ic(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nc(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var oc=[e=>(e=>"content"in e)(e)&&Xo(e.content)&&e.content.url.includes("marfeelpassexperienceengine.mrf.io")?ic(ic({},e),{},{features:ic(ic({},e.features),{},{removable:!1}),filters:[...e.filters||[],{operator:Ss.EQUALS,values:["1","2","3","4","5","6","7","8","9","10","11"],key:Is}]}):e];function ac(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function sc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ac(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ac(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var cc={inline:e=>oc.reduce(((e,t)=>t(e)),e)},uc=e=>Object.entries(e).reduce(((e,t)=>{var[r,n]=t,i=cc[r];return sc(sc({},e),{},i&&n&&"actions"in n?{[r]:sc(sc({},n),{},{actions:Object.entries(n.actions).reduce(((e,t)=>{var[r,n]=t;return sc(sc({},e),{},{[r]:i(n)})}),{})})}:{[r]:n})}),{});function lc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function dc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lc(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var pc=e=>{var t=e(),r=new Promise((e=>{window.setTimeout((()=>{e(void 0)}),3e3)}));return Promise.race([t,r])},fc=e=>!!e,hc=function(){var e=r((function*(e,t,r,n){return yield((e,t,r)=>pc((()=>((e,t,r)=>Es(ws,e,t,r))(e,t,r))))(e,t,r),((e,t)=>Object.entries(e).reduce(((e,r)=>{var[n,i]=r,o=rc[n];return tc(tc({},e),{},o&&i?{[n]:o(i,t[n])}:{[n]:i})}),{}))(yield Xs(e,t),n)}));return function(t,r,n,i){return e.apply(this,arguments)}}();class mc{constructor(e,t,r,n){i(this,"config",void 0),i(this,"compassSDK",void 0),i(this,"synchronizer",void 0),i(this,"consentSDK",void 0),i(this,"executionData",void 0),i(this,"deferred",void 0);var o=e.experiences||e.flowcards;this.compassSDK=t,this.synchronizer=r,this.consentSDK=n,this.config={accountId:e.accountId,targeting:{}},o&&Object.assign(this.config,o),this.deferred=new ks,this.executionData=this.loadExperiences()}loadExperiences(){var e=this;return r((function*(){f(d.LOADING_EXPERIENCES);var t,n,i,o,a,s,c,u={},l=[],p={config:e.config,compassSDK:e.compassSDK,consentSDK:e.consentSDK},{active:m,clientParameters:v,preflight:g,recommender:y}=yield(t=e.config,t.preflight?(t.preflight.active=t.preflight.active||!!Ei(new URL(window.location.href)),Promise.resolve(t.preflight)):function(e){return(e=>qo(e,"https://flowcards.mrf.io/json/active",new Set(["sid","ptch","debug_experiences"])))(e).then(fetch).then((e=>e.json())).then((e=>e.preflight?Bo(Bo({},e),{},{preflight:Ho(e.preflight)}):e))}({location:new URL(window.location.toString()),siteId:t.accountId,pageTechnology:0})),b=Promise.resolve();if(e.config.recommenderConfig=y,g){var w=yield hc(uc(g),p,e.synchronizer,u);u=ri()(u,w),b=((e,t,r)=>pc((()=>Ps(e,t,r))))(w,p,e.synchronizer).then((e=>{Array.isArray(e)&&l.push(...e);var[t]=l.filter((e=>"compass"===(null==e?void 0:e.handlerName)));(null==t||!t.handled)&&p.compassSDK.setRecirculationConfig({})}))}if(m){yield(n=e.config,i=e.deferred,null!==(o=n.waitFor)&&void 0!==o&&o.promise?n.waitFor.promise:null!==(a=n.waitFor)&&void 0!==a&&a.timeout?(c=n.waitFor.timeout,new Promise((e=>{setTimeout(e,c)}))):null!==(s=n.waitFor)&&void 0!==s&&s.done?i.promise:Promise.resolve());var O=yield pa(e.config,e.compassSDK,v).then(function(){var t=r((function*(t){var r=yield hc(uc(t),p,e.synchronizer,u);return u=ri()(u,r),((e,t,r)=>Ps(e,t,r))(r,p,e.synchronizer)}));return function(e){return t.apply(this,arguments)}}());Array.isArray(O)&&l.push(...O)}yield b;var E=l.filter(fc).reduce(((e,t)=>dc(dc({},e),{},{[t.handlerName]:e[t.handlerName]||t.handled})),{});return Object.values(ni).forEach((t=>{e.synchronizer.resolve(t,!!E[t])})),h(d.LOADING_EXPERIENCES,d.END_LOADING_EXPERIENCES),{handled:E,experiences:u}}))()}done(){this.deferred.resolve()}addTargeting(e,t){this.config.targeting[e]=t}addExperience(e,t){var r,n,i,o;null!==(n=(r=this.config).experiences)&&void 0!==n||(r.experiences={}),null!==(o=(i=this.config.experiences)[e])&&void 0!==o||(i[e]=[]),this.config.experiences[e].push(t)}addEventListener(e,t,r){var n=function(e,t){return"navigationchange"===e?e=>{t(e)}:"navigationfromcard"===e?la(t,"host"):"navigationtocard"===e?la(t,"flowcards"):null}(t,r);n&&ya(e).addEventListener("navigationchange",n)}hasExperiences(e){return this.executionData.then((t=>{var{handled:r}=t;return!!r[e]}))}triggerExperiences(){var e=this;return r((function*(){return e.loadExperiences()}))()}hasExperimentation(e){return this.executionData.then((t=>{var{experiences:r}=t;return((e,t)=>{var r,n=null===(r=e.experimentation)||void 0===r?void 0:r.actions;return!!n&&Object.values(n).some((e=>{var{url:r}=e;return-1!==r.indexOf("experimentType=".concat(t))}))})(r,e)}))}getRecommendations(e){var t=this;return r((function*(){var r;return yield function(e){return Ko.apply(this,arguments)}({experienceId:e,canonical:t.compassSDK.getCanonical(),userId:t.compassSDK.getUserId().actualUserId,personalizedContent:!(null===(r=t.config.recommenderConfig)||void 0===r||!r.personalizedContent),siteId:t.config.accountId})}))()}}v("experiences",["compass","synchronizer","consent"],(()=>Promise.resolve(mc)));class vc{constructor(e,t){i(this,"croupier",void 0),this.croupier=t}addTargeting(e,t){this.croupier.addTargeting(e,t)}addCard(e){this.croupier.addExperience(ni.FLOWCARDS,e)}addEventListener(e,t){this.croupier.addEventListener(ni.FLOWCARDS,e,t)}hasCards(){return this.croupier.hasExperiences(ni.FLOWCARDS)}}function gc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gc(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}v("flowcards",["experiences"],(()=>Promise.resolve(vc))),v("multimedia",["compass","consent","synchronizer"],function(){var e=r((function*(e,t){var r,n,i,[o,s,c]=t;return yield S(yc(yc({},e),{},{blockOnNoConsent:!(null===(r=e.multimedia)||void 0===r||!r.providers)&&-1!==(null===(n=e.multimedia)||void 0===n||null===(i=n.providers)||void 0===i?void 0:i.indexOf("youtube"))||e.blockOnNoConsent}),s,c),e.multimedia?a.e(513).then(a.bind(a,513)).then((e=>e.default)):Promise.reject()}));return function(t,r){return e.apply(this,arguments)}}());class bc{constructor(){i(this,"promises",void 0),this.promises={}}wait(e){var t,r;null!==(r=(t=this.promises)[e])&&void 0!==r||(t[e]={});var n=this.promises[e].promise;return void 0===n?(n=new Promise(((t,r)=>{this.promises[e].resolve=t,this.promises[e].reject=r})),this.promises[e].promise=n,n):n}resolve(e,t){var r,n;null!==(n=(r=this.promises)[e])&&void 0!==n||(r[e]={}),void 0===this.promises[e].resolve?this.promises[e].promise=Promise.resolve(t):(0,this.promises[e].resolve)(t)}reject(e,t){var r,n;null!==(n=(r=this.promises)[e])&&void 0!==n||(r[e]={}),void 0===this.promises[e].reject?this.promises[e].promise=Promise.reject(t):(0,this.promises[e].reject)(t)}}v("synchronizer",[],(()=>Promise.resolve(bc)));let wc=()=>({emit(e,...t){for(let r=0,n=this.events[e]||[],i=n.length;r<i;r++)n[r](...t)},events:{},on(e,t){return(this.events[e]||=[]).push(t),()=>{this.events[e]=this.events[e]?.filter((e=>t!==e))}}});function Oc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ec(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Oc(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Pc={elegible:"eligible",impression:"impression",click:"click"};class kc{constructor(){i(this,"emitter",void 0),this.emitter=wc()}on(e,t){this.emitter.on(e,(e=>{"click"===e.t?null==t||t(e):setTimeout((()=>{null==t||t(e)}),0)}))}emitRecirculation(e){var t=function(e){return{t:Pc[e.t],m:e.m}}(e),r=function(e){return e.m.reduce(((t,r)=>{var n=r.n;if(n.startsWith("FC_")||n.startsWith("IL_")){var i,o=n.startsWith("IL_")?"inline":"flowcards";return Ec(Ec({},t),{},{["recirculation:".concat(o)]:{t:e.t,m:[...(null===(i=t["recirculation:".concat(o)])||void 0===i?void 0:i.m)||[],r]},["recirculation:".concat(n)]:{t:e.t,m:[r]}})}return Ec(Ec({},t),{},{["recirculation:".concat(n)]:{t:e.t,m:[r]}})}),{})}(t);this.emitter.emit("recirculation",t),Object.keys(r).forEach((e=>{this.emitter.emit(e,r[e])}))}}v("events",[],(()=>Promise.resolve(kc)));var Sc=(e,t,r)=>{var n,i;n=((e,t,r)=>{var n=document.createElement("script");return n.src=e,n.id=r,t?n.type="module":(n.setAttribute("nomodule",""),n.setAttribute("defer","")),n})(e,r,t),i=document.head,new Promise(((e,t)=>{n.addEventListener("error",(e=>t(e.error))),i.append(n)}))},Cc="https://sdk.mrf.io/statics",jc={ecommerce:{srcModule:"".concat(Cc,"/compass-ecommerce-sdk.js"),srcNoModule:"".concat(Cc,"/compass-ecommerce-sdk.es5.js"),dependencies:["compass"]},multimedia:{srcModule:"".concat(Cc,"/compass-multimedia-sdk.js"),srcNoModule:"".concat(Cc,"/compass-multimedia-sdk.es5.js"),dependencies:["compass"]}},Ac=e=>"".concat(e,"?version=3070");class Tc{load(e,t){var r=jc[e];t&&function(){m.addConfig(...arguments)}(t),Sc(Ac(r.srcModule),e,!0),Sc(Ac(r.srcNoModule),e,!1)}}v("loader",[],(()=>Promise.resolve(Tc)))})();