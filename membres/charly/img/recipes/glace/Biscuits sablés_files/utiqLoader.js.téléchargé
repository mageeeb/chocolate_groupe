(()=>{"use strict";const e=new class{#e="[-]";#t={error:"error",warn:"warn",info:"info",verbose:"verbose"};#n="info";get logLevel(){return this.#n}get logLevels(){return this.#t}setLogLevel(e){Object.hasOwn(this.#t,e)&&(this.#n=e)}initialize(e,t){this.#e=`[${e}]:`,t&&"verbose"===t&&(this.#n=this.#t.verbose)}logError(...e){console.error(this.#e,...e)}logWarn(...e){this.#n!==this.#t.warn&&this.#n!==this.#t.info&&this.#n!==this.#t.verbose||console.warn(this.#e,...e)}logInfo(...e){this.#n!==this.#t.info&&this.#n!==this.#t.verbose||console.info(this.#e,"[INFO]",...e)}logDebug(...e){this.#n===this.#t.verbose&&console.info(this.#e,"[DEBUG]",...e)}logTrace(...e){this.#n===this.#t.verbose&&console.info(this.#e,"[TRACE]",...e)}};function t(e,t){return function(){return e.apply(t,arguments)}}const{toString:n}=Object.prototype,{getPrototypeOf:o}=Object,i=(r=Object.create(null),e=>{const t=n.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())});var r;const a=e=>(e=e.toLowerCase(),t=>i(t)===e),s=e=>t=>typeof t===e,{isArray:c}=Array,l=s("undefined"),u=a("ArrayBuffer"),d=s("string"),f=s("function"),g=s("number"),p=e=>null!==e&&"object"==typeof e,m=e=>{if("object"!==i(e))return!1;const t=o(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},h=a("Date"),C=a("File"),y=a("Blob"),v=a("FileList"),w=a("URLSearchParams");function b(e,t,{allOwnKeys:n=!1}={}){if(null==e)return;let o,i;if("object"!=typeof e&&(e=[e]),c(e))for(o=0,i=e.length;o<i;o++)t.call(null,e[o],o,e);else{const i=n?Object.getOwnPropertyNames(e):Object.keys(e),r=i.length;let a;for(o=0;o<r;o++)a=i[o],t.call(null,e[a],a,e)}}function O(e,t){t=t.toLowerCase();const n=Object.keys(e);let o,i=n.length;for(;i-- >0;)if(o=n[i],t===o.toLowerCase())return o;return null}const E="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,T=e=>!l(e)&&e!==E,S=(D="undefined"!=typeof Uint8Array&&o(Uint8Array),e=>D&&e instanceof D);var D;const I=a("HTMLFormElement"),k=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),N=a("RegExp"),A=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),o={};b(n,((n,i)=>{let r;!1!==(r=t(n,i,e))&&(o[i]=r||n)})),Object.defineProperties(e,o)},U="abcdefghijklmnopqrstuvwxyz",q="0123456789",P={DIGIT:q,ALPHA:U,ALPHA_DIGIT:U+U.toUpperCase()+q},_=a("AsyncFunction"),R={isArray:c,isArrayBuffer:u,isBuffer:function(e){return null!==e&&!l(e)&&null!==e.constructor&&!l(e.constructor)&&f(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||f(e.append)&&("formdata"===(t=i(e))||"object"===t&&f(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&u(e.buffer),t},isString:d,isNumber:g,isBoolean:e=>!0===e||!1===e,isObject:p,isPlainObject:m,isUndefined:l,isDate:h,isFile:C,isBlob:y,isRegExp:N,isFunction:f,isStream:e=>p(e)&&f(e.pipe),isURLSearchParams:w,isTypedArray:S,isFileList:v,forEach:b,merge:function e(){const{caseless:t}=T(this)&&this||{},n={},o=(o,i)=>{const r=t&&O(n,i)||i;m(n[r])&&m(o)?n[r]=e(n[r],o):m(o)?n[r]=e({},o):c(o)?n[r]=o.slice():n[r]=o};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&b(arguments[e],o);return n},extend:(e,n,o,{allOwnKeys:i}={})=>(b(n,((n,i)=>{o&&f(n)?e[i]=t(n,o):e[i]=n}),{allOwnKeys:i}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,o)=>{e.prototype=Object.create(t.prototype,o),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,i)=>{let r,a,s;const c={};if(t=t||{},null==e)return t;do{for(r=Object.getOwnPropertyNames(e),a=r.length;a-- >0;)s=r[a],i&&!i(s,e,t)||c[s]||(t[s]=e[s],c[s]=!0);e=!1!==n&&o(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:i,kindOfTest:a,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const o=e.indexOf(t,n);return-1!==o&&o===n},toArray:e=>{if(!e)return null;if(c(e))return e;let t=e.length;if(!g(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let o;for(;(o=n.next())&&!o.done;){const n=o.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const o=[];for(;null!==(n=e.exec(t));)o.push(n);return o},isHTMLForm:I,hasOwnProperty:k,hasOwnProp:k,reduceDescriptors:A,freezeMethods:e=>{A(e,((t,n)=>{if(f(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const o=e[n];f(o)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},o=e=>{e.forEach((e=>{n[e]=!0}))};return c(e)?o(e):o(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:O,global:E,isContextDefined:T,ALPHABET:P,generateString:(e=16,t=P.ALPHA_DIGIT)=>{let n="";const{length:o}=t;for(;e--;)n+=t[Math.random()*o|0];return n},isSpecCompliantForm:function(e){return!!(e&&f(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,o)=>{if(p(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[o]=e;const i=c(e)?[]:{};return b(e,((e,t)=>{const r=n(e,o+1);!l(r)&&(i[t]=r)})),t[o]=void 0,i}}return e};return n(e,0)},isAsyncFn:_,isThenable:e=>e&&(p(e)||f(e))&&f(e.then)&&f(e.catch)};function L(e,t,n,o,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),o&&(this.request=o),i&&(this.response=i)}R.inherits(L,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:R.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const x=L.prototype,j={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{j[e]={value:e}})),Object.defineProperties(L,j),Object.defineProperty(x,"isAxiosError",{value:!0}),L.from=(e,t,n,o,i,r)=>{const a=Object.create(x);return R.toFlatObject(e,a,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),L.call(a,e.message,t,n,o,i),a.cause=e,a.name=e.name,r&&Object.assign(a,r),a};const F=L;function M(e){return R.isPlainObject(e)||R.isArray(e)}function G(e){return R.endsWith(e,"[]")?e.slice(0,-2):e}function V(e,t,n){return e?e.concat(t).map((function(e,t){return e=G(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const B=R.toFlatObject(R,{},null,(function(e){return/^is[A-Z]/.test(e)})),$=function(e,t,n){if(!R.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const o=(n=R.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!R.isUndefined(t[e])}))).metaTokens,i=n.visitor||l,r=n.dots,a=n.indexes,s=(n.Blob||"undefined"!=typeof Blob&&Blob)&&R.isSpecCompliantForm(t);if(!R.isFunction(i))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(R.isDate(e))return e.toISOString();if(!s&&R.isBlob(e))throw new F("Blob is not supported. Use a Buffer instead.");return R.isArrayBuffer(e)||R.isTypedArray(e)?s&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,n,i){let s=e;if(e&&!i&&"object"==typeof e)if(R.endsWith(n,"{}"))n=o?n:n.slice(0,-2),e=JSON.stringify(e);else if(R.isArray(e)&&function(e){return R.isArray(e)&&!e.some(M)}(e)||(R.isFileList(e)||R.endsWith(n,"[]"))&&(s=R.toArray(e)))return n=G(n),s.forEach((function(e,o){!R.isUndefined(e)&&null!==e&&t.append(!0===a?V([n],o,r):null===a?n:n+"[]",c(e))})),!1;return!!M(e)||(t.append(V(i,n,r),c(e)),!1)}const u=[],d=Object.assign(B,{defaultVisitor:l,convertValue:c,isVisitable:M});if(!R.isObject(e))throw new TypeError("data must be an object");return function e(n,o){if(!R.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+o.join("."));u.push(n),R.forEach(n,(function(n,r){!0===(!(R.isUndefined(n)||null===n)&&i.call(t,n,R.isString(r)?r.trim():r,o,d))&&e(n,o?o.concat(r):[r])})),u.pop()}}(e),t};function H(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function z(e,t){this._pairs=[],e&&$(e,this,t)}const J=z.prototype;J.append=function(e,t){this._pairs.push([e,t])},J.toString=function(e){const t=e?function(t){return e.call(this,t,H)}:H;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const W=z;function K(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Y(e,t,n){if(!t)return e;const o=n&&n.encode||K,i=n&&n.serialize;let r;if(r=i?i(t,n):R.isURLSearchParams(t)?t.toString():new W(t,n).toString(o),r){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}const X=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){R.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},Q={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Z={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:W,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},isStandardBrowserEnv:(()=>{let e;return("undefined"==typeof navigator||"ReactNative"!==(e=navigator.product)&&"NativeScript"!==e&&"NS"!==e)&&"undefined"!=typeof window&&"undefined"!=typeof document})(),isStandardBrowserWebWorkerEnv:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,protocols:["http","https","file","blob","url","data"]},ee=function(e){function t(e,n,o,i){let r=e[i++];const a=Number.isFinite(+r),s=i>=e.length;return r=!r&&R.isArray(o)?o.length:r,s?(R.hasOwnProp(o,r)?o[r]=[o[r],n]:o[r]=n,!a):(o[r]&&R.isObject(o[r])||(o[r]=[]),t(e,n,o[r],i)&&R.isArray(o[r])&&(o[r]=function(e){const t={},n=Object.keys(e);let o;const i=n.length;let r;for(o=0;o<i;o++)r=n[o],t[r]=e[r];return t}(o[r])),!a)}if(R.isFormData(e)&&R.isFunction(e.entries)){const n={};return R.forEachEntry(e,((e,o)=>{t(function(e){return R.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),o,n,0)})),n}return null},te={transitional:Q,adapter:["xhr","http"],transformRequest:[function(e,t){const n=t.getContentType()||"",o=n.indexOf("application/json")>-1,i=R.isObject(e);if(i&&R.isHTMLForm(e)&&(e=new FormData(e)),R.isFormData(e))return o&&o?JSON.stringify(ee(e)):e;if(R.isArrayBuffer(e)||R.isBuffer(e)||R.isStream(e)||R.isFile(e)||R.isBlob(e))return e;if(R.isArrayBufferView(e))return e.buffer;if(R.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let r;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return $(e,new Z.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,o){return Z.isNode&&R.isBuffer(e)?(this.append(t,e.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((r=R.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return $(r?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||o?(t.setContentType("application/json",!1),function(e,t,n){if(R.isString(e))try{return(0,JSON.parse)(e),R.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||te.transitional,n=t&&t.forcedJSONParsing,o="json"===this.responseType;if(e&&R.isString(e)&&(n&&!this.responseType||o)){const n=!(t&&t.silentJSONParsing)&&o;try{return JSON.parse(e)}catch(e){if(n){if("SyntaxError"===e.name)throw F.from(e,F.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Z.classes.FormData,Blob:Z.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};R.forEach(["delete","get","head","post","put","patch"],(e=>{te.headers[e]={}}));const ne=te,oe=R.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ie=Symbol("internals");function re(e){return e&&String(e).trim().toLowerCase()}function ae(e){return!1===e||null==e?e:R.isArray(e)?e.map(ae):String(e)}function se(e,t,n,o,i){return R.isFunction(o)?o.call(this,t,n):(i&&(t=n),R.isString(t)?R.isString(o)?-1!==t.indexOf(o):R.isRegExp(o)?o.test(t):void 0:void 0)}class ce{constructor(e){e&&this.set(e)}set(e,t,n){const o=this;function i(e,t,n){const i=re(t);if(!i)throw new Error("header name must be a non-empty string");const r=R.findKey(o,i);(!r||void 0===o[r]||!0===n||void 0===n&&!1!==o[r])&&(o[r||t]=ae(e))}const r=(e,t)=>R.forEach(e,((e,n)=>i(e,n,t)));return R.isPlainObject(e)||e instanceof this.constructor?r(e,t):R.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?r((e=>{const t={};let n,o,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),o=e.substring(i+1).trim(),!n||t[n]&&oe[n]||("set-cookie"===n?t[n]?t[n].push(o):t[n]=[o]:t[n]=t[n]?t[n]+", "+o:o)})),t})(e),t):null!=e&&i(t,e,n),this}get(e,t){if(e=re(e)){const n=R.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=n.exec(e);)t[o[1]]=o[2];return t}(e);if(R.isFunction(t))return t.call(this,e,n);if(R.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=re(e)){const n=R.findKey(this,e);return!(!n||void 0===this[n]||t&&!se(0,this[n],n,t))}return!1}delete(e,t){const n=this;let o=!1;function i(e){if(e=re(e)){const i=R.findKey(n,e);!i||t&&!se(0,n[i],i,t)||(delete n[i],o=!0)}}return R.isArray(e)?e.forEach(i):i(e),o}clear(e){const t=Object.keys(this);let n=t.length,o=!1;for(;n--;){const i=t[n];e&&!se(0,this[i],i,e,!0)||(delete this[i],o=!0)}return o}normalize(e){const t=this,n={};return R.forEach(this,((o,i)=>{const r=R.findKey(n,i);if(r)return t[r]=ae(o),void delete t[i];const a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):String(i).trim();a!==i&&delete t[i],t[a]=ae(o),n[a]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return R.forEach(this,((n,o)=>{null!=n&&!1!==n&&(t[o]=e&&R.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach((e=>n.set(e))),n}static accessor(e){const t=(this[ie]=this[ie]={accessors:{}}).accessors,n=this.prototype;function o(e){const o=re(e);t[o]||(function(e,t){const n=R.toCamelCase(" "+t);["get","set","has"].forEach((o=>{Object.defineProperty(e,o+n,{value:function(e,n,i){return this[o].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[o]=!0)}return R.isArray(e)?e.forEach(o):o(e),this}}ce.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),R.reduceDescriptors(ce.prototype,(({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}})),R.freezeMethods(ce);const le=ce;function ue(e,t){const n=this||ne,o=t||n,i=le.from(o.headers);let r=o.data;return R.forEach(e,(function(e){r=e.call(n,r,i.normalize(),t?t.status:void 0)})),i.normalize(),r}function de(e){return!(!e||!e.__CANCEL__)}function fe(e,t,n){F.call(this,null==e?"canceled":e,F.ERR_CANCELED,t,n),this.name="CanceledError"}R.inherits(fe,F,{__CANCEL__:!0});const ge=fe,pe=Z.isStandardBrowserEnv?{write:function(e,t,n,o,i,r){const a=[];a.push(e+"="+encodeURIComponent(t)),R.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),R.isString(o)&&a.push("path="+o),R.isString(i)&&a.push("domain="+i),!0===r&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function me(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const he=Z.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function o(n){let o=n;return e&&(t.setAttribute("href",o),o=t.href),t.setAttribute("href",o),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=o(window.location.href),function(e){const t=R.isString(e)?o(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0};function Ce(e,t){let n=0;const o=function(e,t){e=e||10;const n=new Array(e),o=new Array(e);let i,r=0,a=0;return t=void 0!==t?t:1e3,function(s){const c=Date.now(),l=o[a];i||(i=c),n[r]=s,o[r]=c;let u=a,d=0;for(;u!==r;)d+=n[u++],u%=e;if(r=(r+1)%e,r===a&&(a=(a+1)%e),c-i<t)return;const f=l&&c-l;return f?Math.round(1e3*d/f):void 0}}(50,250);return i=>{const r=i.loaded,a=i.lengthComputable?i.total:void 0,s=r-n,c=o(s);n=r;const l={loaded:r,total:a,progress:a?r/a:void 0,bytes:s,rate:c||void 0,estimated:c&&a&&r<=a?(a-r)/c:void 0,event:i};l[t?"download":"upload"]=!0,e(l)}}const ye={http:null,xhr:"undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){let o=e.data;const i=le.from(e.headers).normalize(),r=e.responseType;let a,s;function c(){e.cancelToken&&e.cancelToken.unsubscribe(a),e.signal&&e.signal.removeEventListener("abort",a)}R.isFormData(o)&&(Z.isStandardBrowserEnv||Z.isStandardBrowserWebWorkerEnv?i.setContentType(!1):i.getContentType(/^\s*multipart\/form-data/)?R.isString(s=i.getContentType())&&i.setContentType(s.replace(/^\s*(multipart\/form-data);+/,"$1")):i.setContentType("multipart/form-data"));let l=new XMLHttpRequest;if(e.auth){const t=e.auth.username||"",n=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.set("Authorization","Basic "+btoa(t+":"+n))}const u=me(e.baseURL,e.url);function d(){if(!l)return;const o=le.from("getAllResponseHeaders"in l&&l.getAllResponseHeaders());!function(e,t,n){const o=n.config.validateStatus;n.status&&o&&!o(n.status)?t(new F("Request failed with status code "+n.status,[F.ERR_BAD_REQUEST,F.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),c()}),(function(e){n(e),c()}),{data:r&&"text"!==r&&"json"!==r?l.response:l.responseText,status:l.status,statusText:l.statusText,headers:o,config:e,request:l}),l=null}if(l.open(e.method.toUpperCase(),Y(u,e.params,e.paramsSerializer),!0),l.timeout=e.timeout,"onloadend"in l?l.onloadend=d:l.onreadystatechange=function(){l&&4===l.readyState&&(0!==l.status||l.responseURL&&0===l.responseURL.indexOf("file:"))&&setTimeout(d)},l.onabort=function(){l&&(n(new F("Request aborted",F.ECONNABORTED,e,l)),l=null)},l.onerror=function(){n(new F("Network Error",F.ERR_NETWORK,e,l)),l=null},l.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const o=e.transitional||Q;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new F(t,o.clarifyTimeoutError?F.ETIMEDOUT:F.ECONNABORTED,e,l)),l=null},Z.isStandardBrowserEnv){const t=he(u)&&e.xsrfCookieName&&pe.read(e.xsrfCookieName);t&&i.set(e.xsrfHeaderName,t)}void 0===o&&i.setContentType(null),"setRequestHeader"in l&&R.forEach(i.toJSON(),(function(e,t){l.setRequestHeader(t,e)})),R.isUndefined(e.withCredentials)||(l.withCredentials=!!e.withCredentials),r&&"json"!==r&&(l.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&l.addEventListener("progress",Ce(e.onDownloadProgress,!0)),"function"==typeof e.onUploadProgress&&l.upload&&l.upload.addEventListener("progress",Ce(e.onUploadProgress)),(e.cancelToken||e.signal)&&(a=t=>{l&&(n(!t||t.type?new ge(null,e,l):t),l.abort(),l=null)},e.cancelToken&&e.cancelToken.subscribe(a),e.signal&&(e.signal.aborted?a():e.signal.addEventListener("abort",a)));const f=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(u);f&&-1===Z.protocols.indexOf(f)?n(new F("Unsupported protocol "+f+":",F.ERR_BAD_REQUEST,e)):l.send(o||null)}))}};R.forEach(ye,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));const ve=e=>`- ${e}`,we=e=>R.isFunction(e)||null===e||!1===e,be=e=>{e=R.isArray(e)?e:[e];const{length:t}=e;let n,o;const i={};for(let r=0;r<t;r++){let t;if(n=e[r],o=n,!we(n)&&(o=ye[(t=String(n)).toLowerCase()],void 0===o))throw new F(`Unknown adapter '${t}'`);if(o)break;i[t||"#"+r]=o}if(!o){const e=Object.entries(i).map((([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")));let n=t?e.length>1?"since :\n"+e.map(ve).join("\n"):" "+ve(e[0]):"as no adapter specified";throw new F("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return o};function Oe(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ge(null,e)}function Ee(e){return Oe(e),e.headers=le.from(e.headers),e.data=ue.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),be(e.adapter||ne.adapter)(e).then((function(t){return Oe(e),t.data=ue.call(e,e.transformResponse,t),t.headers=le.from(t.headers),t}),(function(t){return de(t)||(Oe(e),t&&t.response&&(t.response.data=ue.call(e,e.transformResponse,t.response),t.response.headers=le.from(t.response.headers))),Promise.reject(t)}))}const Te=e=>e instanceof le?e.toJSON():e;function Se(e,t){t=t||{};const n={};function o(e,t,n){return R.isPlainObject(e)&&R.isPlainObject(t)?R.merge.call({caseless:n},e,t):R.isPlainObject(t)?R.merge({},t):R.isArray(t)?t.slice():t}function i(e,t,n){return R.isUndefined(t)?R.isUndefined(e)?void 0:o(void 0,e,n):o(e,t,n)}function r(e,t){if(!R.isUndefined(t))return o(void 0,t)}function a(e,t){return R.isUndefined(t)?R.isUndefined(e)?void 0:o(void 0,e):o(void 0,t)}function s(n,i,r){return r in t?o(n,i):r in e?o(void 0,n):void 0}const c={url:r,method:r,data:r,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(e,t)=>i(Te(e),Te(t),!0)};return R.forEach(Object.keys(Object.assign({},e,t)),(function(o){const r=c[o]||i,a=r(e[o],t[o],o);R.isUndefined(a)&&r!==s||(n[o]=a)})),n}const De={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{De[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const Ie={};De.transitional=function(e,t,n){function o(e,t){return"[Axios v1.6.0] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,r)=>{if(!1===e)throw new F(o(i," has been removed"+(t?" in "+t:"")),F.ERR_DEPRECATED);return t&&!Ie[i]&&(Ie[i]=!0,console.warn(o(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,r)}};const ke={assertOptions:function(e,t,n){if("object"!=typeof e)throw new F("options must be an object",F.ERR_BAD_OPTION_VALUE);const o=Object.keys(e);let i=o.length;for(;i-- >0;){const r=o[i],a=t[r];if(a){const t=e[r],n=void 0===t||a(t,r,e);if(!0!==n)throw new F("option "+r+" must be "+n,F.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new F("Unknown option "+r,F.ERR_BAD_OPTION)}},validators:De},Ne=ke.validators;class Ae{constructor(e){this.defaults=e,this.interceptors={request:new X,response:new X}}request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=Se(this.defaults,t);const{transitional:n,paramsSerializer:o,headers:i}=t;void 0!==n&&ke.assertOptions(n,{silentJSONParsing:Ne.transitional(Ne.boolean),forcedJSONParsing:Ne.transitional(Ne.boolean),clarifyTimeoutError:Ne.transitional(Ne.boolean)},!1),null!=o&&(R.isFunction(o)?t.paramsSerializer={serialize:o}:ke.assertOptions(o,{encode:Ne.function,serialize:Ne.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let r=i&&R.merge(i.common,i[t.method]);i&&R.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=le.concat(r,i);const a=[];let s=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,a.unshift(e.fulfilled,e.rejected))}));const c=[];let l;this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));let u,d=0;if(!s){const e=[Ee.bind(this),void 0];for(e.unshift.apply(e,a),e.push.apply(e,c),u=e.length,l=Promise.resolve(t);d<u;)l=l.then(e[d++],e[d++]);return l}u=a.length;let f=t;for(d=0;d<u;){const e=a[d++],t=a[d++];try{f=e(f)}catch(e){t.call(this,e);break}}try{l=Ee.call(this,f)}catch(e){return Promise.reject(e)}for(d=0,u=c.length;d<u;)l=l.then(c[d++],c[d++]);return l}getUri(e){return Y(me((e=Se(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}R.forEach(["delete","get","head","options"],(function(e){Ae.prototype[e]=function(t,n){return this.request(Se(n||{},{method:e,url:t,data:(n||{}).data}))}})),R.forEach(["post","put","patch"],(function(e){function t(t){return function(n,o,i){return this.request(Se(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:o}))}}Ae.prototype[e]=t(),Ae.prototype[e+"Form"]=t(!0)}));const Ue=Ae;class qe{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const o=new Promise((e=>{n.subscribe(e),t=e})).then(e);return o.cancel=function(){n.unsubscribe(t)},o},e((function(e,o,i){n.reason||(n.reason=new ge(e,o,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;return{token:new qe((function(t){e=t})),cancel:e}}}const Pe=qe,_e={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(_e).forEach((([e,t])=>{_e[t]=e}));const Re=_e,Le=function e(n){const o=new Ue(n),i=t(Ue.prototype.request,o);return R.extend(i,Ue.prototype,o,{allOwnKeys:!0}),R.extend(i,o,null,{allOwnKeys:!0}),i.create=function(t){return e(Se(n,t))},i}(ne);Le.Axios=Ue,Le.CanceledError=ge,Le.CancelToken=Pe,Le.isCancel=de,Le.VERSION="1.6.0",Le.toFormData=$,Le.AxiosError=F,Le.Cancel=Le.CanceledError,Le.all=function(e){return Promise.all(e)},Le.spread=function(e){return function(t){return e.apply(null,t)}},Le.isAxiosError=function(e){return R.isObject(e)&&!0===e.isAxiosError},Le.mergeConfig=Se,Le.AxiosHeaders=le,Le.formToJSON=e=>ee(R.isHTMLForm(e)?new FormData(e):e),Le.getAdapter=be,Le.HttpStatusCode=Re,Le.default=Le;const xe=Le,je=t=>{try{return atob(t)}catch(n){throw n instanceof DOMException&&"InvalidCharacterError"===n.name?(e.logError(`Value "${t}" is not valid base64`),n):(e.logError(`An error occured when decoding "${t}"`),n)}};var Fe=function(t){var n=t.name,o=t.value,i=t.days,r=void 0===i?90:i,a=t.path,s=void 0===a?"/":a,c=t.domain,l=void 0===c?"":c;if(!n||null==o||""===o)return"";var u=new Date;u.setTime(u.getTime()+24*r*60*60*1e3);var d=u.toUTCString(),f=s?" path=".concat(s,";"):"",g=l?" domain=".concat(l,";"):"",p="".concat(n,"=").concat(o,"; expires=").concat(d,";").concat(f).concat(g);return e.logDebug("Returning new cookie value: ".concat(p)),p},Me=function(t,n){var o="".concat(n,"="),i=decodeURIComponent(t);if(!i.includes(o))return e.logDebug("Decoded cookies string: ".concat(JSON.stringify(i)," does not include ").concat(n," cookie. Returning...")),"";for(var r=i.split(";"),a=0;a<r.length;a++){var s=r[a];if(s){for(;" "===s.charAt(0);)s=s.substring(1);if(0===s.indexOf(o)){var c=s.substring(o.length,s.length);return e.logDebug("Cookie ".concat(n," found. Value ").concat(c,".")),c}}}return e.logDebug("Cookie ".concat(n," found, but the value has not been found. Decoded cookie string: ").concat(JSON.stringify(i),".")),""};const Ge=(t,n)=>{try{const e=Me(t,n);return je(e)}catch(t){if(t instanceof DOMException&&"InvalidCharacterError"===t.name)return e.logInfo(`Invalid cookie "${n}" is being cleared...`),document.cookie=Fe({name:n,value:"none",days:0}),e.logInfo(`Cookie "${n}" has been cleared.`),"";throw t}};var Ve,Be=new Uint8Array(16);function $e(){if(!Ve&&!(Ve="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ve(Be)}const He=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var ze=[],Je=0;Je<256;++Je)ze.push((Je+256).toString(16).substr(1));const We=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(ze[e[t+0]]+ze[e[t+1]]+ze[e[t+2]]+ze[e[t+3]]+"-"+ze[e[t+4]]+ze[e[t+5]]+"-"+ze[e[t+6]]+ze[e[t+7]]+"-"+ze[e[t+8]]+ze[e[t+9]]+"-"+ze[e[t+10]]+ze[e[t+11]]+ze[e[t+12]]+ze[e[t+13]]+ze[e[t+14]]+ze[e[t+15]]).toLowerCase();if(!function(e){return"string"==typeof e&&He.test(e)}(n))throw TypeError("Stringified UUID is invalid");return n},Ke=function(e,t,n){var o=(e=e||{}).random||(e.rng||$e)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=o[i];return t}return We(o)},Ye="utiq_consent_status",Xe="utiqEligibility",Qe=e=>"string"!=typeof e||""===e?null:`${e}_logging_level`;var Ze={Utiq:"Utiq"};const et={onIdsAvailable:{name:"onIdsAvailable",fieldsTemplate:[{key:"mtid",isOptional:!1,type:"string"},{key:"atid",isOptional:!1,type:"string"}]},onConsentUpdateFinished:{name:"onConsentUpdateFinished",fieldsTemplate:[{key:"isConsentGranted",isOptional:!1,type:"boolean"}]},onConsentChanging:{name:"onConsentChanging",fieldsTemplate:[{key:"isConsentGranted",isOptional:!1,type:"boolean"}]},onInitialised:{name:"onInitialised",fieldsTemplate:[]},onEligibilityChecked:{name:"onEligibilityChecked",fieldsTemplate:[{key:"isEligible",isOptional:!1,type:"boolean"}]},onDidomiConsentChanged:{name:"onDidomiConsentChanged",fieldsTemplate:[]},onConsentManagerStatusChanged:{name:"onConsentManagerStatusChanged",fieldsTemplate:[{key:"status",isOptional:!1,type:"string"}]},onFlowCompleted:{name:"onFlowCompleted",fieldsTemplate:[{key:"status",isOptional:!0,type:"string"}]}};var tt=function(e){var t,n,o=null===(n=null===(t=window.Utiq)||void 0===t?void 0:t.config)||void 0===n?void 0:n[{Utiq:"customUtiqHost"}[e]];return null!=o&&""!==o?o:null},nt=function(t,n){var o=function(){return function(t,n){var o=document.createElement("script");o.setAttribute("id","utiq__consent-manager"),e.logTrace("Calling for consent manager origin with params isLocalEnvironment: ".concat(t," and utiqHost: ").concat(n,"..."));var i=((e,t)=>e?window.location.origin:window.Utiq?.config?.consentManagerOrigin?window.Utiq?.config?.consentManagerOrigin:t)(t,n);e.logDebug("Setting consent manager from origin ".concat(i,"...")),o.src="".concat(i,"/utiqConsentManager.js"),document.head.appendChild(o),e.logDebug("Consent manager appended to the document head")}(t,n)};!function(e){var t;window.Utiq||(window.Utiq={}),(t=window.Utiq).API||(t.API={}),window.Utiq.API.showConsentManager=e}(o);var i=Ge(document.cookie,Ye),r=null!==sessionStorage.getItem("utiq_ask_me_later")&&JSON.parse(sessionStorage.getItem("utiq_ask_me_later"));i||r||(e.logInfo("No consent status cookie found. Showing consent manager popup..."),o())},ot=function(){return ot=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ot.apply(this,arguments)},it="utiqDataCallTimestamp",rt="utiq_consent_shown",at=function(){var t,n,o=localStorage;"string"==typeof(null===(t=window.IDCONNECT_CONFIG)||void 0===t?void 0:t.IDCONNECT_STORAGE_TYPE)&&"sessionStorage"===window.IDCONNECT_CONFIG.IDCONNECT_STORAGE_TYPE&&(o=sessionStorage);var i=(null===(n=window.IDCONNECT_CONFIG)||void 0===n?void 0:n.IDCONNECT_DATA_STORAGE)?window.IDCONNECT_CONFIG.IDCONNECT_DATA_STORAGE:"utiqPass";"string"==typeof i&&null!==o.getItem(i)&&o.removeItem(i),null!==localStorage.getItem(Xe)&&localStorage.removeItem(Xe),null!==localStorage.getItem(it)&&localStorage.removeItem(it),null!==sessionStorage.getItem(rt)&&sessionStorage.removeItem(rt),e.logDebug("Cleared IDConnect data from storage")};const st=t=>{try{return btoa(t)}catch(n){throw n instanceof DOMException&&"InvalidCharacterError"===n.name?(e.logError(`The value ${t} contained a character that could not be encoded`),n):(e.logError(`An error occured when decoding "${t}"`),n)}};var ct=function(t){var n=t.fieldsTemplate,o=void 0===n?[]:n,i=t.validationTargetObject,r=t.logIdentificator;if(!r)return e.logError("Missing log identificator"),{isValid:!1};if(!i)return e.logError("Missing validation target for ".concat(r)),{isValid:!1};if("object"!=typeof i)return e.logError("Wrong type for ".concat(i)),{isValid:!1};if(null===o)return e.logError("Fields template were set to ".concat(o," for ").concat(r," and cannot be validated. Returning with negative validation result...")),{isValid:!1};0===o.length&&e.logDebug("No fields template provided for ".concat(r,". Continuing without fields validation..."));var a=Object.keys(i),s=o.map((function(e){return e.key}));if(!a.every((function(e){return s.includes(e)})))return e.logError("Validation target has more fields than present in ".concat(r," fields template.")),e.logWarn("Validation target keys:",a),e.logWarn("Fields template keys:",s),{isValid:!1};var c=[];try{o.forEach((function(e){if("string"==typeof e.key&&"boolean"==typeof e.isOptional&&"string"==typeof e.type){var t=e.key,n=i[t];null!=n?("array"===e.type?Array.isArray(n):typeof n===e.type&&!Array.isArray(n))||c.push("Field ".concat(e.key," expected type ").concat(e.type,", but got ").concat(typeof i[t]," for ").concat(r)):e.isOptional||c.push("Field ".concat(e.key," is missing for ").concat(r))}else c.push("Field template ".concat(JSON.stringify(e)," is of incorrect format for ").concat(r))}))}catch(e){c.push(e.message)}return c.forEach((function(t){e.logError(t)})),{isValid:0===c.length}};const lt=(t,n,o={})=>{const i=((t,n)=>{try{return t===Ze.Utiq?et[n].fieldsTemplate:(e.logError(`Unrecognized environment ${t} for event ${n}`),null)}catch(t){return e.logError(`Event ${n} is not defined. Make sure that the event name is correct or create a new event with this name`),null}})(n,t),{isValid:r}=ct({fieldsTemplate:i,validationTargetObject:o,logIdentificator:t});if(r){const i=window.Utiq?.listeners?.[t]||[];if(!Array.isArray(i))return void e.logDebug(`Listeners for ${t} in the ${n} environment are not an array. Cannot publish the event...`);try{i.forEach((e=>{e(o,n)}))}catch(o){e.logDebug(`Error occurred when processing ${t} listeners in the ${n} environment. Description: ${o}.`)}}};var ut=function(t){for(var n="base_domain_verifier_cookie=cookie",o=t.split("."),i="",r=o.length-1;r>=0;r--)if(i=o.slice(r).join("."),document.cookie="".concat(n,";domain=.").concat(i,";"),document.cookie.indexOf(n)>-1)return document.cookie="".concat(n.split("=")[0],"=;domain=.").concat(i,";expires=Thu, 01 Jan 1970 00:00:01 GMT;"),i;return e.logDebug("Not able to get the base domain of the provided URL: ".concat(t," relatively to the current host")),t.replace("https://utiq.","").replace("https://","").replace("https://utiq-test.","")},dt=function(t,n){e.logInfo("Data clear request made. Clearing the Utiq data..."),!!t&&"false"===t||(document.cookie=Fe({name:Ye,value:st(!1),days:180,domain:ut(window.location.hostname)}),lt(et.onConsentUpdateFinished.name,Ze.Utiq,{isConsentGranted:!1})),at();var o=Qe(n.toLowerCase()),i=Ge(document.cookie,o);i&&"verbose"===i&&(document.cookie=Fe({name:o,value:st("info"),days:0}))};const ft=[{key:"listeners",isOptional:!0,type:"object"},{key:"customUtiqHost",isOptional:!0,type:"string"},{key:"consentManagerOrigin",isOptional:!0,type:"string"},{key:"oncePerTimeInterval",isOptional:!0,type:"number"}],gt=[{key:"utiqHost",isOptional:!1,type:"string"},{key:"apiPath",isOptional:!1,type:"string"},{key:"oncePerSession",isOptional:!1,type:"boolean"}],pt={name:"Optanon",fieldsTemplate:[{key:"CMP",isOptional:!1,type:"string"},{key:"OptanonCookieSubstring",isOptional:!1,type:"string"},{key:"OptanonValue",isOptional:!1,type:"string"},{key:"cookieName",isOptional:!1,type:"string"},{key:"OptanonDelay",isOptional:!1,type:"number"},...gt,...ft],groupsString:"groups",cookieName:"OptanonConsent"},mt={name:"TCF",fieldsTemplate:[{key:"CMP",isOptional:!1,type:"string"},{key:"tcfPurposes",isOptional:!1,type:"array"},{key:"tcfVendors",isOptional:!1,type:"array"},{key:"tcfApiMaxDelay",isOptional:!1,type:"number"},{key:"tcfApiTimeStep",isOptional:!1,type:"number"},...gt,...ft],events:{loaded:"tcloaded",complete:"useractioncomplete"},apiCommands:{data:"getTCData",listener:"addEventListener",customConsent:"getCustomVendorConsents"}},ht={name:"Sourcepoint",fieldsTemplate:[{key:"CMP",isOptional:!1,type:"string"},{key:"tcfPurposes",isOptional:!1,type:"array"},{key:"tcfVendors",isOptional:!1,type:"array"},{key:"tcfCustomPurposes",isOptional:!1,type:"array"},{key:"tcfCustomVendors",isOptional:!1,type:"array"},{key:"tcfApiMaxDelay",isOptional:!1,type:"number"},{key:"tcfApiTimeStep",isOptional:!1,type:"number"},...gt,...ft]},Ct={name:"Usercentrics",fieldsTemplate:[{key:"CMP",isOptional:!1,type:"string"},{key:"localStorageKey",isOptional:!1,type:"string"},{key:"consentIndex",isOptional:!1,type:"number"},...gt,...ft],event:{type:"ucEvent",name:"consent_changed"}},yt={name:"Didomi",fieldsTemplate:[{key:"CMP",isOptional:!1,type:"string"},{key:"didomiUtiqPurposeId",isOptional:!1,type:"string"},{key:"didomiUtiqVendorId",isOptional:!1,type:"string"},...gt,...ft]},vt={name:"Custom",fieldsTemplate:[{key:"CMP",isOptional:!0,type:"string"},{key:"consentManagerDataLayer",isOptional:!0,type:"boolean"},{key:"customizationOptions",isOptional:!0,type:"object"},...gt,...ft]},wt="true",bt="false",Ot="accepted",Et="rejected",Tt=({hostname:t,processConsentChange:n,isConsentGranted:o})=>{"boolean"==typeof o?(e.logDebug(`Processing custom consent value of ${o}...`),n(o,{[t]:{name:"customConsent",value:"utiqConsent",consentParsed:o?"general:1":"general:0",consentState:o?Ot:Et}})):e.logError("Custom CMP - Consent value dispatched with custom CMP event is not a boolean value")};var St=function(t){var n=t.hostname,o=t.processConsentChange,i=t.config;window.didomiOnReady=window.didomiOnReady||[],window.didomiOnReady.push((function(t){var r,a=t.getUserConsentStatusForPurpose(i.didomiUtiqPurposeId),s=t.getUserConsentStatusForVendor(i.didomiUtiqVendorId),c=Boolean(a&&s);e.logDebug("Processing Didomi consent value of ".concat(c,"...")),o(c,((r={})[n]={name:"didomiConsent",value:"purposeConsent=".concat(a,";vendorConsent=").concat(s),consentParsed:c?wt:bt,consentState:c?Ot:Et},r))})),e.logDebug("Consent processing attached to Didomi SDK didomiOnReady function...")},Dt=function(e,t,n){window.didomiOnReady=window.didomiOnReady||[],window.didomiOnReady.push((function(o){var i=o.openTransaction();e?(i.enablePurpose(t),i.enableVendor(n)):(i.disablePurpose(t),i.disableVendor(n)),i.commit()}))};const It=e=>{__tcfapi(mt.apiCommands.data,2,e)},kt=e=>{__tcfapi(mt.apiCommands.customConsent,2,e)},Nt=({tcfCustomPurposes:e,purposeGrants:t})=>{for(const n of e)if(!t[n])return!1;return!0},At=({tcData:t,type:n,idsArray:o})=>(({tcData:t,type:n,idsArray:o})=>n?t[n]?.consents?Array.isArray(o)?!!o.length||(e.logWarn(`validateTcfData: IDs array of type ${n} is empty`),!1):(e.logWarn(`validateTcfData: Missing IDs array of type ${n}`),!1):(e.logWarn(`validateTcfData: tcData["${n}"].consents is missing or not defined`),!1):(e.logWarn("validateTcfData: missing type"),!1))({tcData:t,type:n,idsArray:o})?!o.some((e=>!t[n].consents[e])):(e.logDebug("TCF data validation failed"),!1),Ut=({hostname:t,readCookie:n,processConsentChange:o,config:i,tcData:r})=>{let a=At({tcData:r,type:"purpose",idsArray:i.tcfPurposes});a&&(a=At({tcData:r,type:"vendor",idsArray:i.tcfVendors}));const s=i.tcfPurposes.map((e=>(r?.purpose?.consents?.[e],`${e}:0`))).join(",");e.logDebug(`Processing TCF consent value of ${a}...`),o(a,{[t]:{name:i.cookieName||"tcString",value:i.cookieName?n(document.cookie,i.cookieName):r.tcString,consentParsed:s,consentState:a?Ot:Et}})},qt=({hostname:t,readCookie:n,processConsentChange:o,config:i})=>{let r=0;if("function"!=typeof __tcfapi)return void(r<i.tcfApiMaxDelay?(r+=i.tcfApiTimeStep,setTimeout((()=>qt(i)),i.tcfApiTimeStep)):e.logError(`No __tcfapi available after two tries with ${i.tcfApiMaxDelay}ms timeout`));const a=(({tcfCustomVendors:e,tcfCustomPurposes:t})=>(n,o)=>(i,r)=>{if(!r)return void o(new Error("getCustomVendorConsents call was unsuccessful"));const{grants:a}=i,s=(({tcfCustomVendors:e,tcfCustomPurposes:t,grants:n})=>{for(const o of e)return!!n[o]?.vendorGrant&&Nt({tcfCustomPurposes:t,purposeGrants:n[o].purposeGrants});return!0})({tcfCustomVendors:e,tcfCustomPurposes:t,grants:a});n(s?"Sourcepoint custom vendors consent granted":"Sourcepoint custom vendors consent was not granted")})({tcfCustomVendors:i.tcfCustomVendors,tcfCustomPurposes:i.tcfCustomPurposes}),s=(({hostname:t,readCookie:n,processConsentChange:o,config:i,command:r,commandCallback:a})=>(s,c)=>{c&&(i.CMP===ht.name?new Promise(((e,t)=>{r(a(e,t))})).then((r=>{e.logDebug(`Command callback returned: ${r}`),Ut({hostname:t,readCookie:n,processConsentChange:o,config:i,tcData:s})})).catch((t=>e.logError(t))):Ut({hostname:t,readCookie:n,processConsentChange:o,config:i,tcData:s}))})({hostname:t,readCookie:n,processConsentChange:o,config:i,command:kt,commandCallback:a}),c=(({readCookie:t,config:n,command:o,commandCallback:i})=>(r,a)=>{e.logDebug(`TCF addEventListener - ${r.eventStatus}`);const s=Boolean(n.cookieName&&t(document.cookie,n.cookieName)||r.tcString);r.eventStatus===mt.events.loaded&&a&&s?o(i):r.eventStatus===mt.events.complete&&a&&setTimeout((()=>{o(i)}),10)})({readCookie:n,config:i,command:It,commandCallback:s});(e=>{__tcfapi(mt.apiCommands.listener,2,e)})(c)},Pt=({hostname:t,readCookie:n,processConsentChange:o,config:i})=>{const r=n(document.cookie,pt.cookieName);e.logInfo("OptanonConsent - using OptanonConsent cookie with value: ",{cookie:r});const a=`${i.OptanonCookieSubstring}:1`,s=`${i.OptanonCookieSubstring}:0`,{groups:c,isConsentGranted:l}=r?(({cookie:e,acceptedCookieSubstring:t})=>{let n=!1;const o=new URLSearchParams(e).get(pt.groupsString);return o?.includes(t)&&(n=!0),{groups:o?.split(",").filter((e=>Boolean(e))).join(",")||null,isConsentGranted:n}})({cookie:r,acceptedCookieSubstring:a}):{groups:null,isConsentGranted:!1},u=i.OptanonValue===pt.groupsString;o(l,{[t]:{name:u?pt.groupsString:i.cookieName,value:u?c:n(document.cookie,i.cookieName),consentParsed:l?a:s,consentState:l?Ot:Et}})},_t=({hostname:t,processConsentChange:n,config:o})=>{const i=JSON.parse(localStorage.getItem(o.localStorageKey))?.consents;if(!i)return void e.logError("Usercentrics - Consent value is not saved to local storage");const r=i[o.consentIndex].consentStatus;e.logDebug(`Processing UserCentrics consent value of ${r}...`),n(r,{[t]:{name:o.localStorageKey,value:`consents[${o.consentIndex}]`,consentParsed:r?wt:bt,consentState:r?Ot:Et}})},Rt=(e=!1)=>{if(!0===e)return 0;const t=window.Utiq?.config?.connectionEligibilityRetryInterval;return 6e4*(Number.isInteger(t)&&t>=0?t:2)};var Lt=function(t){var n,o=null===(n=window.Utiq)||void 0===n?void 0:n.transactionId;if(o){var i=t.includes("?")?"&":"?";return"".concat(t).concat(i,"transactionId=").concat(o)}return e.logDebug("No transactionId found in Utiq namespace. Returning original URL..."),t},xt=function(t){var n,o,i,r,a=t.utiqHost,s=t.retryInterval,c=t.ignoreInterval,l=void 0!==c&&c,u=t.eligibilityCheckTrigger,d=void 0===u?"unspecified":u;return n=void 0,o=void 0,r=function(){var t,n,o,i,r,c,u,f,g,p,m,h,C,y;return function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(i=2&s[0]?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],o=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(v){switch(v.label){case 0:if(t=JSON.parse(localStorage.getItem(Xe)),n=null==t?void 0:t.retryEligibilityCheckTime,!(l||!t||"number"==typeof n&&n<Date.now()))return[3,5];if(o=function(t){var n=t.split("://");if(!Array.isArray(n)||2!==n.length)return e.logError("Incorrect URI provided: ".concat(t)),{protocol:null,domain:null,path:null};var o=n[0],i=n[1].split("/");return Array.isArray(i)&&""!==i[0]?{protocol:o,domain:i[0],path:i[1]?i.slice(1).join("/"):null}:(e.logError("Incorrect URI provided: ".concat(t)),{protocol:o,domain:null,path:null})}("".concat(a,"/op/idconnect")),i=o.protocol,r=o.domain,c=o.path,u=t?"":"&initial=true",!i||!r||!c)return e.logError("Data missing from Utiq host - protocol: ".concat(i,", domain: ").concat(r,", path: ").concat(c)),[2,t];f=!1,g=Lt("".concat(i,"://").concat(r,"/").concat(c,"/mno-precheck?type=").concat(d).concat(u)),v.label=1;case 1:return v.trys.push([1,3,4,5]),[4,xe({method:"get",url:g,timeout:4e3})];case 2:return 200===(null==(p=v.sent())?void 0:p.status)&&"ok"===(null===(y=null==p?void 0:p.data)||void 0===y?void 0:y.status)&&(f=!0),[3,5];case 3:return m=v.sent(),e.logError(m),[3,5];case 4:return e.logInfo(f?"Successful mno-precheck call for an eligible connection...":"Failed mno-precheck call for not eligible connection..."),h=Number.isInteger(s)&&s>=0,C=h?s:12e4,t={isEligible:f,eligibilityCheckTime:Date.now(),retryEligibilityCheckTime:f?null:Date.now()+C},[7];case 5:return[2,t]}}))},new((i=void 0)||(i=Promise))((function(e,t){function a(e){try{c(r.next(e))}catch(e){t(e)}}function s(e){try{c(r.throw(e))}catch(e){t(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(a,s)}c((r=r.apply(n,o||[])).next())}))};const jt=({connectionEligibilityData:t,onEligibilityCheckedCallback:n})=>{"object"==typeof t&&t!=={}&&"boolean"==typeof t.isEligible&&(localStorage.setItem(Xe,JSON.stringify(t)),e.logInfo(`Written new ${Xe} local storage entry: ${JSON.stringify(t)}`),"function"==typeof n&&n(t.isEligible))},Ft=async({utiqHost:t,onEligibilityCheckedCallback:n,eligibilityCheckTrigger:o="unspecified",ignoreInterval:i=!1})=>{const r=await xt({utiqHost:t,retryInterval:Rt(i),ignoreInterval:i,eligibilityCheckTrigger:o}),a=Boolean(r?.isEligible);return e.logDebug(`Eligibility check done. Connection eligible: ${a}`),jt({connectionEligibilityData:r,onEligibilityCheckedCallback:n}),a},Mt=({payload:t,config:n,environment:o})=>{Object.keys(t).forEach((e=>{void 0!==t[e].value&&t[e].value||delete t[e]})),Object.keys(t).length<1?e.logError("Consent payload had no defined entries. Consent call will not be made."):(async({consentUrl:t,payload:n})=>{await xe({method:"post",url:t,data:n,withCredentials:!0,headers:{"Content-Type":"application/json"},timeout:4e3}).catch((t=>{e.logError("Error occurred on idConnect consent call")}))})({consentUrl:Lt(`${n.utiqHost}${n.apiPath}`),payload:t}).then((()=>{const t=Ge(document.cookie,Ye);"false"===t&&(async t=>{const n=Lt(`${t}/op/idconnect/data`);return(await xe({method:"get",url:n,withCredentials:!0,timeout:4e3}).catch((t=>{e.logError("Error occurred on data call: ",t)}))).status})(n.utiqHost).then((n=>{if(204===n)try{e.logInfo("Received clear signal from the API call. Clearing the Utiq data..."),dt(t,o)}catch(t){e.logError(`Clearing Utiq data failed. Reason: ${t.message}`)}}))}))};var Gt=function(e){var t=e.split("://"),n=t[0]||null,o=t[1]?t[1].split("/"):null;return{protocol:n,domain:o[0]||null,path:o[1]?o.slice(1).join("/"):null}},Vt=function(e,t){"function"==typeof e&&e(t)},Bt={},$t=function(t){var n=t.iFrameUrl,o=t.iFrameId,i=void 0===o?"GENERIC":o,r=t.isSrcDocUsed,a=void 0!==r&&r,s=t.suppressTransactionId;if(n){var c=void 0!==s&&s?n:Lt(n),l=a?"src":"srcdoc",u=i;Bt[u]?(a?Bt[u].srcdoc=n:Bt[u].src=c,Bt[u].removeAttribute(l)):Bt[u]=function(e,t,n){if(document.body){var o=document.body.appendChild(document.createElement("div"));o.style.position="absolute",o.style.top="0",o.style.left="0",o.style.width="1px",o.style.height="1px",o.style.display="none";var i=function(e,t,n){var o=document.createElement("iframe");return o.setAttribute("id",t),n?o.setAttribute("srcdoc","".concat(e)):o.setAttribute("src","".concat(e)),o.setAttribute("frameborder","0"),o.setAttribute("height","1"),o.setAttribute("width","1"),o}(e,t,n);return o.appendChild(i),i}}(a?n:c,i,a)}else e.logError("Missing iframe URL. Unable to create iFrame for ID ".concat(i))},Ht=function(){var t={isEligible:!1,eligibilityCheckTime:Date.now(),retryEligibilityCheckTime:Date.now()+6048e5};jt({connectionEligibilityData:t,onEligibilityCheckedCallback:function(e){return lt(et.onEligibilityChecked.name,Ze.Utiq,{isEligible:e})}}),e.logError("Telco identification call failed. Identification will be checked again in 7 days...")},zt=function(){var e=["https://service.test.utiq-aws.net","https://service.utiq.com"].includes(window.Utiq.config.customUtiqHost),t=Gt(window.location.href).path;return e&&"pages/troubleshooting"===t},Jt=function(t,n){return!!(null==t?void 0:t.isTroubleShooting)&&(e.logDebug("troubleshooting flow detected on template handler ".concat(n,", no data will be returned")),lt(et.onFlowCompleted.name,Ze.Utiq,{status:n}),!0)},Wt=function(e){return"string"==typeof e&&"localStorage"===e?"localStorage":"sessionStorage"},Kt=function(e){return function(t,n){return window[Wt(e)].setItem(t,JSON.stringify(n))}},Yt=function(e){return function(t){return JSON.parse(window[Wt(e)].getItem(t))}},Xt=function(e){return{set:Kt(e),get:Yt(e)}},Qt=Object.freeze({OK:200,Found:302,TemporaryRedirect:307}),Zt=Object.freeze({Stub:"stub",MspProxy:"mspProxy",UtiqCrossDomain:"utiqCrossDomain",Token:"token",Saml:"saml"}),en="Verify origin:",tn=function(t){var n=t.idConnectConfig,o=t.idConnectConfiguration,i=t.environment;return function(t){e.logDebug("Message is being handled");var r=o.IDCONNECT_DOMAIN_STORAGE_TRANSLATION&&o.IDCONNECT_DOMAIN_STORAGE_TRANSLATION[n.mnoSelectorDomain]?o.IDCONNECT_DOMAIN_STORAGE_TRANSLATION[n.mnoSelectorDomain]:n.mnoSelectorDomain;if(function(t){var n=t.origin,o=t.domain,i=t.mnoSelectorDomain,r=t.protocol,a=Boolean(n),s=window.location.origin===n,c=!!o&&"".concat(r,"://").concat(o)===n,l=!!i&&"".concat(r,"://").concat(i)===n;e.logDebug(en,"Origin ".concat(n," is defined -> ").concat(a)),e.logDebug(en,"Current domain to verify: ".concat(window.location.origin," -> ").concat(s)),e.logDebug(en,"IdConnect domain to verify: ".concat(o," -> ").concat(c)),e.logDebug(en,"MNO domain to verify: ".concat(i," -> ").concat(l));var u=a&&(s||c||l);return e.logDebug("Origin is verified - ".concat(u)),u}({origin:t.origin,domain:n.domain,mnoSelectorDomain:r,protocol:n.protocol}))if(null==t?void 0:t.data){var a;try{a=JSON.parse(t.data)}catch(t){return void e.logDebug("Error when parsing event message: ".concat(t))}if(a.msgType)switch(a.msgType){case"GETDATA":!function(t){var n=t.idConnectConfig,o=t.msg,i=t.idConnectConfiguration,r=t.environment;e.logDebug("Received data call message with ".concat(JSON.stringify(o))),"utiq"===i.IDCONNECT_TYPE?function(t){var n,o,i,r=t.idConnectConfig,a=t.msg,s=t.idConnectConfiguration,c=t.environment;if(e.logDebug("Received Utiq data call message with ".concat(JSON.stringify(a))),"DONE"!==a.status)return e.logDebug("Message status different than DONE. Status: ".concat(a.status)),void e.logDebug("Stopping the calls flow...");var l=a.body;if(l){var u=l.data;if(r.connectId=u,u&&!function(e,t){if(Array.isArray(null==e?void 0:e.consents))return!0;var n=Xt(t.IDCONNECT_STORAGE_TYPE).get(t.IDCONNECT_DATA_STORAGE);return!!(n&&n.connectId&&Array.isArray(n.connectId.consents)&&n.connectId.consents.length>0&&n.connectId.consents[0].domain&&n.connectId.consents[0].name&&n.connectId.consents[0].value)}(u,s)&&"function"==typeof(null===(o=null===(n=window.Utiq)||void 0===n?void 0:n.functions)||void 0===o?void 0:o.dispatchConsentCall)&&window.Utiq.functions.dispatchConsentCall(),r.connectId.value||e.logDebug("connectId value is not present for data message handler..."),u&&!function(e,t){if(Array.isArray(null==e?void 0:e.idGraph))return!0;var n=Xt(t.IDCONNECT_STORAGE_TYPE).get(t.IDCONNECT_DATA_STORAGE);return!!(n&&n.connectId&&Array.isArray(n.connectId.idGraph)&&n.connectId.idGraph.length>0&&n.connectId.idGraph[0].domain&&n.connectId.idGraph[0].mtid&&n.connectId.idGraph[0].atid)}(u,s)&&(null===(i=r.connectId)||void 0===i?void 0:i.value)){var d=((g=zt())&&e.logDebug("troubleshooting service url detected, no data will be returned"),g?"&diagnostic=true":""),f="".concat(r.protocol,"://")+"".concat(r.domain,"/").concat(r.path,"/mno-selector")+"?d=".concat(new URL(s.IDCONNECT_API_HOST).hostname).concat(d);$t({iFrameUrl:f,iFrameId:"MNOSELECTOR",environment:c})}else{var g;!function(e){var t={connectId:e.connectId,ids:{source:{connectId:e.connectId,domain:e.domain,umdid:e.umdid,originalUmdidCookie:e.originalUmdidCookie,dataOriginalUmdidCookie:e.dataOriginalUmdidCookie},target:{connectId:null,domain:null,umdid:null,umdidCookie:null}}};if(Array.isArray(e.connectId.idGraph))for(var n=0,o=e.connectId.idGraph;n<o.length;n++)void 0!==o[n].mtid&&(t.connectStatus="OK");Vt(e.callbackSuccess,t)}(r)}}else e.logDebug("Message body is not present. Terminating the flow...")}({idConnectConfig:n,msg:o,idConnectConfiguration:i,environment:r}):e.logWarn("Cannot call getDataMessageUtiq due to environment ".concat(r," and IDCONNECT_TYPE ").concat(i.IDCONNECT_TYPE," "))}({idConnectConfig:n,msg:a,idConnectConfiguration:o,environment:i});break;case"CONNECT":!function(t){var n,o,i=t.idConnectConfig,r=t.msg,a=t.event,s=t.idConnectConfiguration,c=t.environment;switch(e.logDebug("Received connect call message with ".concat(JSON.stringify(r))),r.status){case"SEND":var l={msgType:"CONNECT",status:"EXCHANGE",data:{transactionId:i.transactionId,connectId:i.connectId.value,connectDomain:i.connectId.domain,umdid:i.umdid}};a.source.postMessage(JSON.stringify(l),"*");break;case"NOUMDID":var u={connectId:i.connectId,ids:{source:{connectId:i.connectId,domain:i.domain,umdid:i.umdid,originalUmdidCookie:i.originalUmdidCookie,dataOriginalUmdidCookie:i.dataOriginalUmdidCookie},target:{connectId:null,domain:null,umdid:null,umdidCookie:null}},connectStatus:"NOUMDID"};Vt(i.callbackSuccess,u);break;case"DONE":if(c===Ze.Utiq&&"NotCreated"===(null===(o=null===(n=null==r?void 0:r.body)||void 0===n?void 0:n.status)||void 0===o?void 0:o.StatusC1)){if(Jt(r,"error"))return;return void Ht()}if(s.IDCONNECT_ALLOW_TOKEN_DATA_CALL&&s.IDCONNECT_ALLOW_TOKEN_DATA_CALL_COUNTER&&i.dataCallCounter<=s.IDCONNECT_ALLOW_TOKEN_DATA_CALL_COUNTER){i.dataCallCounter++;var d="".concat(i.protocol,"://").concat(i.domain,"/")+"".concat(i.path,"/data");$t({iFrameUrl:d,iFrameId:"GETDATA",environment:c})}r.body.ids.source.originalUmdidCookie=i.originalUmdidCookie;var f={connectId:i.connectId,ids:r.body.ids,connectStatus:r.body.status.StatusC1};Vt(i.callbackSuccess,f);break;case"ERROR":if(c===Ze.Utiq){if(Jt(r,"error"))return;Ht()}break;case"NOLOCALSTORAGEACCESS":return;default:e.logError("Unsupported connect message status: ".concat(r.status,". Stopping the flow..."))}}({idConnectConfig:n,msg:a,event:t,idConnectConfiguration:o,environment:i});break;case"MNOSELECTOR":!function(t,n,o,i){var r;if(n.body)if(Array.isArray(o.IDCONNECT_ALLOWED_USE_CASES))if(o.IDCONNECT_ALLOWED_USE_CASES.includes(n.body.useCase))if(n.body.url)if(null===(r=t.connectId)||void 0===r?void 0:r.value)switch(t.useCase=n.body.useCase,t.mnoSelectorDomain=n.body.url.split("/")[2],t.useCase){case Zt.Stub:xe({method:"get",url:n.body.url,timeout:4e3}).then((function(e){if([Qt.OK,Qt.Found,Qt.TemporaryRedirect].includes(e.status)){t.token=e.data.token;var n=zt()?"&diagnostic=true":"",o="".concat(t.protocol,"://").concat(t.mnoSelectorDomain,"/").concat(t.path)+"/tmi-stub?c=".concat(t.connectId.value)+"&token=".concat(t.token)+"&d=".concat(t.domain).concat(n);$t({iFrameUrl:o,iFrameId:"UTIQSTUB",environment:i})}})).catch((function(t){e.logError("Error occurred on idConnect consent call")}));break;case Zt.MspProxy:case Zt.Saml:case Zt.UtiqCrossDomain:$t({iFrameUrl:n.body.url,environment:i});break;case Zt.Token:$t({iFrameUrl:n.body.url,iFrameId:"IDENT",environment:i});break;default:e.logError("Unsupported idConnect ".concat(t.useCase," use case provided"))}else e.logDebug("No connectId cookie value found on mno selector message handler. Terminating the flow...");else e.logDebug("No URL in message body. Terminating the flow...");else e.logDebug("MNO Use Case ".concat(n.body.useCase," not defined in IDCONNECT_ALLOWED_USE_CASES. Terminating the flow..."));else e.logDebug("IDCONNECT_ALLOWED_USE_CASES is not an array of strings. Terminating the flow...");else e.logDebug("Message body is not present. Terminating the flow...")}(n,a,o,i);break;case"SETCOOKIEDOMAIN":if(Jt(a,"setCookieDomain"))return;!function(e,t){void 0!==e.SetCookieDomain&&""!==e.SetCookieDomain&&$t({iFrameUrl:je(e.SetCookieDomain),iFrameId:"SetCookieDomain",environment:t})}(a,i);break;default:e.logWarn("Received unsupported message type ".concat(a.msgType))}else e.logDebug("Caught and discarded message with data, but empty message type: ".concat(a.msgType,"."))}else e.logDebug("Message event had no data");else e.logDebug("Origin does not include current or next best domain. Protocol:",n.protocol,"; domain:",n.domain,"Event origin:",t.origin)}},nn=!1,on=function(t,n){var o,i,r={Utiq:et};if(Array.isArray(t)&&(null===(o=null==t?void 0:t[0])||void 0===o?void 0:o.mtid)&&(null===(i=null==t?void 0:t[0])||void 0===i?void 0:i.atid)){var a=t[0],s=a.mtid,c=a.atid;e.logDebug("Dispatching onIdsAvailable event:",JSON.stringify({mtid:s,atid:c})),lt(r[n].onIdsAvailable.name,n,{mtid:s,atid:c})}nn||(nn=!0,lt(r[n].onFlowCompleted.name,n))},rn=function(e){var t,n=Xt(e.IDCONNECT_STORAGE_TYPE).get(e.IDCONNECT_DATA_STORAGE);return null!=n?null===(t=null==n?void 0:n.connectId)||void 0===t?void 0:t.idGraph:null},an=function(t){var n=t.idConnectConfig,o=t.idConnectConfiguration,i=t.environment,r=rn(o);on(r,i),e.logDebug("Initializing IDconnect promise handler...");var a=tt(i);return a&&(o.IDCONNECT_API_HOST="".concat(a,"/op/idconnect")),(t=>{window.Utiq||={},window.Utiq.API||={},window.Utiq.API.getIdGraphEntry=e=>function(e,t){var n=function(e,t){var n;if(!e)return{isSuccessful:!1,errorMessage:"Entry key (string) parameter is missing"};if(!t||0===Object.keys(t).length)return{isSuccessful:!1,errorMessage:"No configuration set up"};var o=Xt(t.IDCONNECT_STORAGE_TYPE).get(t.IDCONNECT_DATA_STORAGE);if(!Array.isArray(null===(n=null==o?void 0:o.connectId)||void 0===n?void 0:n.idGraph))return{isSuccessful:!1,errorMessage:"No required IDC data present. Cannot extract the ID graph entry"};var i=o.connectId.idGraph[0];return i&&i[e]?{isSuccessful:!0,data:i[e]}:{isSuccessful:!1,errorMessage:"Could not find an entry for provided entry name: ".concat(e)}}(e,t);return n.isSuccessful?n.data:n.errorMessage}(e,t),e.logDebug("ID Connect API functions initialized...")})(o),new Promise((function(t){var r=o.IDCONNECT_API_HOST,a=Gt(r);n.dataCallCounter=0,n.protocol=a.protocol,n.domain=a.domain,n.path=a.path,e.logDebug("Initializing IDconnect callback success logic..."),e.logDebug("Calling ID Connect callbacks, listeners and data call initialization..."),function(t){var n=t.idConnectConfig,o=t.environment,i=t.callbackSuccess,r=t.idConnectConfiguration;(function(e){var t,n,o=Xt(e.IDCONNECT_STORAGE_TYPE).get(e.IDCONNECT_DATA_STORAGE),i=Xt(e.IDCONNECT_STORAGE_TYPE).get(e.IDCONNECT_DATA_STORAGE);return(null==i?void 0:i.umid)&&(null===(n=null===(t=null==o?void 0:o.ids)||void 0===t?void 0:t.target)||void 0===n?void 0:n.umdid)?st("".concat(o.ids.target.umdid,"|").concat(i.umid,"|1")):null})(r)||(e.logDebug("Setting initial ID Connect callbacks, listeners and data call"),n.callbackSuccess=i,void 0!==window.Utiq.idConnectMessageListener&&(e.logDebug("IDconnect data call listener already defined. Removing the listener..."),window.removeEventListener("message",window.Utiq.idConnectMessageListener)),"Utiq"===o&&"utiq"===r.IDCONNECT_TYPE&&(e.logDebug("Recreating IDconnect data call listener..."),window.Utiq.idConnectMessageListener=tn({idConnectConfig:n,idConnectConfiguration:r,environment:o}),e.logDebug("IDconnect data call listener recreated.")),function(){var t,n,o,i,r,a;e.logDebug("Checking if data call should be made...");var s=null===(a=null===(r=null===(i=null===(o=null===(n=null===(t=window.Utiq)||void 0===t?void 0:t.data)||void 0===n?void 0:n.clientConfig)||void 0===o?void 0:o.CALLS_CONFIG)||void 0===i?void 0:i.conditions)||void 0===r?void 0:r.timeConditions)||void 0===a?void 0:a.oncePerTimeInterval;if(!s)return e.logDebug("Interval setting is not present. Removing utiqDataCallTimestamp and making data call..."),localStorage.removeItem("utiqDataCallTimestamp"),!0;var c=Date.now(),l=JSON.parse(localStorage.getItem("utiqDataCallTimestamp"));return l?l&&l+parseInt(String(s),10)<c?(e.logDebug("Time interval passed. It should invoke data call and update utiqDataCallTimestamp time..."),!0):(e.logDebug("Local Storage timestamp found. Data call will not be made."),!1):(e.logDebug("Local Storage utiqDataCallTimestamp not found. Invoking data call..."),!0)}()&&(n.dataCallCounter++,e.logDebug("Adding IDconnect data call listener..."),window.addEventListener("message",window.Utiq.idConnectMessageListener,!1),e.logDebug("Making IDconnect data call..."),function(t,n){var o="".concat(t.protocol,"://")+"".concat(t.domain,"/")+"".concat(t.path,"/data");xe({method:"get",url:Lt(o),withCredentials:!0,timeout:4e3}).then((function(t){if(200===t.status)$t({iFrameUrl:t.data,iFrameId:"GETDATA",isSrcDocUsed:!0,environment:n});else if(204===t.status)try{zt()&&(e.logDebug("troubleshooting flow detected on template handler, should reload the flow"),lt(et.onFlowCompleted.name,Ze.Utiq,{status:"reload"})),window.Utiq.API.handleDataClear()}catch(t){e.logError("handleDataClear API call failed. Reason: ".concat(t.message))}else e.logError("Unrecognised data response status ".concat(t.status))})).catch((function(t){e.logError("Error occurred on data call: ",t)}))}(n,o)))}({idConnectConfig:n,environment:i,callbackSuccess:function(n){var r=function(t){var n,o,i,r,a,s,c,l,u,d,f,g,p,m,h,C,y=t.data,v=t.idConnectConfiguration,w=t.environment,b=rn(v),O={connectId:{domain:y.connectId.domain,id:y.connectId.id,idGraph:y.connectId.idGraph||[],value:y.connectId.value,consents:y.connectId.consents||[]},connectStatus:y.connectStatus,ids:y.ids},E=v.IDCONNECT_DATA_STORAGE;if(e.logDebug("Updating graph data..."),Xt(v.IDCONNECT_STORAGE_TYPE).set(E,O),e.logDebug("Set idConnect data under ".concat(E," at exact time of ").concat(Date.now(),".")),(null===(n=null==b?void 0:b[0])||void 0===n?void 0:n.mtid)!==(null===(r=null===(i=null===(o=null==y?void 0:y.connectId)||void 0===o?void 0:o.idGraph)||void 0===i?void 0:i[0])||void 0===r?void 0:r.mtid)&&on(y.connectId.idGraph,w),(null===(c=null===(s=null===(a=null==y?void 0:y.connectId)||void 0===a?void 0:a.idGraph)||void 0===s?void 0:s[0])||void 0===c?void 0:c.mtid)&&(null===(d=null===(u=null===(l=null==y?void 0:y.connectId)||void 0===l?void 0:l.idGraph)||void 0===u?void 0:u[0])||void 0===d?void 0:d.atid)){var T=JSON.parse(localStorage.getItem("utiqDataCallTimestamp")),S=null===(C=null===(h=null===(m=null===(p=null===(g=null===(f=window.Utiq)||void 0===f?void 0:f.data)||void 0===g?void 0:g.clientConfig)||void 0===p?void 0:p.CALLS_CONFIG)||void 0===m?void 0:m.conditions)||void 0===h?void 0:h.timeConditions)||void 0===C?void 0:C.oncePerTimeInterval,D=Date.now();T?T&&T+parseInt(String(S),10)<D?(localStorage.setItem("utiqDataCallTimestamp",String(D)),e.logDebug("Time interval passed. Updated utiqDataCallTimestamp time to ".concat(D,". Exact time of localStorage entry creation: ").concat(Date.now()))):e.logDebug("Local Storage utiqDataCallTimestamp found in localStorage with value ".concat(T)):(localStorage.setItem("utiqDataCallTimestamp",String(D)),e.logDebug("Local Storage utiqDataCallTimestamp not found. Created new timestamp as ".concat(D,". Exact time of localStorage entry creation: ").concat(Date.now())))}return!0}({data:n,idConnectConfiguration:o,environment:i});t(r)},idConnectConfiguration:o})}))},sn={domain:null,path:null,protocol:null,callbackSuccess:null,connectId:null,umdid:null,originalUmdidCookie:null,dataUmdidCookie:null,token:null,net:null,dataCallCounter:0,version:"1.0.1"},cn=function(e){var t=e.idConnectConfiguration,n=e.environment;return an({idConnectConfig:sn,idConnectConfiguration:t,environment:n})},ln=function(t,n){return function(o,i){return r=void 0,a=void 0,c=function(){var r,a,s,c,l;return function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(i=2&s[0]?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],o=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(u){switch(u.label){case 0:return e.logDebug("Consent is granted: ",o),r=Ge(document.cookie,Ye),a=!r||o!==("true"===r),s=t.config,c=function(e){e||lt(et.onFlowCompleted.name,Ze.Utiq),lt(et.onEligibilityChecked.name,Ze.Utiq,{isEligible:e})},(l=o&&a)?[4,Ft({utiqHost:s.utiqHost,onEligibilityCheckedCallback:c,eligibilityCheckTrigger:"consent_granted",ignoreInterval:!0})]:[3,2];case 1:l=!u.sent(),u.label=2;case 2:return l?(e.logWarn("Consent was granted, but service eligibility check failed for current connection type. Service will not be loaded."),[2]):(a&&(document.cookie=Fe({name:Ye,value:st(o),days:180,domain:ut(window.location.hostname)})),(({payload:t,config:n,environment:o})=>{try{window.Utiq=window.Utiq||{},window.Utiq.functions=window.Utiq.functions||{},window.Utiq.functions.dispatchConsentCall=()=>{e.logTrace(`Calling consent change with payload ${JSON.stringify(t)}`),Mt({payload:t,config:n,environment:o})}}catch(t){e.logWarn(`Error when calling consent listener callback: ${t}`)}})({payload:i,config:s,environment:n}),o?((t=>{const{CALLS_CONFIG:n,IDCONNECT_CONFIG:o}=window.Utiq?.data?.clientConfig||{};if("object"==typeof n&&0!==Object.keys(n).length&&"object"==typeof o&&0!==Object.keys(o).length)e.logInfo("Client configuration detected in data layer. Loading the detected configuration..."),e.logDebug(`Client calls configuration from data layer: ${JSON.stringify(n)}`),e.logDebug(`Client fc configuration from data layer: ${JSON.stringify(o)}`);else{const n={IDCONNECT_API_HOST:`${t}/op/idconnect`,IDCONNECT_DATA_STORAGE:"utiqPass",IDCONNECT_DOMAIN_STORAGE_TRANSLATION:{"mobile-token.telekom.de":"tmi.telekom.de"},IDCONNECT_STORAGE_TYPE:"localStorage",IDCONNECT_TYPE:"utiq",IDCONNECT_ALLOWED_USE_CASES:["token","stub","utiqCrossDomain","mspProxy","saml"],IDCONNECT_ALLOW_TOKEN_DATA_CALL:!0,IDCONNECT_ALLOW_TOKEN_DATA_CALL_COUNTER:1},o={intervalId:null,conditions:{timeConditions:{oncePerSession:!1,oncePerTimeInterval:6e5},oncePerPage:!1,urls:null},callsToMake:{idConnect:!0},callsPerPage:{idConnect:!1}};window.Utiq||={},window.Utiq.data||={},window.Utiq.data.clientConfig={CALLS_CONFIG:o,IDCONNECT_CONFIG:n},window.IDCONNECT_CONFIG=n,e.logDebug(`Loaded new client configuration: ${JSON.stringify(n)}`)}})(s.utiqHost),function(e){var t,n,o,i,r=e.idConnectConfiguration,a=e.environment;t=this,n=void 0,i=function(){return function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(i=2&s[0]?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],o=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(e){switch(e.label){case 0:return[4,cn({idConnectConfiguration:r,environment:a})];case 1:return e.sent(),[2]}}))},new((o=void 0)||(o=Promise))((function(e,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,s)}c((i=i.apply(t,n||[])).next())}))}({idConnectConfiguration:t.data.clientConfig.IDCONNECT_CONFIG,environment:n}),a||e.logDebug("No change with consent. Stopping the flow...")):(e.logInfo("Consent is currently rejected. Clearing the Utiq data..."),at(),a?t.isInitialPageLoad||(e.logTrace("Calling consent change with payload ".concat(JSON.stringify(i))),Mt({payload:i,config:s,environment:n})):e.logDebug("No change with consent. Stopping the flow..."),lt(et.onFlowCompleted.name,Ze.Utiq)),a&&lt(et.onConsentUpdateFinished.name,Ze.Utiq,{isConsentGranted:o}),t.isInitialPageLoad&&(t.isInitialPageLoad=!1),[2])}}))},new((s=void 0)||(s=Promise))((function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){var i;t.done?e(t.value):(i=t.value,i instanceof s?i:new s((function(e){e(i)}))).then(n,o)}i((c=c.apply(r,a||[])).next())}));var r,a,s,c}},un=function(t){var n,o,i,r,a=t.utiqConsentStatusCookie,s=t.environment,c=t.utiqHost,l=t.isLocalEnvironment,u=t.customUtiqHost;return n=void 0,o=void 0,r=function(){var t,n,o;return function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(i=2&s[0]?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],o=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(i){switch(i.label){case 0:return"false"!==a?[3,1]:(dt(a,s),[3,3]);case 1:return[4,Ft({utiqHost:c,onEligibilityCheckedCallback:function(e){lt(et.onEligibilityChecked.name,Ze.Utiq,{isEligible:e}),e||lt(et.onFlowCompleted.name,Ze.Utiq)},eligibilityCheckTrigger:"load"})];case 2:if(!i.sent())return[2];i.label=3;case 3:return(t=>{const n=Qe(t.toLowerCase());window.Utiq||={},window.Utiq.API||={},window.Utiq.API.setVerboseLoggingLevel=()=>{const t=Ge(document.cookie,n);!!t&&"verbose"===t||(document.cookie=Fe({name:n,value:st("verbose"),days:90})),e.logInfo("Verbose logging level has been set"),e.setLogLevel(e.logLevels.verbose)},window.Utiq.API.resetLoggingLevel=()=>{const t=Ge(document.cookie,n);!!t&&"verbose"===t&&(document.cookie=Fe({name:n,value:st("info"),days:0})),e.setLogLevel(e.logLevels.info),e.logInfo("Logging level has been reset to info level")},e.logDebug(`${t} logging API functions initialized...`)})(s),t=(()=>{window.Utiq=window.Utiq||{};const{Utiq:e}=window;return e.functions=e.functions||{},e.config=e.config||{},e.isInitialPageLoad=!0,e})(),(({isOtherConsentManagementPlatformSet:t,isLocalEnvironment:n,utiqHost:o})=>{t||(document.getElementById("utiq__consent-manager")?e.logDebug("Utiq consent manager is already loaded on the page. Proceeding..."):nt(n,o))})({isOtherConsentManagementPlatformSet:Boolean(t.config.CMP),isLocalEnvironment:l,utiqHost:c}),function(e,t){var n={utiqHost:e,apiPath:"/op/idconnect/consent",oncePerSession:!1,oncePerTimeInterval:null},o=t.config,i=(o.listeners,function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]])}return n}(o,["listeners"])),r=ot(ot(ot(ot(ot(ot(ot(ot(ot(ot(ot(ot(ot(ot(ot(ot(ot(ot(ot({},i.customUtiqHost&&{customUtiqHost:i.customUtiqHost}),i.CMP&&{CMP:i.CMP}),i.customizationOptions&&{customizationOptions:i.customizationOptions}),i.consentManagerOrigin&&{consentManagerOrigin:i.consentManagerOrigin}),i.consentManagerDataLayer&&{consentManagerDataLayer:i.consentManagerDataLayer}),i.OptanonValue&&{OptanonValue:i.OptanonValue}),i.OptanonCookieSubstring&&{OptanonCookieSubstring:i.OptanonCookieSubstring}),i.cookieName&&{cookieName:i.cookieName}),i.OptanonDelay&&{OptanonDelay:i.OptanonDelay}),i.tcfPurposes&&{tcfPurposes:i.tcfPurposes}),i.tcfVendors&&{tcfVendors:i.tcfVendors}),i.tcfApiMaxDelay&&{tcfApiMaxDelay:i.tcfApiMaxDelay}),i.tcfApiTimeStep&&{tcfApiTimeStep:i.tcfApiTimeStep}),i.tcfCustomPurposes&&{tcfCustomPurposes:i.tcfCustomPurposes}),i.tcfCustomVendors&&{tcfCustomVendors:i.tcfCustomVendors}),i.localStorageKey&&{localStorageKey:i.localStorageKey}),i.consentIndex&&{consentIndex:i.consentIndex}),i.didomiUtiqPurposeId&&{didomiUtiqPurposeId:i.didomiUtiqPurposeId}),i.didomiUtiqVendorId&&{didomiUtiqVendorId:i.didomiUtiqVendorId});t.config=ot(ot({},n),r),t.config.oncePerTimeInterval="number"==typeof t.config.oncePerTimeInterval?t.config.oncePerTimeInterval:0}(c,t),n=function(){return function(t,n){if(document.getElementById("utiq__revocation-popup")&&"function"==typeof window.Utiq.API.showRevocationPopupWindow)return e.logDebug("Utiq revocation popup is already loaded on the page. Proceeding..."),void window.Utiq.API.showRevocationPopupWindow();var o=document.createElement("script");o.setAttribute("id","utiq__revocation-popup"),e.logTrace("Calling for consent manager origin with params isLocalEnvironment: ".concat(t," and utiqHost: ").concat(n,"..."));var i=t?window.location.origin:n;e.logDebug("Setting revocation popup from origin ".concat(i,"...")),o.src="".concat(i,"/revocationPopup.js"),document.head.appendChild(o),e.logDebug("Revocation popup appended to the document head")}(l,c)},((t,n)=>{window.Utiq||={},window.Utiq.API||={},window.Utiq.API.handleConsentChange=t=>{"boolean"==typeof t?lt(et.onConsentChanging.name,Ze.Utiq,{isConsentGranted:t}):e.logError(`Incorrect consent value provided for Utiq handleConsentChange: ${t}`)},window.Utiq.API.addDidomiEventListener=()=>{window.didomiEventListeners||=[],window.didomiEventListeners.push({event:"consent.changed",listener:function(e){lt(et.onDidomiConsentChanged.name,Ze.Utiq)}})},window.Utiq.API.handleDataClear=()=>{const e=Ge(Ye);dt(e,t)},window.Utiq.API.getUtiqConsentStatus=()=>{const e=Ge(document.cookie,Ye);if(e)return"true"===e},window.Utiq.API.revokeConsentWithPopup=()=>{const t=n;window.Utiq=window.Utiq||{},window.Utiq.listeners=window.Utiq.listeners||{},window.Utiq.listeners.onConsentUpdateFinished=window.Utiq.listeners.onConsentUpdateFinished||[],window.Utiq.listeners.onConsentUpdateFinished.push((({isConsentGranted:n})=>{n?e.logDebug("Consent was revoked, but consent update event finished with consent granted. Revocation popup showing is being stopped..."):t(),window.Utiq.listeners.onConsentUpdateFinished=window.Utiq.listeners.onConsentUpdateFinished.filter((function(e){return e!==t}))})),lt(et.onConsentChanging.name,Ze.Utiq,{isConsentGranted:!1})},e.logDebug("Utiq functions initialized...")})(s,n),o=((t,n)=>{if(n){const[,t]=n.split("://");if(t)return e.logDebug(`Returning hostname from the customUtiqHost config entry: ${t}...`),t}const o=t?`utiq-test.${location.hostname}`:location.hostname;return e.logDebug(`Returning extracted hostname: ${o}...`),o})(l,u),(({hostname:t,processConsentChange:n,readCookie:o,config:i})=>{if(i)switch(i.CMP){case pt.name:const{isValid:r}=ct({fieldsTemplate:pt.fieldsTemplate,validationTargetObject:i,logIdentificator:pt.name});r&&(({hostname:t,readCookie:n,processConsentChange:o,config:i})=>{let r=0;const a=()=>{"function"==typeof window.Optanon?.OnConsentChanged?window.Optanon.OnConsentChanged((()=>{e.logDebug("Optanon.OnConsentChanged was dispatched"),Pt({hostname:t,readCookie:n,processConsentChange:o,config:i})})):setTimeout((()=>{r+=50,r<=i.OptanonDelay&&a()}),50)};a(),Pt({hostname:t,readCookie:n,processConsentChange:o,config:i})})({hostname:t,processConsentChange:n,readCookie:o,config:i});break;case mt.name:const{isValid:a}=ct({fieldsTemplate:mt.fieldsTemplate,validationTargetObject:i,logIdentificator:mt.name});a&&qt({hostname:t,processConsentChange:n,readCookie:o,config:i});break;case ht.name:const{isValid:s}=ct({fieldsTemplate:ht.fieldsTemplate,validationTargetObject:i,logIdentificator:ht.name});s&&qt({hostname:t,processConsentChange:n,readCookie:o,config:i});break;case Ct.name:const{isValid:c}=ct({fieldsTemplate:Ct.fieldsTemplate,validationTargetObject:i,logIdentificator:Ct.name});c&&(({hostname:e,processConsentChange:t,config:n})=>{window.addEventListener(Ct.event.type,(o=>{o.event===Ct.event.name&&_t({hostname:e,processConsentChange:t,config:n})})),_t({hostname:e,processConsentChange:t,config:n})})({hostname:t,processConsentChange:n,config:i});break;case yt.name:const{isValid:l}=ct({fieldsTemplate:yt.fieldsTemplate,validationTargetObject:i,logIdentificator:yt.name});l&&function(t){var n=t.hostname,o=t.processConsentChange,i=t.config;St({hostname:n,processConsentChange:o,config:i}),window.didomiEventListeners||(window.didomiEventListeners=[]),window.didomiEventListeners.push({event:"consent.changed",listener:function(t){"click"===(null==t?void 0:t.action)&&(e.logDebug("Processing consent from Didomi consent change event"),St({hostname:n,processConsentChange:o,config:i}))}}),window.Utiq=window.Utiq||{},window.Utiq.listeners=window.Utiq.listeners||{},window.Utiq.listeners.onConsentChanging=window.Utiq.listeners.onConsentChanging||[],window.Utiq.listeners.onConsentChanging.push((function(t){var r=t.isConsentGranted;e.logDebug("Synchronizing Didomi consent with consent value:",r),Dt(r,i.didomiUtiqPurposeId,i.didomiUtiqVendorId),e.logDebug("Processing consent from onConsentChanging event with consent value:",r),St({hostname:n,processConsentChange:o,config:i})})),window.Utiq.listeners.onConsentUpdateFinished=window.Utiq.listeners.onConsentUpdateFinished||[],window.Utiq.listeners.onConsentUpdateFinished.push((function(t){var n=t.isConsentGranted;e.logDebug("Synchronizing Didomi consent with consent value:",n),Dt(n,i.didomiUtiqPurposeId,i.didomiUtiqVendorId)}))}({hostname:t,processConsentChange:n,config:i});break;case"custom":i.CMPcustom();break;default:const{isValid:u}=ct({fieldsTemplate:vt.fieldsTemplate,validationTargetObject:i,logIdentificator:vt.name});u&&(({hostname:e,processConsentChange:t,getValidatedBase64Cookie:n})=>{window.Utiq=window.Utiq||{},window.Utiq.listeners=window.Utiq.listeners||{},window.Utiq.listeners.onConsentChanging=window.Utiq.listeners.onConsentChanging||[],window.Utiq.listeners.onConsentChanging.push((({isConsentGranted:n})=>{Tt({hostname:e,processConsentChange:t,isConsentGranted:n})}));const o=n(document.cookie,Ye);o&&Tt({hostname:e,processConsentChange:t,isConsentGranted:"true"===o})})({hostname:t,processConsentChange:n,getValidatedBase64Cookie:Ge})}else e.logError("No config provided in Utiq loader object")})({hostname:o,processConsentChange:ln(t,s),readCookie:Me,config:t.config}),lt(et.onInitialised.name,Ze.Utiq),e.logInfo("Utiq library loaded..."),[2]}}))},new((i=void 0)||(i=Promise))((function(e,t){function a(e){try{c(r.next(e))}catch(e){t(e)}}function s(e){try{c(r.throw(e))}catch(e){t(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(a,s)}c((r=r.apply(n,o||[])).next())}))};(async()=>{const t=Ze.Utiq;e.initialize(t,Ge(document.cookie,Qe(t.toLowerCase())));const n=window.location.origin.includes("http://")&&window.location.origin.includes(":8080"),o=tt(Ze.Utiq),i=((t,n)=>{if(n)return e.logDebug(`Returning utiqHost from the customUtiqHost config entry: ${n}...`),n;const o=window.location.host.split(".");o.length>2&&o.shift(),window.location.origin.includes("//utiq-test.")||t?o.unshift("utiq-test"):window.IDCONNECT_CONFIG?.IDCONNECT_API_HOST&&"string"==typeof window.IDCONNECT_CONFIG?.IDCONNECT_API_HOST&&0===window.IDCONNECT_CONFIG?.IDCONNECT_API_HOST.indexOf("https://tmi.")?o.unshift("tmi"):o.unshift("utiq");const i=`https://${o.join(".").replace(":8080","")}`;return e.logDebug(`Returning utiqHost ${i}...`),i})(n,o);e.logDebug("Setting Axios calls interceptors..."),xe.interceptors.request.use((t=>(e.logTrace(`Calling url ${t.url} with data:`,t.data),t)),(t=>(e.logError("Error occurred when setting up a request:",t.message),Promise.reject(t)))),xe.interceptors.response.use((t=>(e.logTrace(`Response from ${t.config.url} with data:`,t.data,"and status",t.status),t)),(t=>(t.response?e.logTrace("Call for",t.response.config.url,"failed with response status",t.response.status,"and reason:",t.response.data):t.request?e.logError("No response received for a call: ",t.request):e.logError("General error occurred: ",t.message),Promise.reject(t)))),e.logDebug("Finished setting Axios calls interceptors.");const r=Ge(document.cookie,Ye),a=window.Utiq?.config?.listeners;((t,n)=>{if("string"!=typeof t||!Object.keys(Ze).includes(t))return void e.logDebug(`No environment with a name "${t}" found. Cannot register event listeners for it.`);if(!n||"object"!=typeof n||0===Object.keys(n).length)return void e.logDebug(`No listeners to register for listeners object: ${n}`);window.Utiq||={},window.Utiq.listeners||={};const o=et;Object.entries(n).forEach((([t,n])=>{Object.keys(o).includes(t)?"function"==typeof n?(window.Utiq.listeners[o[t].name]||=[],window.Utiq.listeners[o[t].name].push(n)):Array.isArray(n)?n.forEach((n=>{"function"==typeof n?(window.Utiq.listeners[o[t].name]||=[],window.Utiq.listeners[o[t].name].push(n)):e.logWarn(`Listener callback from provided callbacks array for event with name ${t} was not a function. Cannot register this listener. Skipping...`)})):e.logWarn(`Listener for event with name ${t} was not a function, nor an array of functions. Cannot register this listener. Skipping...`):e.logInfo(`Event with name ${t} was not recognized. Cannot register this listener. Skipping...`)}))})(Ze.Utiq,a),(()=>{window.Utiq||={};let t=window.Utiq?.transactionId;t||(e.logDebug("No transaction ID present. Creating"),t=Ke(),e.logDebug(`New transactionId: ${t}`)),window.Utiq||={},window.Utiq.transactionId=t})(),"Didomi"===window.Utiq?.config?.CMP&&""===r?(window.didomiOnReady||=[],window.didomiOnReady.push((async a=>{const s=a.getUserConsentStatusForPurpose(window.Utiq?.config?.didomiUtiqPurposeId),c=a.getUserConsentStatusForVendor(window.Utiq?.config?.didomiUtiqVendorId);if(!1!==s&&!1!==c||dt(r,t),!0===s&&!0===c)await un({utiqConsentStatusCookie:r,environment:t,utiqHost:i,isLocalEnvironment:n,customUtiqHost:o});else{let s=!1;window.didomiEventListeners||=[],window.didomiEventListeners.push({event:"consent.changed",listener:function(c){if("click"===c?.action&&!s){e.logDebug("Main Didomi consent processing from consent change event started...");const c=a.getUserConsentStatusForPurpose(window.Utiq?.config?.didomiUtiqPurposeId),l=a.getUserConsentStatusForVendor(window.Utiq?.config?.didomiUtiqVendorId);!1===c||!1===l?dt(r,t):!0===c&&!0===l&&(un({utiqConsentStatusCookie:r,environment:t,utiqHost:i,isLocalEnvironment:n,customUtiqHost:o}),s=!0)}}})}}))):await un({utiqConsentStatusCookie:r,environment:t,utiqHost:i,isLocalEnvironment:n,customUtiqHost:o})})()})();